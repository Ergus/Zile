2008-05-12 23:20  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Add recent release notes, and a FIXME to auto-prepend them
	  in future (thanks to Bob Proulx).

2008-05-02 13:22  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Change @dircategory to Editors, which is used on
	  Debian (at least) rather than Text editors.

2008-04-30 18:17  Reuben Thomas  <rrt@sc3d.org>

	* README, doc/zile.texi: Update references to GNU web pages and
	  mailing lists for Zile.

2008-04-28 18:03  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, funcs.c: Handle error returns from write.

2008-04-28 16:12  Reuben Thomas  <rrt@sc3d.org>

	* src/: funcs.c, glue.c, list.c, list.h, main.c, registers.c,
	  undo.c, vector.c, vector.h, window.c: Fix some whitespace.

	  Simplify some code in shell-command-on-region.

2008-04-28 00:10  Reuben Thomas  <rrt@sc3d.org>

	* AUTHORS, INSTALL, Makefile.am, configure.ac, doc/Makefile.am,
	  doc/mkdoc.c, doc/zile.1.in, doc/zile.texi, src/Makefile.am,
	  src/astr.c, src/astr.h, src/basic.c, src/bind.c, src/buffer.c,
	  src/completion.c, src/editfns.c, src/eval.c, src/eval.h,
	  src/extern.h, src/file.c, src/funcs.c, src/getopt.h,
	  src/getopt_long_only.c, src/glue.c, src/help.c, src/history.c,
	  src/keys.c, src/killring.c, src/line.c, src/lisp.c, src/list.c,
	  src/list.h, src/lists.c, src/lists.h, src/macro.c, src/main.c,
	  src/marker.c, src/minibuf.c, src/parser.c, src/parser.h,
	  src/point.c, src/redisplay.c, src/registers.c, src/search.c,
	  src/strrstr.c, src/tbl_funcs.h, src/tbl_vars.h,
	  src/term_minibuf.c, src/term_ncurses.c, src/term_redisplay.c,
	  src/undo.c, src/variables.c, src/vars.c, src/vars.h,
	  src/vector.c, src/vector.h, src/window.c, src/zile.h,
	  src/zmalloc.c: Fix copyright notices and some white space.

	  Remove unused function leDumpEvalTree from lists.{c,h}.

2008-04-27 22:03  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Use std-options option to automake .

2008-04-27 21:59  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Output --help and --version's output to stdout, not
	  stderr, to make automake (std-options) happy.

2008-04-27 16:55  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, main.c, minibuf.c: Remove minibuf_format,
	  it's just zvasprintf.

	  Fix output of error occurring during startup, before screen is
	  initialised, whether to minibuffer, or, in batch mode, to stderr.

	  Add "GNU" before "Zile" in places to match Emacs.

	  Add bug reporting email address to match Emacs.

	  Change copyright to FSF in main copyright message.

2008-04-27 16:41  Reuben Thomas  <rrt@sc3d.org>

	* src/term_minibuf.c: Update copyright date

2008-04-27 16:14  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am, src/Makefile.am, Makefile.am: Remove pointless
	  comment.

2008-04-27 16:13  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add compile

2008-04-26 13:31  Reuben Thomas  <rrt@sc3d.org>

	* README, configure.ac, doc/FAQ, doc/zile.1.in, doc/zile.texi:
	  Change bug reporting address to bug-zile list alias.

2008-04-26 13:31  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Put copyright dates as ranges for legibility.

2008-04-26 00:32  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, README, configure.ac, doc/FAQ, doc/zile.1.in,
	  doc/zile.texi: Refer to "GNU Zile" in various places rather than
	  plain "Zile".

	  Bump version number to 2.2.58.

2008-04-25 20:10  Reuben Thomas  <rrt@sc3d.org>

	* COPYING, doc/Makefile.am, doc/mkdoc.c, doc/zlint,
	  src/Makefile.am, src/astr.c, src/astr.h, src/basic.c, src/bind.c,
	  src/buffer.c, src/completion.c, src/editfns.c, src/eval.c,
	  src/eval.h, src/extern.h, src/file.c, src/funcs.c, src/glue.c,
	  src/help.c, src/history.c, src/keys.c, src/killring.c,
	  src/line.c, src/lisp.c, src/list.c, src/list.h, src/lists.c,
	  src/lists.h, src/macro.c, src/main.c, src/marker.c,
	  src/minibuf.c, src/parser.c, src/parser.h, src/point.c,
	  src/redisplay.c, src/registers.c, src/search.c, src/tbl_funcs.h,
	  src/tbl_vars.h, src/term_minibuf.c, src/term_ncurses.c,
	  src/term_redisplay.c, src/undo.c, src/variables.c, src/vars.c,
	  src/vars.h, src/vector.c, src/vector.h, src/window.c, src/zile.h,
	  src/zmalloc.c: Change license to GPL 3 or later.

	  Note that some files are still licensed under GPL 2 or later;
	  this is not a problem, it just forces those using the entire
	  program to accept them under GPL 3 or later.

2008-04-04 21:47  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c, src/basic.c, src/bind.c, src/file.c, src/funcs.c,
	  src/help.c, src/killring.c, src/line.c, src/macro.c,
	  src/redisplay.c, src/registers.c, src/search.c, src/tbl_funcs.h,
	  src/tbl_vars.h, src/undo.c, src/variables.c, src/window.c: Fix
	  bad reformatting by indent.

	  Change mkdoc to cope with "DEFUN (" rather than "DEFUN(".

2008-04-04 21:30  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.57.

2008-04-04 21:25  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c, src/astr.c, src/bind.c, src/file.c, src/line.c,
	  src/lists.c, src/main.c, src/registers.c: Remove casts to void
	  for GNU coding standards (use GCC_UNUSED instead).

2008-04-04 21:15  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.h, lists.h, zile.h: Separate structure tag
	  declarations from typedefs, for GNU coding standards.

2008-04-04 21:05  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c, src/basic.c, src/bind.c, src/buffer.c,
	  src/completion.c, src/file.c, src/funcs.c, src/glue.c,
	  src/help.c, src/keys.c, src/line.c, src/macro.c, src/registers.c,
	  src/search.c, src/variables.c, src/window.c, src/zmalloc.c:
	  Remove assignments from if tests to comply with GNU coding
	  standards.

2008-04-03 00:06  Reuben Thomas  <rrt@sc3d.org>

	* doc/config.h, doc/mkdoc.c, src/astr.c, src/astr.h, src/basic.c,
	  src/bind.c, src/buffer.c, src/completion.c, src/editfns.c,
	  src/eval.c, src/eval.h, src/extern.h, src/file.c, src/funcs.c,
	  src/getopt.h, src/getopt_long_only.c, src/glue.c, src/help.c,
	  src/history.c, src/keys.c, src/killring.c, src/line.c,
	  src/lisp.c, src/list.c, src/list.h, src/lists.c, src/lists.h,
	  src/macro.c, src/main.c, src/marker.c, src/minibuf.c,
	  src/parser.c, src/parser.h, src/point.c, src/redisplay.c,
	  src/regex.c, src/regex.h, src/registers.c, src/search.c,
	  src/strrstr.c, src/tbl_funcs.h, src/tbl_vars.h,
	  src/term_minibuf.c, src/term_ncurses.c, src/term_redisplay.c,
	  src/undo.c, src/variables.c, src/vars.c, src/vars.h,
	  src/vasprintf.c, src/vector.c, src/vector.h, src/window.c,
	  src/zile.h, src/zmalloc.c: Run GNU indent on all the C source
	  files to help comply with GNU code layout guidelines. (This
	  should fix all whitespace issues; other issues will still have to
	  be dealt with.)

2008-04-02 23:48  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, doc/FAQ, doc/zile.1.in: Add copyright and licenses to a
	  couple of places where they were missing.

2008-04-02 23:31  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Add GFDL to Top node.

2008-04-02 23:31  Reuben Thomas  <rrt@sc3d.org>

	* autogen.sh: Remove redundant autogen.sh

2008-04-02 23:27  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, Makefile.am, doc/FAQ, doc/Makefile.am, doc/mkdoc.c,
	  doc/zile.texi, doc/zlint, src/Makefile.am, src/extern.h,
	  src/tbl_funcs.h, src/tbl_vars.h: License non-trivial unlicensed
	  files.

2008-04-02 22:50  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Don't mention XEmacs vs Emacs.

2008-04-02 22:14  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/astr.c, src/astr.h, src/basic.c, src/bind.c,
	  src/buffer.c, src/completion.c, src/eval.c, src/file.c,
	  src/funcs.c, src/glue.c, src/help.c, src/keys.c, src/killring.c,
	  src/line.c, src/list.c, src/list.h, src/macro.c, src/main.c,
	  src/minibuf.c, src/redisplay.c, src/registers.c, src/search.c,
	  src/term_minibuf.c, src/term_ncurses.c, src/term_redisplay.c,
	  src/undo.c, src/variables.c, src/window.c, src/zile.h,
	  src/zmalloc.c: Expand copyright ranges to meet GNU guidelines

2008-04-02 22:03  Reuben Thomas  <rrt@sc3d.org>

	* AUTHORS: Give more precise information as per GNU maintainer's
	  guidelines.

2008-02-25 17:18  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.56

2008-02-25 17:17  Reuben Thomas  <rrt@sc3d.org>

	* src/keys.c: Fix bug preventing binding of top-bit-set chars.

2008-02-25 16:11  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix bind_key_vec where a zero-length key vector is
	  given: simply do nothing. Thanks to Robert Millan for reporting
	  this bug.

2008-02-25 16:09  Reuben Thomas  <rrt@sc3d.org>

	* src/zmalloc.c: Allow zrealloc to have size set to 0, as the
	  results work fine: the pointer returned can be freed. It makes
	  sense when we may want to allocate a multiple of some amount
	  where the multiple could be 0; the motivation in this case is
	  vec_toarray.

2008-02-18 23:36  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Update dates for David Taillandier's
	  contribution.

2008-02-18 23:34  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Merge an upstream minor bug fix.

2008-02-13 02:09  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Handle SIGBUS in the same way as SIGSEGV.

2008-02-13 02:08  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.c: Kill compiler warning for unused parameter.

2008-02-13 02:08  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c: Update zile_exit to match new prototype.

2008-02-13 02:05  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.55.

2008-02-13 02:05  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, file.c, main.c, zmalloc.c: Change zile_exit to
	  take a flag indicating if a fatal exception was caught. If so,
	  abort; if not, exit(2) (as before).

	  Update copyright date on zmalloc.c to last substantive change.

2008-02-13 02:01  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Update copyright date to last substantive change

2008-02-13 01:59  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.c: Update copyright date to match last substantive
	  change.

	  Update zile_exit to match changed prototype.

2008-02-10 21:39  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Fix some occurrences of 'Zile'

2008-02-09 02:43  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.54.

2008-02-09 02:43  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Add indent-relative and improve
	  indent-for-tab-command.

2008-02-09 02:42  Reuben Thomas  <rrt@sc3d.org>

	* src/: line.c, tbl_funcs.h: Fix indent-for-tab-command to work as
	  in Emacs.

	  Expose indent_relative as indent-relative, and fix it to use tabs
	  when it should (closes bug #1889859).

	  Update docstrings of both from Emacs 22.1.

2008-02-05 14:45  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL: Add note about autoreconf and correct capitalisation of
	  "Zile" in a couple of places.

2008-02-05 01:18  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore, Makefile.am: Change release notes filename for
	  cosmetic improvement.

2008-02-05 01:11  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Remove syntactically wrong comment.

2008-02-04 14:20  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, src/search.c: Use cvs diff to stop make release if
	  there are unchecked-in changes.

	  Update copyright date on search.c and correct comment: it wasn't
	  a glibc bug.

2008-02-04 14:05  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Work around glibc bug

2008-01-30 18:41  Reuben Thomas  <rrt@sc3d.org>

	* src/: list.c, list.h: Fix "All rights reserved" lines for
	  consistency with other files.

2008-01-30 18:37  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix format of "All rights reserved" string.

2008-01-30 18:32  Reuben Thomas  <rrt@sc3d.org>

	* src/strrstr.c: Oops, it wasn't an off-by-one error, it was an
	  off-by-tlen error!

2008-01-30 18:27  Reuben Thomas  <rrt@sc3d.org>

	* src/strrstr.c: Fix off-by-one error in return value.

2008-01-22 15:54  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/main.c: Update copyright date

2008-01-22 15:52  Reuben Thomas  <rrt@sc3d.org>

	* src/strrstr.c: Update copyright date.

2008-01-22 15:49  Reuben Thomas  <rrt@sc3d.org>

	* THANKS, configure.ac, src/strrstr.c: Rewrite strrstr, and since
	  it's now unrelated to Kent Irwin's code, remove his copyright.

2007-12-27 09:00  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, INSTALL: Use woger.

2007-12-27 09:00  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Remove out.html, now removed by woger.

2007-12-27 08:59  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Change release-notes pattern.

2007-11-19 20:34  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/Makefile.am, src/zile-startup-test: Bump
	  version to 2.2.52.

	  Add test of starting up zile --batch, which should exit with 0
	  return code.

2007-11-19 20:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, zile-startup-test: Add test that Zile starts
	  up. Checks that e.g. default keybindings are correct.

2007-11-19 20:25  Reuben Thomas  <rrt@sc3d.org>

	* src/: keys.c, tbl_funcs.h: Fix another bogus keybinding.

	  Clear up the check code.

2007-11-15 15:19  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Don't display the release command, it's not
	  enlightening.

2007-11-15 15:19  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.51.

2007-11-15 15:18  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Abort if default bindings contain unknown keys.

2007-11-15 15:16  Reuben Thomas  <rrt@sc3d.org>

	* src/keys.c: Fix keysym comparison.

2007-11-15 14:08  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Fix old key name to new (DEL -> DELETE), thanks
	  to Nicolas Duboc.

2007-11-12 00:02  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Make HELP depend on everything that goes into
	  the info file, as it should, rather than just the main .texi.

2007-11-11 23:56  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample: Fix name of Backspace key.

2007-11-11 23:54  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Make docstring like Emacs's.

2007-11-11 23:53  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.50.

2007-11-10 22:04  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Change error to be more like Emacs.

2007-11-10 20:41  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, keys.c, main.c, minibuf.c, tbl_funcs.h:
	  Fixes from Nicolas Duboc to key binding with unrecognised string,
	  swapped PRIOR and NEXT bindings, and documentation not matching
	  code for the name of the Delete key.

	  Make minibuf_write & friends work before the terminal is up (to
	  stderr), and add a global flag set when the minibuffer is written
	  to so we can tell if it has been and not put up the splash screen
	  in that case.

2007-10-28 23:19  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Make the list of FreshMeat release focuses more
	  legible.

2007-10-28 22:50  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Improve documentation (thanks again to Julien
	  Chaffraix).

2007-10-28 21:47  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Add Julien Chaffraix.

2007-10-28 21:47  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Further fix from Julien Chaffraix.

2007-10-28 00:47  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.49

2007-10-28 00:45  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Apply fixes to tab-always-indent and tab undo
	  enhancement from Julien Chaffraix, from patch #1821380.

2007-10-24 20:39  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Add blank lines to copyright block so that it
	  formats correctly (noticed in Zee manual).

2007-10-16 11:52  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.48

2007-10-16 11:52  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Fix backward-kill-word binding

2007-10-14 14:51  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/file.c: Bump version to 2.2.47.

	  Fix bug where new files had an empty EOL string, and ensure that
	  it can't happen again with a simpler method that never sets the
	  EOL type to empty.

2007-10-13 22:08  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add out.html

2007-10-13 21:03  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Make name of release notes file consistent, and
	  ensure it remains so by putting its name in a variable.

2007-10-13 20:52  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Only bind printable characters to self-insert-command
	  by default.

2007-10-13 20:49  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.46.

2007-10-13 20:33  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Remove bogus comment

2007-10-13 20:33  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Add cvs tagging to 'make release'

2007-10-13 20:21  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Fix and improve release target

2007-10-13 20:00  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add release-notes

2007-10-13 19:24  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Fix a missing read option, and clarify a prompt

2007-10-13 19:19  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Add release target to use copher and fm-submit for
	  an automated release.

2007-10-13 19:17  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL: Add a note about fm-submit, and make the automated
	  release notes a bit more obvious (give them a heading).

2007-10-13 18:58  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL: Add a note about copher

2007-10-13 18:39  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove documentation for help-config-sample, which
	  no longer exists.

2007-10-13 18:38  Reuben Thomas  <rrt@sc3d.org>

	* doc/zlint: Make zlint exit with error code if any check fails.

2007-10-13 15:38  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Clarify comment.

2007-10-13 15:37  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix minor space leaks.

2007-10-13 15:28  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, killring.c: Test uniarg flag, not value of uniarg,
	  to see if there's a prefix.

2007-10-13 15:26  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Remove redundant test and comments.

2007-10-13 14:51  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, funcs.c, glue.c, term_ncurses.c: Use
	  "0xff" everywhere we're masking off the bottom bits of a key
	  chord.

	  Move last_key processing down into xgetkey, and add API call
	  lastkey.

	  Allow ungot keys to be recorded in macros.

	  Use xgetkey, not term_xgetkey, in quoted-insert.

2007-10-13 14:11  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, zile.h: Make describe-bindings and where-is print
	  the currently defined bindings, not the default ones.

	  Rename "list" parameter of DEFUN macro to "arglist" to allow
	  "list" type to be used in DEFUNs.

2007-10-13 10:45  Reuben Thomas  <rrt@sc3d.org>

	* doc/: zile.texi: Improve wording.

2007-10-13 10:36  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Fix single spaces after full stop to double.

2007-10-13 10:35  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Improve some wording

2007-10-13 10:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: help.c, tbl_funcs.h: Remove help-config-sample, which
	  doesn't exist in Emacs. The config sample is available in the
	  info manual anyway.

2007-10-13 10:30  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Update bindings for help commands.

2007-10-13 10:22  Reuben Thomas  <rrt@sc3d.org>

	* doc/zlint: Give zile.texi's name explicitly in error messages.

2007-10-13 10:19  Reuben Thomas  <rrt@sc3d.org>

	* doc/zlint: Don't sort variables, so we know the order is the same
	  in the source and docs.

2007-10-13 10:18  Reuben Thomas  <rrt@sc3d.org>

	* doc/: zile.texi, zlint: Don't sort function list in zlint, so we
	  can check the order is the same in the source and docs.

2007-10-13 10:14  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Alphabetize tab-to-tab-stop correctly.

2007-10-13 10:13  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Rename list-bindings to describe-bindings.

2007-10-13 10:11  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove some documentation that doesn't apply to Zile.

2007-10-13 10:07  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h: Fold self_insert_command into its DEFUN,
	  as it is no longer called from anywhere else.

2007-10-13 09:59  Reuben Thomas  <rrt@sc3d.org>

	* src/extern.h: Move self_insert_command to bind.c

2007-10-13 09:57  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, line.c: Make self-insert-command properly bindable,
	  and stop treating it as a special case.

2007-10-13 01:08  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix an off-by-one array index.

2007-10-13 00:59  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, help.c, keys.c: Allow describe-binding to
	  print out the binding you just typed in. A silly amount of work.

2007-10-13 00:15  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/bind.c, src/keys.c, src/tbl_funcs.h: Remove
	  unused LFD key from manual.

	  Allow SPC to be used for key bindings (as "\\SPC").

	  Rename keys to be consistent with Emacs 22, as far as possible.

2007-10-12 23:51  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Overwrite, don't append to, HELP.

2007-10-12 23:46  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Improve some English.

2007-10-12 23:43  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.45.

2007-10-12 23:43  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Update key bindings to match Emacs 22.

2007-10-12 23:42  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove the key bindings section. It is most
	  tedious to keep up to date, usually wrong as a result, and
	  basically useless, as you can get guaranteed correct information
	  out of Zile itself.

2007-10-12 23:29  Reuben Thomas  <rrt@sc3d.org>

	* doc/zlint: Fix zlint to match current tbl_vars.h format.

2007-10-12 23:09  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, keys.c: keytostrvec returns int, but most of its
	  callees were storing the result in a size_t. Oops.

2007-10-12 17:22  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Change binding for view-zile-FAQ to `C-h C-f',
	  as for view-emacs-FAQ.

2007-10-12 16:58  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/FAQ, doc/zile.texi, src/tbl_funcs.h: Bump
	  version to 2.2.44.

	  Switch tab-to-tab-stop and tabify into correct order in
	  tbl_funcs.h.

	  Add FAQ about making TAB insert TAB characters.

	  Rebind goto-line to `M-g g', to match Emacs 22.

2007-10-03 17:25  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/term_ncurses.c: Bump version to 2.2.43.

	  Fix bug #1806914, where Zile was resetting the "Meta sends ESC"
	  flag.  There's a standard ncurses function to do this, no need
	  for the cruft.

2007-10-02 22:03  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/buffer.c, src/file.c, src/term_redisplay.c,
	  src/zile.h: Make EOL detection work more like Emacs, and add
	  modeline indicator of detected line ending. LFCR is no longer
	  supported.

2007-10-02 22:02  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.42.

2007-09-09 01:24  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Make sure sentence are followed by double space.

2007-08-18 17:23  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/extern.h, src/term_redisplay.c: Bump version to
	  2.2.41.

	  Fix bug #1776900 (long file names mess up display). As a result,
	  remove the callers of term_printw and hence the function.

2007-07-29 00:36  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample, doc/zile.texi, src/glue.c, src/tbl_vars.h:
	  Rename "beep" to "ring-bell" to be closer to Emacs.

	  Update documentation for internal consistency and consistency
	  with Emacs documentation.

2007-07-29 00:08  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Give text coordinates a minimum width.

2007-07-28 23:58  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample, doc/zile.texi, src/main.c, src/tbl_vars.h:
	  Rename "skip-splash-screen" to "inhibit-splash-screen", as in
	  Emacs, and copy documentation for the variable from Emacs.

	  Remove mentions of "major mode" as there is only one in Zile.

	  Bump date on manual.

2007-07-28 23:24  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Make modeline rather more like Emacs's, in
	  particular Emacs 22's.

2007-07-28 14:03  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.40.

2007-07-28 13:57  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Remove redundant FIXME (in fact the desired
	  behaviour already occurs), and abbreviate an over-verbose comment
	  (whose content should really be elsewhere).

2007-07-28 13:50  Reuben Thomas  <rrt@sc3d.org>

	* src/variables.c: Update copyright date.

2007-07-28 13:44  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add the .lineno files

2007-07-28 13:42  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c, src/extern.h, src/minibuf.c, src/tbl_vars.h,
	  src/variables.c: Remove special treatment for boolean variables,
	  which Emacs does not have.

2007-07-28 13:23  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Remove unnecessary and ineffective CFLAGS setting.

2007-07-28 11:58  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.am: Add `loc' target to count code with sloccount

2007-07-20 23:22  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Let automake look for install; we don't have to
	  make autoconf do it.

2007-07-20 23:11  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Leave makeinfo to automake.

2007-07-17 09:19  Reuben Thomas  <rrt@sc3d.org>

	* src/strrstr.c: Tidy up strrstr.

2007-07-17 00:09  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/config.h, src/completion.c, src/file.c,
	  src/strrstr.c: Fix strrstr when the searched-for string occurs
	  right at the start of the searched-in string (thanks to Nicolas
	  Duboc for the report).

	  Fix some more filename completion bugs (thanks to Nicolas Duboc
	  for reporting and fixing one of them).

	  Add strrstr to doc/config.h for systems that lack it. Gah,
	  cross-compilation...

	  Bump version to 2.2.39.

2007-07-12 10:10  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.38.

2007-07-12 10:02  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix a bug with /-stripping in get_current_dir
	  introduced in 1.86.

2007-07-03 12:35  Reuben Thomas  <rrt@sc3d.org>

	* src/.cvsignore: Remove unneeded ignore

2007-07-03 12:34  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Remove no longer needed ignores

2007-07-03 11:03  Reuben Thomas  <rrt@sc3d.org>

	* src/extern.h: Remove mention of epocemx.

2007-07-03 11:01  Reuben Thomas  <rrt@sc3d.org>

	* README: Remove mention of epocemx, and clarify flavour of ISO C
	  used.

2007-07-03 00:46  Reuben Thomas  <rrt@sc3d.org>

	* THANKS, doc/FAQ, doc/zile.texi: Remove traces of EPOC support.

2007-07-03 00:44  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Note removal of Allegro and EPOC support

2007-07-03 00:44  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, Makefile.am, README, configure.ac, zile.lnk, zile.pkg,
	  doc/BANNER.EPOC, src/Makefile.am, src/term_epocemx.c: Remove EPOC
	  support.

2007-07-03 00:27  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Fix David Capello's copyright dates to be the same as
	  everywhere else.

2007-07-03 00:26  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Make opening description more like Debian package
	  description.

2007-07-03 00:24  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/tbl_funcs.h: Bump version to 2.2.37.

	  Fix lexical ordering of functions in tbl_funcs.h, thanks to
	  Nicolas Duboc.

2007-07-02 16:59  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, README, configure.ac, doc/FAQ, src/Makefile.am,
	  src/extern.h, src/main.c, src/term_allegro.c: Remove Allegro
	  support.

2007-07-02 13:41  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove out-of-date notes about dependency of
	  functionality on configure options, which is no longer the case.

2007-06-27 17:57  Reuben Thomas  <rrt@sc3d.org>

	* doc/: zile.1.in, zile.texi: Update documentation, and make it
	  more consistent. Correct some small omissions.

2007-06-27 17:46  Reuben Thomas  <rrt@sc3d.org>

	* src/eval.c: Remove set

2007-06-27 01:55  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/config.h, src/main.c, src/zmalloc.c: Define
	  package name properly, and use in literal strings.

	  Bump version to 2.2.36.

2007-06-27 01:45  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Fix handling of +LINE command-line argument.

2007-06-27 00:50  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Remove some code made redundant by the last fix, to
	  not expand file names passed on the command line.

2007-06-26 23:57  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Add some braces for clarity.

2007-06-26 21:56  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Turn off file-name expansion for filenames supplied
	  on the command-line.

2007-06-14 14:18  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Add some contributors

2007-06-14 13:56  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, configure.ac: Bring INSTALL more up to date.

	  Fix capitalisation of "Allegro" in --enable-allegro help string.

2007-06-14 13:07  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c, doc/zile.1.in, src/astr.c, src/astr.h, src/basic.c,
	  src/bind.c, src/buffer.c, src/completion.c, src/editfns.c,
	  src/eval.c, src/eval.h, src/file.c, src/funcs.c, src/glue.c,
	  src/help.c, src/history.c, src/keys.c, src/killring.c,
	  src/line.c, src/lisp.c, src/list.c, src/list.h, src/lists.c,
	  src/lists.h, src/macro.c, src/main.c, src/marker.c,
	  src/minibuf.c, src/parser.c, src/parser.h, src/point.c,
	  src/redisplay.c, src/registers.c, src/search.c, src/strrstr.c,
	  src/tbl_funcs.h, src/tbl_vars.h, src/term_allegro.c,
	  src/term_epocemx.c, src/term_minibuf.c, src/term_ncurses.c,
	  src/term_redisplay.c, src/undo.c, src/variables.c, src/vars.c,
	  src/vars.h, src/vector.c, src/vector.h, src/window.c, src/zile.h,
	  src/zmalloc.c: Remove Id tags from source, which cause remaking
	  after check-in. All the info is in CVS.

	  Bump date on man page.

2007-06-14 12:59  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, minibuf.c: Use astr_new_cstr

2007-06-14 12:55  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/astr.h, src/bind.c, src/completion.c,
	  src/extern.h, src/file.c, src/funcs.c, src/help.c, src/keys.c,
	  src/lists.c, src/main.c, src/minibuf.c: Add astr_new_cstr.

	  Convert calls to astr_cat_cstr that concatenate a one-character
	  string to astr_cat_char calls.

	  Remove split_path, and do path splitting in the one place it is
	  actually used; use new expand_path elsewhere.

	  Bump version to 2.2.35.

2007-06-10 23:11  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Cast fix (thanks to Robert Millan) to avoid
	  negative array indices.

2007-06-07 09:47  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Initialise an uninitialised string.

2007-06-06 23:48  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Translation tables should all be UCHAR_MAX + 1
	  large, not UCHAR_MAX.

	  Simplify code for find_substr and rfind_substr.

	  Improve comment at top of file.

2007-06-06 23:46  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c, src/astr.c: Update zile_exit stubs to match real
	  zile_exit.

2007-06-06 23:45  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Document return codes

2007-06-06 23:15  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.1.in: Make short description the same as in the info
	  manual.

2007-06-06 23:11  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.h: Tidy spacing

2007-06-05 23:30  Reuben Thomas  <rrt@sc3d.org>

	* src/: completion.c, extern.h, file.c, help.c, main.c, minibuf.c,
	  zmalloc.c: Change zile_exit not to take a return code, but always
	  to call exit(2).

	  Make expand_path always use the cwd rather than taking a
	  parameter to give the working directory.

	  Remove get_current_dir from extern.h, and simplify it, removing
	  its parameter. It is only used interactively now.

	  Remove a spurious "foo" from an error message.

	  Move open_file to main.c and call it expand_file; it no longer
	  calls find_file, nor takes a line number. It doesn't abort if the
	  filename is invalid; that is left to its call-site in main.

2007-06-05 15:05  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, main.c: Add clarifying comment to file.c.

	  Set flag FLAG_NEEDS_RESYNC rather than calling resync_redisplay
	  when unnecessary.

	  Make handling of bad command-line options more similar to that of
	  Emacs.

	  Clarify error message construction in main loop.

2007-06-05 15:03  Reuben Thomas  <rrt@sc3d.org>

	* src/term_epocemx.c: Change "Zee" to "Zile".

	  Improve logic slightly: have call to exit in get_tcap's caller,
	  not get_tcap, which can just return NULL on error.

2007-06-05 14:59  Reuben Thomas  <rrt@sc3d.org>

	* src/zmalloc.c: Change exit code for malloc failure to 2, for
	  consistency

2007-06-05 14:43  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_allegro.c, term_ncurses.c: Correct Zee to Zile in
	  comments

2007-06-05 14:41  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version

2007-06-01 22:35  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/term_redisplay.c, src/zile.h: Fix horizontal
	  scrolling position to be per-window.

2007-05-24 21:33  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/search.c: Fix bug #1722972 (Return inserts
	  newline when used to end isearch) and bump version to 2.2.32.

2007-05-03 16:44  Reuben Thomas  <rrt@sc3d.org>

	* src/strrstr.c: Update my copyright date.

2007-05-03 16:43  Reuben Thomas  <rrt@sc3d.org>

	* src/strrstr.c: Use the correct type for return value of strlen.

2007-05-03 16:33  Reuben Thomas  <rrt@sc3d.org>

	* src/strrstr.c: Correct description at top of file.

2007-04-19 23:54  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Update the binary size (it's 10% bigger for 2.2.31 on
	  Debian 4.0 than 2.0beta8 was on Debian 3.1!) and make the section
	  on when not to use Zile reflect Reuben's rather than Sandro's
	  views (so it better reflects the current maintainership!).

2007-04-19 23:49  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/.cvsignore, src/Makefile.am, src/help.c: Bump
	  version to 2.2.31.

	  Convey PATH_DATA to help.c via -D in (AM_)CPPFLAGS, not paths.h,
	  as instructed in automake manual. Remove unused PATH_PREFIX.
	  paths.h is no longer needed.

2007-04-15 13:39  Reuben Thomas  <rrt@sc3d.org>

	* src/term_ncurses.c: Update copyright date and change Zee -> Zile.

2007-04-15 13:24  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.30.

2007-04-15 13:23  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Remove bogus empty line that broke a make rule
	  on less determined makes.

2007-04-15 13:16  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, term_ncurses.c, zmalloc.c: Add getopt.h to
	  distributed files.

	  Add prototype for vasprintf to zmalloc.c for systems that don't
	  have it (because we don't provide it in our headers). Add it just
	  here rather than in zile.h because we only use zvasprintf in Zile
	  code.

	  Guard use of KEY_RESIZE with #ifdef.

2007-03-24 22:53  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Mention a solution for C-h being buggily bound to
	  backspace.

2007-02-12 14:05  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Include stdlib.h for atoi

2007-02-12 14:03  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Add note about incremental search; improve post-2.2 NEWS
	  section.

2007-02-12 14:01  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/extern.h, src/main.c, src/search.c: Fix
	  case-fold-search to work for regex search and to switch off when
	  there are upper-case letters in the search string.

2007-01-19 18:39  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove lurking describe-key-briefly documentation

2007-01-19 18:32  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.27

2007-01-19 18:29  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Fix some more typos.

2007-01-19 18:25  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Fix a couple of typos introduced in 2.2.26 noticed
	  by Nicolas Duboc.

2007-01-19 16:49  Reuben Thomas  <rrt@sc3d.org>

	* doc/: Makefile.am, zlint: Make zlint work with make distcheck

2007-01-19 16:37  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Fix literal brace characters

2007-01-19 16:37  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Add zlint to check-local target

2007-01-19 16:31  Reuben Thomas  <rrt@sc3d.org>

	* doc/: zile.texi, zlint: Make zlint work again and fix
	  documentation errors it detects.

2007-01-19 15:32  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/file.c: Make buffer read-only when file is
	  read-only

2007-01-19 15:32  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add more autotools files

2007-01-19 15:29  Reuben Thomas  <rrt@sc3d.org>

	* doc/.cvsignore: Add texinfo.tex

2007-01-19 14:27  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove mention of other editors: we're now purely
	  an Emacs clone.

2007-01-19 14:24  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/zile.texi, src/file.c, src/tbl_funcs.h: Add
	  find-file-read-only, requested by Ivan Primi.

	  Update configure.ac to work with automake 1.10.

2007-01-09 00:15  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.25

2007-01-09 00:14  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Update to 2007

2007-01-09 00:08  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Don't restrict the umask!

2007-01-04 11:08  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Change info direntry from "Emacs-like" to
	  "Emacs-subset".

2007-01-04 11:07  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Improve info direntry.

2006-12-08 12:37  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: Update copyright year.

2006-11-30 15:05  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version

2006-11-30 14:58  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, eval.c, extern.h, main.c: Fix bugs introduced in
	  2.2.23:

	  Move evaluation of config files before splash screen display so
	  that we can affect it.

	  Reinitialise *scratch* after getting user settings for per-buffer
	  settings (currently just auto-fill-mode). Split out init_buffer
	  from create_buffer to allow this.

2006-11-29 22:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, eval.h, zile.h: Allow uniarg to be passed
	  non-interactively to commands.

	  Make eval_cb_set_helper static as it's only used in one place.

2006-11-29 21:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, eval.h, main.c: Move execution of .zile after setup
	  of terminal so that Zile doesn't crash when commands needing a
	  buffer are executed from .zile.

	  Always pass 1 as uniarg when executing non-interactively. This is
	  still a bug.

2006-11-29 21:00  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c: DEFUN_INT is now DEFUN once more.

2006-11-29 20:57  Reuben Thomas  <rrt@sc3d.org>

	* NEWS, configure.ac, src/basic.c, src/bind.c, src/eval.c,
	  src/extern.h, src/file.c, src/funcs.c, src/help.c,
	  src/killring.c, src/line.c, src/macro.c, src/redisplay.c,
	  src/registers.c, src/search.c, src/undo.c, src/variables.c,
	  src/window.c, src/zile.h: Make non-interactive command evaluation
	  work again, principally for global-set-key, which has been
	  modified to accept non-interactive arguments. This was always
	  supposed to work, but only ever did in Zee.  Oops. Rename
	  DEFUN_INT to DEFUN to reflect this, and add a NEWS item, as it
	  was never mentioned.

	  Bump version to 2.2.23.

2006-09-17 15:08  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, NEWS, configure.ac, doc/FAQ: Bump version to 2.2.22.

	  Remove paragraph from INSTALL about changing key bindings in
	  tbl_funcs.h; one should now be using global-set-key.

	  Add a FAQ entry about the change in boolean syntax in 2.2.16, and
	  a note to NEWS.

2006-09-13 21:01  Reuben Thomas  <rrt@sc3d.org>

	* src/term_ncurses.c: Don't assume ints are positive in
	  term_xgetkey. Oops. For a combination of coincident reasons, this
	  bug only showed up on machines where (size_t)-1 was not UINT_MAX.

2006-09-13 20:58  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove spurious cast

2006-09-13 20:57  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.21

2006-09-11 00:53  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/file.c: Reinstate old temporary file copying
	  code so that permissions and owner are properly preserved when
	  making backup files.

	  Bump version to 2.2.20.

2006-09-06 18:30  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/dotzile.sample, src/file.c, src/tbl_vars.h:
	  Simplify backup code. User experience does not change.

	  Improve comments for backup variables.

	  Move raw_write_to_disk out of the way for a slightly
	  easier-to-read file.c.

	  Bump version to 2.2.19.

2006-08-25 00:50  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/dotzile.sample, src/tbl_vars.h: Apply patch
	  from Nicolas Duboc to fix backup file-related snafus, about
	  default settings and documentation.

2006-07-25 13:31  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Restore erroneously-removed mention of backup
	  under save-buffer.

2006-07-25 13:27  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_vars.h: Fix alphabetical order.

2006-07-20 20:58  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Promote myself

2006-07-20 20:57  Reuben Thomas  <rrt@sc3d.org>

	* doc/BANNER.EPOC: Fix David's copyright years

2006-07-20 20:56  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Mention design fixes.

2006-07-20 01:12  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/dotzile.sample, doc/zile.texi, src/file.c: Bump
	  version to 2.2.17.

	  Streamline backup file code, remove error-prone file copying
	  (which used renaming internally anyway) and use plain renaming,
	  just like Emacs in its default setup.

	  Make backups to a special directory work more like in Emacs.

2006-07-17 23:56  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c: Fix indentation of "local" in ventry.

2006-07-17 23:54  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample: Remove alternative-bindings.

2006-07-17 02:21  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/dotzile.sample, doc/zile.texi, src/bind.c,
	  src/main.c, src/tbl_funcs.h, src/tbl_vars.h: Remove
	  alternative-bindings: key rebinding plus example code supercedes
	  it.

	  Move call of init_bindings so that key bindings in .zile work.

	  Note in tbl_funcs.h that function names must be sorted.

	  Bump version to 2.2.16.

2006-07-15 03:12  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample, doc/mkdoc.c, doc/zile.texi, src/tbl_vars.h,
	  src/variables.c: Fix case-replace and case-fold-search
	  documentation and implementation (closes feature request
	  #1238041).

	  Fix one last "true" to "t", and make variables true if non-nil
	  rather than nil unless "t".

2006-07-15 02:44  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample, doc/zile.texi, src/funcs.c, src/minibuf.c,
	  src/tbl_vars.h, src/variables.c: Change `true' and `false' to `t'
	  and `nil'.

2006-07-01 02:07  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.15

2006-07-01 00:22  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Make non-undo commands reset undo pointer to the end
	  of the list, just like Emacs.

2006-06-30 23:30  Reuben Thomas  <rrt@sc3d.org>

	* src/term_ncurses.c: Use older ncurses calls to work around BSD
	  curses bugs.

2006-06-30 14:57  Reuben Thomas  <rrt@sc3d.org>

	* src/variables.c: Add indent-tabs-mode to list of vars that
	  becomes local when set.

2006-06-30 14:38  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample, doc/zile.texi, src/line.c, src/tbl_funcs.h,
	  src/tbl_vars.h: Remove non-Emacs expand-tabs variable and replace
	  with expand-tabs-mode and tab-always-indent, which are in Emacs
	  and are a little more logical.

2006-04-24 17:08  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Fix typo: add comma

2006-02-26 16:42  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.14.

2006-02-26 16:41  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/term_ncurses.c: Fix meta-key-altering control
	  sequences, thanks to Thomas Dickey (xterm author) for pointing
	  out that what I had, while correct, was confusing (remove ;
	  because it's stricly an argument separator not a terminator). Fix
	  copied from Zile.

	  Bump version to 2.2.13, er, too late for 2.2.13. Oops.

2006-02-08 16:49  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Remove spurious and unguarded va_copy call
	  (thanks, M. W. Markland; closes #1427666).

2006-02-01 04:38  Reuben Thomas  <rrt@sc3d.org>

	* src/window.c: Make window_pt work with windows that have just had
	  their buffer killed (fixes #1420261)

2006-01-30 15:33  Reuben Thomas  <rrt@sc3d.org>

	* src/marker.c: Adjust whitespace.

2006-01-30 15:26  Reuben Thomas  <rrt@sc3d.org>

	* src/extern.h: Remove free_search_history, which no longer exists.

2006-01-30 15:23  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix back_to_indentation's call of
	  line_beginning_position.

2006-01-30 14:26  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Update Reuben's copyright date in the main message.

2006-01-30 14:25  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, search.c: Remove unused search histories.

2006-01-30 14:24  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.12

2006-01-26 13:42  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Update copyright date

2006-01-26 13:38  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.11

2006-01-24 13:36  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Make C-u end the universal argument as advertised.

2006-01-24 02:36  Reuben Thomas  <rrt@sc3d.org>

	* THANKS, configure.ac: Change mention of Lisp interpreter to past
	  tense.

2006-01-24 02:35  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Add mention of bug fixes

2006-01-24 02:33  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix forward-paragraph and backward-paragraph (fixes
	  #1412493).

2006-01-24 02:15  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Fix leak of fargs list by freeing it.

2006-01-24 02:04  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, funcs.c, line.c, zile.h: Remove uniused
	  argument from interactive commands, as it's no longer used. This
	  happens to fix #1400049.

2006-01-24 02:00  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Fix whitespace

2006-01-09 15:22  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix #1400051, where different line endings are
	  accepted in the same file as eol, leading to potential corruption
	  of binary files that are opened and then saved without change.

2005-12-07 01:22  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.9

2005-11-02 13:04  Reuben Thomas  <rrt@sc3d.org>

	* src/term_ncurses.c: Display fix for xterms that don't understand
	  the Meta key handling control sequence. Bug report from Stephen
	  Quinney via Debian.

2005-11-02 12:07  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Fix for systems without va_copy (thanks to
	  rpraetorius@users.sf.net, who made a fix based on
	  http://lists.gnupg.org/pipermail/gnupg-commits/2004-October/005218.html).

2005-09-22 22:25  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.8.

2005-09-22 22:24  Reuben Thomas  <rrt@sc3d.org>

	* src/term_ncurses.c: Fix a cast in term_addch; thanks to Nicolas
	  Duboc for the bug report.

2005-09-22 22:21  Reuben Thomas  <rrt@sc3d.org>

	* src/point.c: Tidy up whitespace

2005-09-15 22:49  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.7.

2005-09-15 22:48  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove mention of zero arg to call-last-kbd-macro,
	  which is no longer supported.

2005-09-15 22:47  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, glue.c, macro.c, zile.h: Simplify macro
	  calling, as in Zee: Since macros are just dumped into the
	  keyboard buffer, they can't cause an error in advance, so there's
	  no point checking, and they can't be run until an error occurs,
	  so we can't support a uniarg of 0 being used for this purpose.

2005-09-03 01:02  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add releaseforge.log

2005-09-03 00:57  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg, doc/BANNER.EPOC: Bump versions to be current.

2005-09-03 00:57  Reuben Thomas  <rrt@sc3d.org>

	* src/term_epocemx.c: Fix building of epocemx backend.

2005-09-03 00:56  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: Make allegro backend build again.

2005-09-03 00:47  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix insert_char_in_insert_mode to flip the flags
	  properly, and in particular to leave the buffer marked as
	  modified.

2005-09-03 00:46  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.6

2005-09-03 00:44  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.5

2005-08-23 16:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: redisplay.c, term_ncurses.c: Fix terminal resizing
	  (reported by Nicolas Duboc).

2005-08-23 01:41  Reuben Thomas  <rrt@sc3d.org>

	* src/vector.c: Include string.h and fix formatting of vec_toarray

2005-08-17 15:15  Reuben Thomas  <rrt@sc3d.org>

	* src/: undo.c, zile.h: Remove unused UNDO_INSERT_CHAR action

2005-08-08 00:07  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.4

2005-08-08 00:05  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c: Fix mkdoc for functions.

2005-08-07 23:19  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Mention ncurses reinstatement

2005-08-06 17:44  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.3.

2005-08-06 17:43  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Remove -Wconversion to avoid tedious warnings until
	  a better solution can be implemented.

2005-08-06 17:42  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/main.c: Remove SIGCONT and SIGTSTP handlers
	  which are now dealt with by ncurses.

	  Don't need sigaction any more, so remove test for it from
	  configure.ac.

2005-08-06 17:26  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c: Add casts to avoid warnings on 64-bit systems.

2005-08-06 17:25  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Use ncurses again instead of termcap.

2005-08-06 17:23  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, extern.h, funcs.c, glue.c, keys.c, macro.c,
	  main.c, redisplay.c, search.c, term_allegro.c, term_epocemx.c,
	  term_minibuf.c, term_ncurses.c, term_redisplay.c, term_termcap.c,
	  window.c, zile.h: Backport Zee's updated terminal interface,
	  including replacement of termcap by ncurses.

	  Add casts to remove some warnings on 64-bit platforms.

2005-07-28 22:08  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, parser.c: Fix some size warnings for 64-bit
	  platforms.

2005-07-28 21:49  Reuben Thomas  <rrt@sc3d.org>

	* src/regex.c: Remove REGEX_MALLOC code for simplification.

	  Fix dodgy test (thanks to Christian Weisberger).

2005-07-27 02:12  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Change mark_active to an int; bit-fields are dodgy.

2005-07-27 02:09  Reuben Thomas  <rrt@sc3d.org>

	* src/: astr.c, vasprintf.c, zmalloc.c: Cast constants to size_t to
	  avoid -Wconversion warnings.

2005-07-25 18:26  Reuben Thomas  <rrt@sc3d.org>

	* acinclude.m4: Remove spurious newline; fix ported from HEAD.

2005-07-25 18:15  Reuben Thomas  <rrt@sc3d.org>

	* acinclude.m4: Remove spurious newline, thanks to Kato Tsuguru via
	  Christian Weisgerber.

2005-07-24 19:15  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Add 'v' to getopt call.

2005-07-24 19:11  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.2.

2005-07-24 18:50  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Fix docs for --funcall (replaces --expr) and
	  --load (no longer exists). Thanks to Nicolas Duboc for alerting
	  me to this.

2005-07-24 18:48  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Fix --funcall (patch from Nicolas Duboc).

2005-07-19 15:10  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_epocemx.c, term_termcap.c: Fix types (thanks to
	  Christian Weisgerber).

2005-07-11 23:53  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Remove unused variable eflag.

2005-07-11 23:49  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Update for 2.2.1

2005-07-11 23:48  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2.1.

2005-07-11 23:48  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, main.c: Add --funcall back (request from
	  Cort Danger Stratton).

2005-07-11 20:52  Reuben Thomas  <rrt@sc3d.org>

	* src/: glue.c, macro.c: In add_cmd_to_macro, assert we have a cmd
	  to add.

	  Make getkey call xgetkey, not term_xgetkey, so that keystrokes
	  read with it are recorded for macros.

2005-07-11 07:21  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, doc/BANNER.EPOC: Bump version to 2.2.0.

2005-07-11 07:20  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Document global-set-key (thanks Kiyoshi Yoneda).

2005-07-11 07:12  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Remove unused variable.

2005-07-11 07:12  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove spurious astr_delete call.

2005-07-11 07:10  Reuben Thomas  <rrt@sc3d.org>

	* src/: astr.c, astr.h, basic.c, bind.c, buffer.c, completion.c,
	  editfns.c, eval.c, eval.h, extern.h, file.c, funcs.c, getopt.h,
	  getopt_long_only.c, glue.c, help.c, history.c, keys.c,
	  killring.c, line.c, lisp.c, list.c, list.h, lists.c, lists.h,
	  macro.c, main.c, marker.c, minibuf.c, parser.c, parser.h,
	  point.c, redisplay.c, registers.c, search.c, strrstr.c,
	  term_allegro.c, term_epocemx.c, term_minibuf.c, term_redisplay.c,
	  term_termcap.c, undo.c, variables.c, vars.c, vars.h, vector.c,
	  vector.h, window.c, zile.h, zmalloc.c: Correct the address of the
	  FSF.

2005-07-11 07:09  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/zile.1.in: Fix documented keystroke for
	  list-bindings (thanks, Brian Ayedemir).

2005-07-11 07:08  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg, doc/BANNER.EPOC, configure.ac: Bump version to 2.0.7.

2005-07-08 19:22  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL: Remove Cygwin note (thanks, Johan Sjöberg).

2005-07-08 19:11  Reuben Thomas  <rrt@sc3d.org>

	* doc/: Makefile.am: Add $(EXEEXT_FOR_BUILD) to mkdoc in AUTODOC
	  dependency; thanks to Johan Sjöberg.

2005-06-07 01:08  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Get rid of "Zile is hung" question: C-g doesn't actually
	  work as described.

2005-06-07 01:00  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Tidy FAQ some more and add question about META not
	  working because of 8-bit input setting in xterm.

2005-06-06 12:38  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix another space leak.

2005-06-06 12:16  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix a space leak.

2005-06-06 11:56  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2beta2.

2005-06-06 11:46  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix incorrect updating of buffer list when last
	  buffer is killed and scratch recreated. Thanks to Alistair
	  Turnbull for finding the bug.

2005-06-06 00:45  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, bind.c, file.c, funcs.c, help.c, killring.c,
	  macro.c, redisplay.c, registers.c, search.c, term_minibuf.c,
	  undo.c, variables.c: Fix broken docstrings.

2005-06-06 00:27  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix bug in newline-and-indent, copied fix from Zee.

	  Fix documentation of user commands.

2005-06-05 19:59  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Eliminate redundant calls to strlen (noticed in Zee
	  sources).

2005-06-04 12:47  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, zile.pkg, doc/BANNER.EPOC: Bump versions to
	  2.2beta1.

2005-06-04 12:41  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Change %d to %s in reporting unknown function *name*.
	  (Fix copied from Zee).

2005-06-02 10:58  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Remove OS-specific information about setting the locale.

	  Remove the question about terminals not resizing; all modern
	  terminal programs should work.

2005-06-02 10:21  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Remove mention of Lisp interpreter (just like I removed the
	  interpreter!).

2005-06-02 10:17  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, test1.el, test1.output, tests: Remove Lisp
	  tests,  which can no longer be run, and are in any case pointless
	  as we no longer have a real interpreter.

2005-06-02 10:09  Reuben Thomas  <rrt@sc3d.org>

	* src/redisplay.c: Make sure that the windows are not taller than
	  the terminal when possible.

2005-06-02 09:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: lisp.c, main.c: Remove -l and -e command line flags (only
	  for Lisp, which we're no longer really supporting) and remove
	  lisp_read_string (which is no longer used) and its auxiliary
	  functions.

2005-06-02 09:18  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Fix bogus indentation.

2005-06-02 09:02  Reuben Thomas  <rrt@sc3d.org>

	* src/redisplay.c: Simplify resize_windows fix (hdelta should
	  always be zero at the end; if not, tough).

2005-06-02 08:53  Reuben Thomas  <rrt@sc3d.org>

	* src/redisplay.c: Simplify resize_windows fix.

2005-06-02 08:45  Reuben Thomas  <rrt@sc3d.org>

	* src/extern.h: Remove no-longer-needed prototype of vasprintf.

2005-06-02 08:32  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, redisplay.c, window.c: Factor out guts of
	  delete-window into a C function delete_window. Use it in
	  resize_windows to kill off excess windows when the terminal is
	  too small.

	  Reformat badly formatted doc comments in windows.c.

2005-06-02 00:20  Reuben Thomas  <rrt@sc3d.org>

	* src/redisplay.c: Fix a crash when there isn't room for the zile
	  windows in the terminal (fix copied from CVS HEAD).

2005-06-02 00:15  Reuben Thomas  <rrt@sc3d.org>

	* src/redisplay.c: Stop a crash if the Zile windows won't fit in
	  the terminal.

2005-06-01 17:38  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Fix a memory leak (thanks valgrind).

2005-06-01 17:06  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, doc/Makefile.am, src/Makefile.am: Get rid of Id
	  lines from Makefiles.am

2005-06-01 17:03  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix regression bug in non-regex incremental forward
	  search.

2005-05-27 17:30  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Move direntry up so it's found by install-info;
	  thanks to Christian Weisgerber.

2005-05-27 17:29  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Portability fix from Christian Weisgerber: use
	  $? not $<

2005-05-27 16:41  Reuben Thomas  <rrt@sc3d.org>

	* src/glue.c: Remove badly broken and unused function getln. Thanks
	  to Alistair Turnbull for pointing this out in Zee.

2005-05-27 16:41  Reuben Thomas  <rrt@sc3d.org>

	* src/glue.c: Remove badly broken and never-called function getln
	  (thanks to Alistair Turnbull for pointing this out in Zee).

2005-05-21 11:37  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.2alpha2.

2005-05-21 11:28  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: Bring allegro terminal up to date.

2005-05-21 01:00  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Fix an inverted assertion.

2005-05-21 00:58  Reuben Thomas  <rrt@sc3d.org>

	* src/term_epocemx.c: Update to match changes in the rest of the
	  code.

2005-05-20 15:28  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Detect when tgoto doesn't work and quit.
	  Thanks to Simon Kagstrom for reporting the bug.

2005-05-20 15:26  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Detect when tgoto doesn't work and quit. Fix
	  copied from 2.0 branch.

2005-05-20 00:29  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_termcap.c, window.c, zile.h: Fix handling of
	  SIGTSTP so that system calls are restarted across it and the
	  terminal is not suspended and resumed if it hasn't yet been
	  initialised.

2005-05-20 00:25  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_termcap.c, window.c, zile.h: Fix handling of
	  SIGTSTP so that system calls are restarted across it, and so that
	  the terminal is not suspended and resumed if it has not yet been
	  initialised.

2005-05-18 01:18  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg, doc/BANNER.EPOC: Bump EPOC versions.

2005-05-18 01:17  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version number.

2005-05-18 01:15  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix a buffer overflow in getchars: only read
	  as many characters as we can fit in keys.

2005-05-18 01:14  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix a buffer overflow in getchars, but only
	  reading characters up to the end of the buffer.

2005-05-17 15:37  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Backport fix to newline-and-indent for the case where
	  the indent should be 0 from Zee.

2005-05-17 13:46  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Make entry about Lisp interpreter more accurate.

2005-05-17 13:42  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am, src/Makefile.am, src/tests: Remove lisp.txt (now
	  defunct) from doc/Makefile.am.

	  Build system fixes for Lisp tests under make distcheck, copied
	  from Zee.

2005-05-17 13:42  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: More updated NEWS for 2.2.

2005-05-17 13:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: test1.el, test1.output, test2.el, test2.output, test3.el,
	  test3.output, tests: Remove Lisp tests that no longer work with
	  eviscerated Lisp interpreter, and update output to sync with
	  reality (new variables in output).

2005-05-17 13:26  Reuben Thomas  <rrt@sc3d.org>

	* NEWS, doc/lisp.txt: Remove lisp.txt as the Lisp interpreter is
	  not really anything of the sort any more.

	  Add NEWS for Zile 2.2.

2005-05-17 13:21  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Bump version to 2.2.

2005-05-17 13:19  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, zile.pkg, doc/BANNER.EPOC: Bump versions for
	  2.2alpha1.

2005-05-17 13:14  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Backport unget key code from Zee (which is
	  the same as that used on the 2.0 branch of Zile), to fix various
	  key reading problems.

2005-05-17 00:11  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, search.c, tbl_funcs.h: Re-add non-regexp search and
	  replace.

2005-05-16 20:52  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg: Bump version to 2.05.

2005-05-16 20:51  Reuben Thomas  <rrt@sc3d.org>

	* doc/BANNER.EPOC: Bump version to 2.0.5.

2005-05-16 20:50  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Build fix, merged from head.

2005-05-16 20:43  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Fix linking against libtermcap on systems which
	  build it into libncurses. Thanks to Pieter Lenaerts for the bug
	  report and for testing the fix.

2005-05-04 12:47  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Correct spelling of Han Boetes's name. Sorry, Han.

2005-05-04 12:46  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Fix spelling of Han Boetes's name. Sorry, Han.

2005-04-08 15:37  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg, doc/BANNER.EPOC: Bump version to 2.0.4.

2005-04-05 18:04  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0.4.

2005-04-05 18:03  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix bug in create_backup_filename reported by Eduardo
	  Muñoz.

2005-04-05 17:59  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix bug in backup file name generation, reported by
	  Eduardo Muñoz.

2005-04-05 17:58  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Update copyright date.

2005-04-04 12:35  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Add fixes from 2.0 branch. This won't really
	  work until the head does character-by-character buffering again,
	  like 2.0 and Zee.

2005-04-04 12:29  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix case changing on words (thanks to Tomi Ollila).

2005-04-04 12:29  Reuben Thomas  <rrt@sc3d.org>

	* src/: regex.c, regex.h: Whitespace fixes.

2005-04-04 11:43  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Another attempt to fix the key-reading
	  problem. If we have an escape character in the current input
	  string less than the maximum length of an escape sequence from
	  the end of the buffer, try waiting for more characters. This
	  won't work on arbitrarily slow terminals, but seems at least to
	  cope with stdin fragmentation.

	  Thanks to Stephen Quinney for testing the patch; I couldn't repro
	  the problem on my machines.

2005-03-31 18:38  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Try to fix multi-byte keys sometimes not
	  being read properly. Sigh.  This one is tricky. Thanks to Stephen
	  Quinney for the report and Thomas Dickey for advice on how to fix
	  it.

2005-03-31 18:03  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix setcase_word bug, patch from Tomi Ollila.

2005-03-31 18:02  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0.3.

2005-03-07 23:01  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Filter out \34 characters, which seem to be
	  emitted by the Linux console on some machines when a cursor key
	  is pressed.

2005-02-27 22:50  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, eval.c, eval.h, extern.h, funcs.c, lisp.c, main.c,
	  tbl_funcs.h, vars.c, vars.h, zile.h: Rip out most of the Lisp
	  interpreter, and use it only for the initialisation file. Now we
	  are much closer to having a releasable Zile 2.2.

2005-02-27 18:45  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix whitespace.

2005-02-27 17:47  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Unset and reset special keys around
	  suspend/resume. Fix ported from Zee.

	  Thanks to Tomi Ollila for reporting the bug.

2005-02-27 17:44  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0.2.

2005-02-27 17:43  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, main.c, term_termcap.c: Fix special keys (in
	  particular cursor keys) around suspend and continue. Fix copied
	  from Zee.

2005-02-21 16:26  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix window resizing (thanks to Nicolas Duboc
	  for reporting the bug).

2005-02-21 16:25  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix window resizing (fix ported from 2.0
	  branch).

2005-02-17 16:03  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix bad bracketing in sizeof. (Bug fix copied from
	  Zee.)

2005-02-16 17:16  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg: Bump version to 2.01.

2005-02-15 00:46  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg, doc/BANNER.EPOC, src/zile.h: Update versions and
	  copyright year.

	  In zile.h, add an leWipe to tidy up the argument of each DEFUN.
	  This doesn't actually work yet, because each DEFUN has already
	  returned before this call is reached. Need to change DEFUNs to
	  set a return value (and never return themselves) to fix this...

2005-02-15 00:42  Reuben Thomas  <rrt@sc3d.org>

	* doc/BANNER.EPOC: Update the version number and my copyright year.

2005-02-14 22:04  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version number to 2.0.1.

2005-02-14 21:57  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg, doc/FAQ, doc/dotzile.sample, doc/zile.1.in,
	  doc/zile.texi, src/help.c, src/tbl_vars.h: Change references to
	  .zilerc to references to .zile.

2005-02-14 21:52  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix buffer overrun on SIGWINCH by
	  reallocating screen buffers. Thanks to the original reporter and
	  for Nicolas Duboc for bringing it back to my attention when I
	  thought it cured.

2005-02-14 21:51  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Reallocate screen buffers on SIGWINCH to
	  prevent buffer overrun. Fix copied from rel-2-0.

2005-02-11 22:00  Reuben Thomas  <rrt@sc3d.org>

	* src/: astr.c, line.c: Fix a couple of memory leaks (fixes copied
	  from HEAD).

2005-02-11 21:15  Reuben Thomas  <rrt@sc3d.org>

	* src/minibuf.c: Remove bogus vsprintf after vasprintf in
	  minibuf_format (this fix should've been applied ages ago, and was
	  already in CVS HEAD).

2005-02-09 00:48  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL: Fix reference to the etc directory to the doc directory.

2005-02-09 00:26  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix a space leak in _xgetkey.

2005-02-09 00:25  Reuben Thomas  <rrt@sc3d.org>

	* src/parser.h: Guard against multiple inclusion.

2005-02-09 00:23  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix a space leak in intercalate_newline.

2005-02-09 00:23  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.c: Fix a space leak in astr_replace_x.

2005-02-08 19:27  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, extern.h, lisp.c, lists.c, lists.h, main.c: Fix
	  display of minibuffer in Allegro.

	  Remove unused leDelete.

	  Move eval_init and eval_finalise to lisp.c (and rename lisp_init
	  and lisp_finalise) so they can be more general than just for
	  eval.c.

2005-02-07 23:29  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Fix minibuffer being cleared too early in Allegro
	  back end.

2005-02-07 23:18  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, zile.h: Add new DEFUN macro for general arguments
	  to Zile commands.

	  Fix a bug in setting of uniused.

	  Make global-set-key work from Lisp.

2005-02-07 23:14  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Fix some English.

2005-02-07 23:13  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0.0

2005-02-07 23:10  Reuben Thomas  <rrt@sc3d.org>

	* doc/dotzile.sample: Document kill-whole-line and move backup
	  settings to the end.

2005-02-07 01:36  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, bind.c, eval.c, eval.h, extern.h, file.c, funcs.c,
	  help.c, killring.c, line.c, macro.c, redisplay.c, registers.c,
	  search.c, undo.c, variables.c, window.c, zile.h: Redefine DEFUN,
	  FUNCALL and FUNCALL_ARG so that Zile commands are now of type int
	  (*f)(int argc, le *branch), i.e. almost of type eval_cb.

	  Rename DEFUN to DEFUN_INT.

	  Now arbitrary arguments can be passed by Lisp to Zile commands
	  (in theory). This will require a new DEFUN macro.

2005-02-06 20:21  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, eval.c, extern.h, funcs.c, line.c, zile.h: Add an
	  argument indicating the presence of the universal arg to the
	  prototype for Zile commands. Since many commands assume uniarg ==
	  0 means no uniarg, don't violate this assumption yet.

	  Move execute_command next to execute_extended_command.

2005-02-06 20:09  Reuben Thomas  <rrt@sc3d.org>

	* src/: killring.c, tbl_vars.h: Add kill-whole-line (closes
	  #1108706).

2005-02-06 12:22  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Update binding for list-buffers.

2005-02-06 08:47  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Document where-is and kill-whole-line.

2005-02-06 08:44  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove documentation for syntax colouring mode
	  commands.

2005-02-06 01:49  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, keys.c, tbl_funcs.h: Add where-is (closes
	  feature request #1088394).

	  Remove list-functions (not in Emacs, and no longer needed).

	  Add case for space key to chordtostr.

	  Change some int's to size_t's in key conversion routines.

	  Fix a bug in write_bindings left over from conversion from alist
	  to list.

2005-02-05 23:47  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: A little more tidying.

2005-02-05 23:44  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Tidy some comments.

2005-02-05 21:01  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Reformat the rest of the file to be consistent
	  with the rest of Zile.

2005-02-05 13:49  Reuben Thomas  <rrt@sc3d.org>

	* src/: astr.c, eval.c, extern.h, file.c, line.c, minibuf.c,
	  term_redisplay.c, vars.c, vasprintf.c, zmalloc.c: Add zasprintf
	  and zvasprintf to zmalloc.c.

	  Remove asprintf from vasprintf.c (no longer needed).

	  Fix compilation warnings in vasprintf.

	  Use new functions.

2005-02-05 13:48  Reuben Thomas  <rrt@sc3d.org>

	* doc/: Makefile.am, mkdoc.c: Add C files #included into mkdoc.c as
	  deps, and fix warnings in mkdoc.c compilation.

2005-02-05 13:32  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: There is no zcalloc, use zmalloc instead.

2005-02-05 02:01  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: Use zcalloc, not calloc.

2005-02-05 01:49  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, file.c, funcs.c, glue.c, line.c, main.c,
	  registers.c, search.c, term_allegro.c, term_epocemx.c,
	  term_minibuf.c, term_termcap.c, zile.h: Make interactive commands
	  work in macro; fixes #1088414 (again...).

	  Rename term_getkey --> getkey, and add xgetkey, defined in terms
	  of it.

	  Move macro handling code from term_xgetkey in term_termcap.c to
	  xgetkey (which is in glue.c).

	  Rename GETKEY_NONFILTERED to GETKEY_UNFILTERED.

2005-02-04 02:10  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, macro.c, term_termcap.c: Reimplement
	  macro keystrokes so they work for interactive commands too.

	  Simplify term_ungetkey: we no longer need to decompose keys back
	  into characters, because unbuffered stdin means that keystrokes
	  always arrive whole.

2005-02-04 02:08  Reuben Thomas  <rrt@sc3d.org>

	* src/vector.c: Reformat function prototypes for consistency.

2005-02-03 02:20  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, main.c, term_allegro.c, term_redisplay.c:
	  Backport David Capello's term_allegro fixes from CVS HEAD.

2005-02-03 02:17  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, main.c, term_allegro.c, term_redisplay.c: Fix
	  compiler warnings in term_allegro.c, and make sure cursor is
	  correctly positioned in all terminals; add term_redraw_cursor to
	  this end.

2005-02-03 01:02  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: More fixes for the fixes to copy_file, again from
	  Han.

2005-02-03 01:00  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: More fixes for the fixes to copy_file, again from
	  Hans.

2005-02-02 02:17  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Security fix to copy_file from Han Boethes.

2005-02-02 02:17  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Check for sigaction as part of build fix for EPOC.

2005-02-02 02:15  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, funcs.c: Whitespace fixes.

2005-02-02 02:04  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Add Han Boethes for a security fix.

2005-02-02 02:04  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Fix punctuation.

2005-02-02 02:03  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Add Han Boethes for security fix to copy_file.

2005-02-02 01:53  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0beta12.

2005-02-02 01:50  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Remove bogus frees and fix bogus logic in copy_file.

2005-02-01 23:49  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Security fix to copy_file from Han Boetes.

2005-02-01 23:42  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix return code.

2005-02-01 23:28  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Tweak error message.

2005-02-01 23:23  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix a couple of bugs in copy_file found by Han
	  Boetes.

2005-01-30 23:24  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, help.c, lists.h, macro.c, term_epocemx.c,
	  zile.h: Implement name-last-kbd-macro.

	  Reorder extern.h to get more files in alphabetical order.

	  Add get_macro and call_macro.

2005-01-30 20:24  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix translate_key for nbytes == 0 (bug
	  introduced by changing nbytes to unsigned).

2005-01-30 17:46  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, macro.c, search.c, term_termcap.c,
	  zile.h: Replace Macro struct with something simpler: just build a
	  list of keys.

	  Remove the static alternative_bindings in bind.c, which was set
	  but never read.

	  Tweak minibuffer message for global-set-key.

	  Remove unused FLAG_EXECUTING_MACRO flag from zile.h.

2005-01-30 14:37  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: A little reformatting.

2005-01-30 14:35  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Undo a change made by David Capello which clears the
	  minibuffer before updating the terminal, so that errors in the
	  minibuffer disappear before they can be read.

2005-01-30 02:48  David A. Capello  <dacap@users.sourceforge.net>

	* src/main.c: Fixed the open_file() with arguments (now start from
	  the beginning of the buffer) Also, fixed the redraw cycle

2005-01-30 02:43  David A. Capello  <dacap@users.sourceforge.net>

	* src/term_allegro.c: Fixed some outdated compilation errors.

2005-01-30 02:41  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: nModified paragraph routines to be more like Emacs.

2005-01-30 02:27  David A. Capello  <dacap@users.sourceforge.net>

	* src/extern.h: Added last_command() routine.

2005-01-30 02:25  David A. Capello  <dacap@users.sourceforge.net>

	* src/bind.c: Added last_command() routine

2005-01-29 13:16  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.c: Fix a signed vs unsigned comparison warning.

2005-01-29 13:15  Reuben Thomas  <rrt@sc3d.org>

	* src/: list.c, lists.c, macro.c: Fix a couple of warnings.

2005-01-29 13:14  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix signed vs unsigned compilation warnings.

2005-01-29 13:10  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Fix some signed vs unsigned parameter warnings.

2005-01-29 13:08  Reuben Thomas  <rrt@sc3d.org>

	* src/editfns.c: Fix a signed vs unsigned comparison warning.

2005-01-29 13:06  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Make an incorrectly typed size_t an int.

2005-01-29 13:05  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, funcs.c: Fix signed vs unsigned
	  comparison warnings.

2005-01-29 12:55  Reuben Thomas  <rrt@sc3d.org>

	* src/glue.c: Fix signed vs unsigned comparison warnings.

2005-01-29 12:51  Reuben Thomas  <rrt@sc3d.org>

	* src/keys.c: Fix signed vs unsigned comparison warnings.

2005-01-29 12:44  Reuben Thomas  <rrt@sc3d.org>

	* src/: zile.h, main.c, bind.c, extern.h: Fix signed vs unsigned
	  comparison warnings.

2005-01-29 12:40  Reuben Thomas  <rrt@sc3d.org>

	* src/redisplay.c: Fix unsigned vs signed comparison warning in and
	  simplify resync_display.

2005-01-29 12:22  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix unsigned vs signed comparison warning.

2005-01-29 12:21  Reuben Thomas  <rrt@sc3d.org>

	* src/undo.c: Fix signed vs unsigned comparison warnings.

2005-01-29 12:21  Reuben Thomas  <rrt@sc3d.org>

	* src/term_minibuf.c: Fix unsigned vs signed comparison warnings.

2005-01-29 12:17  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Fix unsigned vs signed comparison warnings.

2005-01-29 11:59  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/main.c: Make sigaction optional, so that Zile
	  compiles again on EPOC.

2005-01-29 00:36  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, zile.h, term_termcap.c: Fix signed vs unsigned
	  comparison warnings.

	  Remove pointless parentheses from octal constants in zile.h.

2005-01-29 00:25  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h: Make get_function and get_function_name
	  extern, for use elsewhere.

2005-01-29 00:23  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, eval.h: Make evalLookupNode static (it's not
	  mentioned in eval.h anyway) and factor lookupFunction from
	  evaluateBranch, for use elsewhere.

2005-01-28 02:38  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, eval.c, extern.h, funcs.c, variables.c, vars.c,
	  vars.h, zile.h: Fix unsigned vs signed comparison warnings in
	  basic.c.

	  Make variableSet* update the variable list rather than returning
	  the new list. This avoids forgetting to assign the result, which
	  I've done a couple of times already.

	  In set-variable, don't pre-insert the old value of the variable
	  into the minibuffer. Emacs doesn't, and it's irritating.

2005-01-28 02:19  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix fill_break_line (fix merged from HEAD).

2005-01-28 02:07  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, extern.h, line.c: Fix fill_break_line.

	  Fix some signed vs unsigned comparison warnings.

2005-01-28 01:20  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Add -W to CFLAGS.

2005-01-28 01:02  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix set-fill-column so it really does set the
	  variable.

2005-01-28 00:49  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: In set-fill-column, allow any uniarg value; test
	  whether to use that or current point column based on whether
	  there is a uniarg, not on its value.

2005-01-28 00:47  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Allow any column in set-fill-column.

2005-01-27 16:18  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Fix some formatting.

2005-01-27 01:33  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, bind.c, buffer.c, completion.c, extern.h, file.c,
	  funcs.c, getopt_long_only.c, glue.c, keys.c, killring.c, line.c,
	  list.c, list.h, main.c, minibuf.c, point.c, registers.c,
	  search.c, term_allegro.c, term_epocemx.c, term_minibuf.c,
	  term_redisplay.c, term_termcap.c, undo.c, vasprintf.c, zile.h:
	  For simplicity, change unsigned and unsigned long to size_t.

2005-01-27 01:27  Reuben Thomas  <rrt@sc3d.org>

	* src/: astr.c, astr.h, basic.c, bind.c, buffer.c, completion.c,
	  editfns.c, eval.c, extern.h, file.c, funcs.c, glue.c, keys.c,
	  killring.c, line.c, main.c, minibuf.c, parser.c, search.c,
	  term_redisplay.c, undo.c, zile.h: Fix -Wconversion warnings.

	  Make astr_truncate take a pos rather than a size.

	  Fix setting of fill-column.

2005-01-27 00:24  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix -Wconversion warnings.

2005-01-27 00:21  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, line.c, point.c, search.c: Fix -Wconversion
	  warnings in search.c.

2005-01-26 23:58  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_allegro.c, term_epocemx.c, term_termcap.c:
	  Change term_xgetkey's second arg to unsigned to avoid
	  -Wconversion warnings.

2005-01-26 23:54  Reuben Thomas  <rrt@sc3d.org>

	* src/glue.c: Fix -Wconversion warnings in glue.c.

2005-01-26 23:52  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, glue.c, undo.c: Fix -Wconversion warnings in
	  undo.c.

2005-01-26 23:49  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_minibuf.c, zile.h: Fix -Wconversion warnings in
	  term_minibuf.c.

2005-01-26 23:44  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, getopt_long_only.c, list.c, list.h,
	  registers.c, term_allegro.c, term_epocemx.c, term_redisplay.c,
	  term_termcap.c, vasprintf.c, zile.h: Fix -Wconversion warnings in
	  term_redisplay.c, and fix other places that this affects.

	  Change "unsigned int" to "unsigned".

2005-01-26 23:10  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix -Wconversion warnings.

2005-01-26 23:04  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, buffer.c, extern.h, funcs.c, help.c, line.c,
	  term_redisplay.c, variables.c, vars.c, vars.h, zile.h: Add a
	  buffer-local variable list to the Buffer struct, and move the two
	  buffer-local variables (fill-column and tab-width) into it.
	  Remove tab_width and fill_column.

	  Add tab_width to return a "safe" tab width, i.e. at least 1.

	  Add get_variable_bp to get a variable for a particular buffer,
	  get_variable_number to get a variable's value as a number, and
	  get_variable_number_bp.

	  Add variableSetNumber.

	  Reduce the number of calls to read the value of tab-width where
	  this is easy.

	  Make describe-variable get the value for the current buffer for a
	  buffer-local variable.

	  Improve doc strings for newline-and-indent and indent-command.

2005-01-26 21:57  Reuben Thomas  <rrt@sc3d.org>

	* src/: astr.c, astr.h: Fix prototypes to avoid -Wconversion
	  warnings; int -> size_t and char -> int.

2005-01-26 18:46  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix search properly; previous fix was misguided
	  (also fixed in 2.0).

2005-01-26 18:45  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix regex search properly; previous fix was
	  misguided.

2005-01-26 18:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: line.c, tbl_vars.h: Remove case-fold-search, which no
	  longer has a point.

2005-01-26 18:26  Reuben Thomas  <rrt@sc3d.org>

	* src/: search.c, tbl_funcs.h: Remove non-regex search functions.

	  Rebind regex functions to normal non-regex key combinations.

	  As a side effect, replace functions now use regexs (closes
	  #1088402).

2005-01-26 18:24  Reuben Thomas  <rrt@sc3d.org>

	* src/regex.c: Give re_search a proper prototype.

2005-01-26 18:13  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version number to 2.0beta11.

2005-01-26 18:11  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix bug in incremental search (merged from HEAD).

2005-01-26 15:21  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.am: Remove strrstr.c and vasprintf.c from
	  zile_base_SOURCES, as they are detected by AC_REPLACE_FUNCS. Add
	  the files to EXTRA_DIST so they are in the tarball.

	  Add @LIBOBJS@ to zile_LDADD, so that AC_REPLACE_FUNCS works
	  properly.

2005-01-26 15:19  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove now irrelevant todo.

2005-01-26 15:17  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/Makefile.am, src/basic.c, src/file.c,
	  src/help.c, src/main.c, src/rc.c: There are no code changes since
	  2.0beta9.

	  Bump version to 2.0beta10.

	  Remove irrelevant bits from configure.ac as on HEAD.

	  Fix use of vasprintf.c and strrstr.c: don't compile them when
	  they're not needed, but make sure to include both in the
	  distribution.

	  Fix use of AC_REPLACE_FUNCS.

2005-01-26 00:52  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Implement case-fold-search for searching.

2005-01-26 00:27  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Add -Wconversion to the gcc command line.

2005-01-26 00:25  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, line.c, search.c: Use size_t instead of unsigned
	  for string lengths (duh).

	  Use case-fold-search and case-replace to check whether string
	  replacement should follow case.

2005-01-26 00:22  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.h: Make astr_len return a size_t, not an int (much
	  better!).

2005-01-26 00:03  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, funcs.c, line.c, search.c: Make recasing on
	  replace work as in Emacs (only case-replace and case-fold-search
	  are not yet implemented).

	  Add length of replacement string as a parameter to
	  line_replace_text.

2005-01-25 21:37  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Tidy a switch into an if.

2005-01-25 20:45  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_vars.h: Add case-fold-search and case-replace, and
	  improve some of the documentation for other vars.

2005-01-25 20:45  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, marker.c: Make unchain_marker static, since it's
	  used nowhere else and is of dubious utility outside marker.c.

2005-01-25 20:27  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Remove key binding for shrink-window, as there
	  is none by default, and in any case M-s should be for center-line
	  (which doesn't currently exist).

2005-01-25 20:19  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Add support for function keys F1-F12. Closes
	  #1088400.

2005-01-25 20:06  Reuben Thomas  <rrt@sc3d.org>

	* src/eval.c: Add a helper function for binding Zile functions to
	  avoid compiling the same code over and over again.

2005-01-25 20:04  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Reword a comment.

2005-01-25 19:23  Reuben Thomas  <rrt@sc3d.org>

	* src/basic.c: Fix #1109179 (Cursor at EOL doesn't behave as
	  Emacs); fix merged from HEAD.

2005-01-25 19:22  Reuben Thomas  <rrt@sc3d.org>

	* src/basic.c: Fix #1109179 (Cursor at EOL doesn't behave as
	  Emacs).

2005-01-25 18:01  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, funcs.c, glue.c, term_allegro.c, term_epocemx.c,
	  term_termcap.c: Fix key processing (#109179) by unbuffering
	  stdin, and make the key buffer a dynamic string rather than a
	  fixed-size buffer.

	  Rename term_unget to term_ungetkey for consistency.

2005-01-25 17:48  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Set unbuffered stdin, and make key_buf a
	  dynamic string so it can't overflow. Fixes merged from HEAD;
	  fixes #1108630.

2005-01-25 16:48  Reuben Thomas  <rrt@sc3d.org>

	* src/: lisp.c, lists.c: Update dump format to make more readable
	  test output.

2005-01-25 16:47  Reuben Thomas  <rrt@sc3d.org>

	* src/eval.c: Correct eqsign_helper to use == not >=. Duh.

2005-01-25 16:46  Reuben Thomas  <rrt@sc3d.org>

	* src/: test1.output, test2.output, test3.output: Update output
	  (now less verbose).

2005-01-25 16:46  Reuben Thomas  <rrt@sc3d.org>

	* src/test3.el: Remove or update tests that use now-removed
	  functions.

2005-01-25 16:45  Reuben Thomas  <rrt@sc3d.org>

	* src/tests: Add -q to command line so that .zile doesn't affect
	  the output.

2005-01-25 16:02  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/Makefile.am: Add tests to EXTRA_DIST and bump
	  version to 2.1.0.

	  The 2.1 development branch is go!

2005-01-25 12:53  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Add Scott "Jerry" Lawrence, for lithp.

2005-01-25 12:28  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, eval.c, extern.h, funcs.c, killring.c, lists.c,
	  registers.c, tbl_funcs.h: Make calculate_region take two points;
	  rename old calculate_region to calculate_the_region.

	  Make eval-expression insert the result at point when given a
	  prefix arg.

	  Add eval-last-sexp.

	  Make forward_sexp and backward_sexp extern.

	  Make leDumpEval give more minimal output, more in line with Emacs
	  for inserting at point.

2005-01-25 00:54  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, eval.h, parser.c, parser.h: Remove never-used
	  enumeration elements T_NONE and C_NONE

2005-01-25 00:52  Reuben Thomas  <rrt@sc3d.org>

	* src/parser.c: Fix an endless loop on EOF.

	  Format case labels better.

2005-01-25 00:51  Reuben Thomas  <rrt@sc3d.org>

	* src/lisp.c: Fix getc_string and ungetc_string for EOF.

2005-01-25 00:28  Reuben Thomas  <rrt@sc3d.org>

	* src/: parser.c, parser.h: Fix some potential buffer overflows by
	  using dynamic strings instead of static buffers.

	  Make snagAToken static.

2005-01-25 00:27  Reuben Thomas  <rrt@sc3d.org>

	* src/: lists.c, lists.h: Make some char * ptrs into const char *.

2005-01-24 23:13  Reuben Thomas  <rrt@sc3d.org>

	* src/parser.c: Untangle some nonsense code.

2005-01-24 22:50  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, extern.h, lisp.c, main.c, tbl_funcs.h: Implement
	  eval-expression.

	  Stop lisp_read evaluating the expression it reads. Move this
	  functionality to lisp_dump.

	  Fix getc_string for end of string (return EOF).

	  Don't pause before showing first buffer if the splash screen is
	  skipped (fix merged from 2.0 branch).

2005-01-24 22:49  Reuben Thomas  <rrt@sc3d.org>

	* src/lists.c: Add a few spaces.

2005-01-24 22:31  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0beta9.

2005-01-24 22:29  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Don't pause before displaying buffer if the splash
	  screen is skipped.

2005-01-24 14:58  Reuben Thomas  <rrt@sc3d.org>

	* src/minibuf.c: Simplify minibuf_read a little.

2005-01-24 13:56  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, eval.h, lists.c: Make Zile's commands (F_*
	  functions, listed in tbl_funcs.h) available in Lisp. Need really
	  to have only one sort of Lisp function, but neither Zile's nor
	  lithp's form is quite ideal.

	  Add another "indestructible constant", leT (true).

2005-01-23 18:43  Reuben Thomas  <rrt@sc3d.org>

	* src/killring.c: Simplify free_kill_ring: free(NULL) is perfectly
	  OK.

2005-01-23 18:41  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Don't check for limits.h, it's ANSI/ISO, and we
	  assume that.

	  Remove --enable-debug: debugging code should always be compiled
	  in. At the moment there's only one block (in term_termcap.c),
	  which should be changed so it can be switched on (e.g. using a -d
	  command-line flag or somesuch).

2005-01-23 18:39  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, eval.c, file.c, help.c, main.c, zile.h: Remove
	  test for limits.h, it's a standard ISO/ANSI header file.

	  Some code and comment reformatting, including a couple of
	  docstring improvements.

2005-01-23 18:32  Reuben Thomas  <rrt@sc3d.org>

	* src/: regex.c, regex.h: Add regfree back, because we need it, and
	  remove some more junk.

2005-01-23 17:16  Reuben Thomas  <rrt@sc3d.org>

	* src/: regex.c, regex.h: Remove some more unnecessary code.

2005-01-23 17:03  Reuben Thomas  <rrt@sc3d.org>

	* src/: regex.c, regex.h: Remove debugging code from regex.c (it's
	  pretty well debugged, and I don't intend to debug it further!)
	  and remove POSIX functions from regex.c and regex.h, and BSD
	  prototypes from regex.h.

	  The less mess I have to maintain, the better. Removing the POSIX
	  code should also cut down the binary size on EPOC a bit further.

2005-01-23 14:14  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, eval.h, lists.c, lists.h, test3.el: Remove
	  garbage_collect, which was just a stub, and the corresponding
	  eval_cb_nothing.

	  Tidy up eval.c, formatting it like the rest of the Zile code, and
	  tidying up a lot of the code.

	  Make leWipe not free leNIL, and add leReallyWipe, which does free
	  leNIL. Could use this for other constants, but really need a gc.

	  Remove tests of functions that no longer exist from test3.el.

2005-01-23 14:11  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, extern.h, glue.c: Remove ZTRACE and ztrace, which
	  were not really used any more.

	  Move prototypes for zmalloc &c. to a new section in extern.h
	  (zmalloc.c) from glue.c, where the functions used to live.

2005-01-23 14:09  Reuben Thomas  <rrt@sc3d.org>

	* src/variables.c: Remove some pointless debugging code.

2005-01-23 14:00  Reuben Thomas  <rrt@sc3d.org>

	* doc/: Makefile.am, lisp.txt: Add basic lisp documentation, based
	  on lithp's README.

2005-01-23 13:48  Reuben Thomas  <rrt@sc3d.org>

	* doc/TUTORIAL: Minor fix.

2005-01-23 13:48  Reuben Thomas  <rrt@sc3d.org>

	* README: Mention POSIX better.

2005-01-23 13:47  Reuben Thomas  <rrt@sc3d.org>

	* README: Mention POSIX.

2005-01-23 13:46  Reuben Thomas  <rrt@sc3d.org>

	* doc/TUTORIAL: Make a minor improvement.

2005-01-23 13:44  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Copy FAQ from CVS HEAD (so far, it fits 2.0).

2005-01-23 13:43  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: More minor tidying up.

2005-01-23 13:40  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Improve the FAQ.

2005-01-23 00:25  Reuben Thomas  <rrt@sc3d.org>

	* src/eval.c: Reformat some code.

	  Remove a potential buffer overflow in evalCastIntToLe.

2005-01-23 00:23  Reuben Thomas  <rrt@sc3d.org>

	* src/.cvsignore: Remove htable.

2005-01-22 18:31  Reuben Thomas  <rrt@sc3d.org>

	* src/eval.h: Remove a couple of excess spaces.

2005-01-22 18:28  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, lisp.c: Make arguments of lisp_read_file and
	  lisp_read_string const char *.

	  Remove rc.c prototypes from extern.h.

2005-01-22 18:26  Reuben Thomas  <rrt@sc3d.org>

	* src/: eval.c, eval.h: Remove 1+, 1-, enum, select and terpri:
	  functions that are either rarely used or do not exist in Emacs
	  Lisp.

2005-01-22 17:48  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Fix a typo that stops the code compiling.

2005-01-22 13:13  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, funcs.c, main.c, rc.c: Remove rc.c, and fold
	  read_rc_file into main.

	  Tidy some comments in funcs.c.

2005-01-22 13:09  Reuben Thomas  <rrt@sc3d.org>

	* doc/: .cvsignore, zile.texi: Change mentions of zilerc.texi to
	  dotzile.texi.

2005-01-22 12:31  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ, doc/Makefile.am, doc/dotzile.sample, doc/zile.texi,
	  doc/zilerc.sample, src/extern.h, src/lisp.c, src/main.c,
	  src/rc.c, src/variables.c: Remove list-variables (FAQ and
	  zilerc.texi).

	  Replace .zilerc with .zile (just like .emacs).

	  Update documentation for initialization file.

	  Remove free_variables (just call variableFree(mainVarList)).

	  In lisp_read, don't allocate and destroy the Lisp state; move
	  this code to main instead.

2005-01-22 11:30  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, htable.c, htable.h: Remove htable, as it's no
	  longer used (was only used by variable implementation).

2005-01-22 11:27  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, tbl_funcs.h, variables.c: Store the variables in
	  a Lisp list.

	  Remove list-variables: doesn't exist in Emacs.

	  Remove unset_variable: no longer needed.

2005-01-22 11:24  Reuben Thomas  <rrt@sc3d.org>

	* src/vars.c: In variableDump, don't need to check that the name of
	  the variable is non-NULL.

2005-01-22 01:06  Reuben Thomas  <rrt@sc3d.org>

	* src/vars.c: Make variableGetString return NIL rather than -1 if
	  the variable is undefined. This should avoid some problems,
	  causing errors sooner rather than later.

2005-01-22 01:04  Reuben Thomas  <rrt@sc3d.org>

	* src/lists.c: Make output of leDump and leDumpEvalTree slightly
	  neater (omit excess spaces).

2005-01-22 01:03  Reuben Thomas  <rrt@sc3d.org>

	* doc/mkdoc.c: Reformat code.

	  Fix a preprocessor typo.

2005-01-22 01:00  Reuben Thomas  <rrt@sc3d.org>

	* doc/: Makefile.am, mkdoc.c: Fix mkdoc's dependencies: mkdoc.o
	  rather than mkdoc itself should depend on the various sources.

	  Remove mkdoc's dependence on getopt (which might not exist on
	  some platforms) and remove its command-line options and usage
	  message, which aren't needed, as it's only used by the build
	  system.

2005-01-22 00:13  Reuben Thomas  <rrt@sc3d.org>

	* src/vars.c: Change variableGetString not to strdup its return
	  value. Since it's not called anywhere (yet) this is fine.

2005-01-22 00:10  Reuben Thomas  <rrt@sc3d.org>

	* src/lists.c: A little reformatting.

2005-01-21 23:51  Reuben Thomas  <rrt@sc3d.org>

	* src/parser.c: Don't allow # comments.

	  Reformat code to match rest of Zile code.

	  Do some trivial tidying.

2005-01-21 23:40  Reuben Thomas  <rrt@sc3d.org>

	* src/test1.el: Remove trailing blank line.

2005-01-21 23:40  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.am: Remove outdated mentions of alist.

2005-01-21 23:37  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, tests: Make Lisp tests get counted properly by
	  make check.

2005-01-21 23:33  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Simplify adjust_markers a little further, and rename
	  the parameters to clarify the code.

2005-01-21 23:25  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, funcs.c, line.c, marker.c, zile.h: Simplify
	  marker adjusting code in line.c to just adjust_markers.

	  Remove Marker.type (don't need it any more).

2005-01-21 23:12  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Apply patch from Nicolas Duboc to use va_copy.

2005-01-21 23:10  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Reformat code to match the rest of the zile
	  code.

	  Use va_copy (patch from Nicolas Duboc). (Patch also made to 2.0
	  branch)

	  Fix a typo concerning the 'c' format (which is not currently used
	  by zile).

2005-01-20 21:24  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_termcap.c: Fix overrun of terminal buffers
	  in term_addch, and change some ints to unsigned to make such
	  overruns less likely.

2005-01-20 21:23  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Fix splash screen on small terminals.

2005-01-20 21:22  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_redisplay.c, term_termcap.c: Fix splash screen on
	  small displays.

	  Don't allow buffer overrun in term_addch.

2005-01-20 16:55  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Simplify intercalate_newline and insert_newline,
	  implementing the latter in terms of the former rather than using
	  common_insert_newline and a flag. Hence, simplify
	  adjust_markers_for_addline.

	  Tidy up some other code a little.

2005-01-19 23:58  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0beta8.

2005-01-19 23:58  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix GETKEY_NONFILTERED mode in xgetkey (fix
	  merged from cvs HEAD).

2005-01-19 18:45  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix unfiltered mode in xgetkey.

2005-01-19 18:43  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Don't treat ^M specially in quoted-insert. Emacs
	  doesn't.

2005-01-19 01:24  Reuben Thomas  <rrt@sc3d.org>

	* src/: .cvsignore, Makefile.am, test1.el, test1.output, test2.el,
	  test2.output, test3.el, test3.output, tests: Add Lisp tests.
	  These do not seem to be counted in the test suite pass/fail count
	  yet, but they are correctly run by make check.

2005-01-19 01:23  Reuben Thomas  <rrt@sc3d.org>

	* src/eval.c: Reformat evaluateBranch.

2005-01-19 01:21  Reuben Thomas  <rrt@sc3d.org>

	* src/lists.c: Fix a dodgy leWipe call: don't try to leWipe NULL or
	  leNIL.

2005-01-19 01:20  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Make --eval and --load take an argument.

2005-01-19 00:40  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, eval.c, eval.h, extern.h, line.c, lisp.c,
	  lists.c, lithp.c, main.c, parser.c, vars.c, vars.h, zile.h:
	  Rename lithp.c to lisp.c.

	  Rename lithp to lisp_read_file, and add lisp_read_string and
	  generic lisp_read.

	  Implement --batch, --eval and --load.

	  When using --load or --eval in non-batch mode, insert the results
	  into the scratch buffer instead of the default scratch message.

	  Fix some space leaks in lisp_read and in the Lisp interpreter
	  itself.

	  Reformat some more of the Lisp code (mostly excess spaces).

2005-01-19 00:37  Reuben Thomas  <rrt@sc3d.org>

	* src/: astr.c, astr.h: Add astr_cat_delete.

2005-01-18 22:49  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Calling term_resume in term_init was a
	  mistake, as it can't call the sigwinch handler! Oops...

2005-01-18 22:45  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Make term_suspend reset the terminal and
	  term_resume set it up again.	Call term_suspend and term_resume
	  in term_init and term_close.

2005-01-18 22:44  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Reformat a comment.

2005-01-18 21:55  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_redisplay.c: Make minibuffer welcome message
	  be displayed when splash screen is too (fix ported from 2.0
	  branch).

	  Don't mention F1 in splash screen, because it doesn't work on all
	  platforms (not even termcap at the moment).

2005-01-18 21:19  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove switch-to-correlated-buffer docs, as the
	  function no longer exists.

	  Other minor fixes.

2005-01-18 21:16  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Change getopt handling to detect getopt_long_only
	  and use AC_REPLACE_FUNCS. Assume that if it exists, getopt.h must
	  too (otherwise we're stuffed anyway).

2005-01-18 20:57  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Don't mention function keys in the splash screen, as
	  they don't work in some back-ends.

2005-01-18 20:53  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove switch-to-correlated-buffer, which no
	  longer exists.

	  Remove references to function keys, which currently don't work in
	  termcap (the most common back-end).

	  Other small fixes.

2005-01-18 20:41  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_redisplay.c: Fix minibuffer welcome message
	  when splash screen shown.

2005-01-18 19:10  Reuben Thomas  <rrt@sc3d.org>

	* src/: funcs.c, main.c: Fix SIGTSTP/SIGCONT handling so zile can
	  work as child editor for mutt or pine, using code from nano 1.2.4
	  (which seems to have come from other places). Thanks everyone who
	  wrote it!

	  Fix also applied to 2.0 branch.

2005-01-18 12:25  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_allegro.c, term_epocemx.c, term_redisplay.c,
	  term_termcap.c: Move term_addnstr to term_redisplay, as it's
	  generic.

	  Add default (empty!) implementations of term_suspend and
	  term_resume to the other terminal types.

2005-01-18 12:06  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_allegro.c, term_epocemx.c, term_redisplay.c,
	  term_termcap.c: Move term_printw to term_redisplay, because it's
	  generic.

	  Add term_suspend and term_resume (incomplete) to term_termcap.c.

2005-01-18 00:33  Reuben Thomas  <rrt@sc3d.org>

	* src/: funcs.c, main.c: Adapted code from nano 1.2.4 to fix
	  suspend/resume when Zile is used e.g. under pine or mutt.

2005-01-17 23:07  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: Remove unused font codes (ZA_* symbols).

2005-01-17 22:57  Reuben Thomas  <rrt@sc3d.org>

	* src/getopt_long_only.c: Cut some more code we don't need.

2005-01-17 22:43  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, getopt.c, getopt.h, getopt1.c,
	  getopt_long_only.c, main.c: Use getopt_long_only instead of
	  getopt_long for better Emacs compatibility (i.e. long options can
	  start with a single dash).

	  Rejig the getopt code again (remove lots more non-ANSI stuff) and
	  use AC_REPLACE_FUNCS to import getopt_long_only.c. Assume that if
	  we have this function then we have getopt.h.

2005-01-17 18:15  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_termcap.c, zile.h, term_epocemx.c: Remove ZILE_BOLD,
	  which is no longer used.

2005-01-17 18:09  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, file.c, funcs.c, window.c: Fix auto-fill-mode so
	  it applies to all buffers, not just the scratch buffer. Fix
	  already applied to 2.0.

	  Use ^ instead of & and | to toggle flags.

	  Fix formatting of a docstring.

	  Move cancel in funcs.c to directly before keyboard_quit (more
	  logical).

2005-01-17 18:02  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, file.c, funcs.c, window.c: Fix auto-fill-mode so
	  it applies to all new buffers, not just the first.

2005-01-17 17:58  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Bump copyright year for Reuben Thomas to 2005.

2005-01-17 17:55  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump the version to 2.0beta7.

2005-01-17 01:09  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: #include <getopt.h> if we have it and "getopt.h"
	  otherwise.

2005-01-17 01:09  Reuben Thomas  <rrt@sc3d.org>

	* src/extern.h: Explain the missing functions better.

	  #include <stdarg.h> for the (v)asprintf prototypes.

2005-01-17 01:08  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, getopt.c, getopt.h, getopt1.c: Add GNU getopt
	  for getopt_long where necessary.

2005-01-17 01:07  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Add check for getopt.h. This is sufficient, since
	  getopt.c and getopt1.c are always compiled, and only generate
	  code if glibc is not installed.

	  Add fchown and fchmod to AC_CHECK_FUNCS, where they should be.
	  (They were previously in AC_REPLACE_FUNCS, which was wrong, and
	  were then removed, which was also wrong.)

2005-01-17 00:54  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Remove AC_CONFIG_SRCDIR (no longer used by
	  autoconf, it seems), and AC_C_INLINE and AC_PROG_RANLIB (we don't
	  need them).

2005-01-17 00:44  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Remove unnecessary code, mainly features that are
	  either ANSI (and which we hence assume) or are no longer used.

2005-01-17 00:28  Reuben Thomas  <rrt@sc3d.org>

	* src/lists.c: Fix a couple of bugs in dumping sexps.

2005-01-17 00:28  Reuben Thomas  <rrt@sc3d.org>

	* src/lithp.c: Clean up code that dumps the result of running the
	  loaded sexps.

2005-01-17 00:26  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Remove strerror and strstr from AC_CHECK_FUNCS
	  call, because these are standard ANSI C functions.

	  Remove xmalloc, xrealloc and xstrdup from AC_REPLACE_FUNCS call,
	  because we don't use them any more.

	  Remove fchown and fchmod from the AC_REPLACE_FUNCS call, because
	  we have no alternative implementations of them!

2005-01-16 20:59  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Change list-bindings binding to C-h b, as in
	  Emacs. Thanks for Jari Aalto for reporting this bug.

2005-01-16 20:57  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Rebind list-bindings to C-h b, as in Emacs.
	  Thanks to Jari Aalto for reporting this bug.

2005-01-16 20:56  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0beta6.

2005-01-16 13:31  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Fix splash screen to display for a
	  reasonable length of time.

2005-01-16 13:07  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, buffer.c, extern.h, file.c, glue.c, minibuf.c,
	  rc.c, search.c, variables.c, zile.h: Add a delay argument to
	  waitkey, and have a default, WAITKEY_DEFAULT, current 2s.

2005-01-16 13:06  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Get rid of formatting code in
	  show_splash_screen; the string no longer contains formatting.
	  After showing the string, call waitkey(20 * 10) to make sure the
	  message stays up long enough to be read.

2005-01-16 13:04  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_allegro.c, term_epocemx.c, term_termcap.c: Allow
	  KBD_NOKEY to be passed to term_unget, and ignore it.

2005-01-16 13:04  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Common up the various startup strings; because of
	  this, the splash screen no longer has special formatting
	  characters.

	  Don't show splash screen if -l is used.

2005-01-15 00:34  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Add long options, and rework options to be more
	  similar to Emacs.

	  Remove -u, which didn't work like Emacs's; its functionality is
	  replaced by -l.

	  Rename previous -e to -l.

	  Make --version and --help messages similar to Emacs's.

2005-01-15 00:32  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, rc.c: Remove option allowing a named init file;
	  it's replaced by --load, which allows any Lisp file to be loaded,
	  and -q, which stops ~/.zile being loaded.

2005-01-14 23:46  Reuben Thomas  <rrt@sc3d.org>

	* src/: lists.c, lists.h, lithp.c, vars.c, vars.h: Make dumping
	  functions return an astr.

	  Tidy up the code to conform to formatting in the rest of Zile.

2005-01-14 23:45  Reuben Thomas  <rrt@sc3d.org>

	* src/eval.c: Tidy up some code, especially removing pointless
	  "consts" from int function arguments, and concentrating on the
	  printing functions.

2005-01-14 23:43  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Execute any -e file before setting up the terminal,
	  so its output is legible.

2005-01-14 22:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, buffer.c, killring.c, line.c, point.c, search.c,
	  term_allegro.c, window.c: Reformat some ?: operators for
	  consistency.

2005-01-14 22:31  Reuben Thomas  <rrt@sc3d.org>

	* src/lists.c: Reformat code for consistency.

2005-01-14 17:22  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, funcs.c: Remove do_completion's second
	  argument, which wasn't used for anything.

2005-01-14 17:15  Reuben Thomas  <rrt@sc3d.org>

	* src/: completion.c, extern.h, file.c, minibuf.c: Remove return
	  argument from agetcwd and get_current_dir and make them allocate
	  the returned value instead.

2005-01-14 16:56  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, file.c, help.c, main.c, rc.c: Remove
	  sanity_checks from main.c and replace it with an intelligent
	  get_home_dir in file.c.

	  A first, very dumb, implementation of -e in main.c (it should
	  really be called -l, and will be).

2005-01-14 01:09  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Replace "fatal error:" with "zile:" in fatal error
	  messages for consistency with other errors.

2005-01-14 01:03  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Rewrite popup_completion in terms of
	  write_temp_buffer.

2005-01-14 00:43  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Reformat some comments and remove a tautological
	  assert.

2005-01-14 00:43  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix removing contents of buffer in
	  write_temp_buffer, copying fix from popup_completion. Need to do
	  more refactoring in this area.

2005-01-13 07:45  Reuben Thomas  <rrt@sc3d.org>

	* src/: lists.c, eval.c, eval.h, lists.h, lithp.c, parser.c,
	  parser.h, vars.c, vars.h: Add copyright notices.

2005-01-13 07:34  Reuben Thomas  <rrt@sc3d.org>

	* doc/: Makefile.am, zile.texi: Make mkdoc depend on tbl_funcs.h
	  and tbl_vars.h.

2005-01-13 07:32  Reuben Thomas  <rrt@sc3d.org>

	* src/window.c: Add some assertions to window_pt.

2005-01-13 07:31  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Tidy a comment.

2005-01-13 07:31  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Put view-zile-FAQ in alphabetical order.

2005-01-13 00:16  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, buffer.c, completion.c, extern.h, file.c, funcs.c,
	  minibuf.c, tbl_vars.h, variables.c, window.c: Rename new_*
	  functions to *_new for consistency.

	  Remove window_new from extern.h and make it static as it isn't
	  used outside window.c.

	  Put auto-fill-mode in alphabetical order in tbl_vars.h.

	  Other minor tidy-up, especially of comments.

2005-01-12 23:26  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix a couple of bugs in transient_mark_mode (fixes
	  also applied to 2.0).

	  Tidy up transient_mark_mode and universal_argument.

2005-01-12 23:22  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix a couple of bugs in transient_mark_mode.

2005-01-12 13:01  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: In suspend_zile, handle the terminal better before
	  and after suspension (fix also made to CVS head).

2005-01-12 12:53  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, funcs.c, main.c, term_redisplay.c: Factor
	  term_tidy out of main, to tidy up the terminal before leaving
	  Zile, and use it in suspend_zile (which already existed, duh) to
	  clear up the screen before suspending. Also fix suspend_zile to
	  redraw the screen on restarting. A version of this fix will also
	  be applied to the 2.0 branch.

2005-01-12 12:47  Reuben Thomas  <rrt@sc3d.org>

	* src/regex.c: Remove more (for us) dead code.

2005-01-12 10:55  Reuben Thomas  <rrt@sc3d.org>

	* src/: help.c, main.c, tbl_funcs.h: Rename help-faq to
	  view-zile-FAQ and help-tutorial to help-with-tutorial for
	  consistency with Emacs.

2005-01-12 10:39  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Remove command-line parsing code for deleted flags -f
	  and -v, and add code for -e (evaluate Lisp expression).

	  Update usage message to correspond.

2005-01-12 01:47  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, eval.c, eval.h, extern.h, lists.c, lists.h,
	  lithp.c, parser.c, parser.h, vars.c, vars.h: Add a lisp
	  interpreter, code taken from lithp 0.6
	  (http://www.cis.rit.edu/~jerry/Software/lithp/).

	  Since the original was written with noweb, I've tangled the code,
	  stripped out the #line directives, and reformatted it.

	  I've also done something a bit naughty: I've fixed up most of the
	  gcc warnings, and done a little tidying to make that work, hence
	  the code is not quite the same as lithp 0.6. I'm checking it in
	  now before I really start changing stuff.

	  At the moment the code is simply compiled into Zile, but not
	  called anywhere.

	  Justification: having a Lisp interpreter will simplify and unify
	  a lot of things. First, it will handle the .zilerc file (and
	  hence get rid of rc.c and a lot of variables.c). Secondly, it
	  will simplify adding key rebinding. Thirdly, it's entirely in
	  line with Emacs emulation. It will similarly simplify the
	  handling of macros, and allow Zile to be extended at last by the
	  user. Fourthly, it will help implement key maps, which are needed
	  to remove horrible code duplication in the minibuffer code.
	  Finally, some of the current C code will be rewritten in Lisp,
	  and it will hence improve stability (as Lisp code won't crash,
	  right?!).

	  I will try very hard to reduce the binary size to at most the
	  same as it was before I added the interpreter, which is only
	  2,000 lines of code. It adds about 50Kb to the unstrippped
	  binary; I have already removed nearly 20Kb since the current 2.0
	  beta, so that leaves another 30Kb to remove. I'll try to do the
	  same in the source code, but that's less important (and less
	  likely). Anyway, Zile should get no more complex than it is at
	  present until some other major feature is added (the only one
	  planned is Unicode support).

	  I have yet to put in proper copyright notices in the files from
	  lithp and proper acknowledgement for this major contribution in
	  the docs.  The lithp code will also doubtless be heavily modified
	  (and reduced!).

2005-01-12 01:02  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/main.c: Update my copyright dates to 2005.

2005-01-12 00:48  Reuben Thomas  <rrt@sc3d.org>

	* src/: regex.c, regex.h: Remove #ifdef emacs blocks from regex.c.

	  Remove emacs local var settings from regex.h.

2005-01-12 00:43  Reuben Thomas  <rrt@sc3d.org>

	* doc/.cvsignore, src/.cvsignore: Move man page to doc.

2005-01-12 00:43  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am, doc/zile.1.in, src/Makefile.am, src/zile.1.in:
	  Move the man page into the doc directory.

2005-01-12 00:38  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.1.in: Remove keystrokes from man page. Here is not the
	  place for them, and it's yet another duplicate source of
	  information to go wrong.

2005-01-12 00:28  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, extern.h, funcs.c: Remove zap_buffer_content
	  (it's only a couple of lines, only called once, and is really an
	  ill-advised factorisation).

2005-01-12 00:27  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Remove debugging left in by mistake.

2005-01-12 00:16  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, completion.c, extern.h, file.c, line.c,
	  term_minibuf.c, term_redisplay.c: Simplify zap_buffer_content
	  massively.

	  Remove the unused argument from completion_scroll_{up,down}.

	  Improve error messages in new_buffer.

	  Fix // expansion in expand_path (thanks, Nicolas Duboc for
	  reporting the problem, which is also fixed in 2.0).

	  Remove redundant memset from new_buffer.

2005-01-11 23:13  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: Give an error if the screen mode cannot be
	  set.

2005-01-11 23:10  Reuben Thomas  <rrt@sc3d.org>

	* src/basic.c: Simplify scroll_down and scroll_up.

2005-01-11 23:02  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c, src/tbl_funcs.h, doc/TUTORIAL: Remove sentence
	  command stubs and references to the commands in the tutorial.
	  Implementing them is still in the wish list, but when it happens
	  it will almost certainly not be in C, but Lisp.

2005-01-11 22:34  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Bump copyright year and tidy a couple of comments.

2005-01-11 22:33  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: In term_addch, and the character being added
	  with 0xff to cope with top-bit-set characters when char is
	  signed.

2005-01-11 22:29  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Call setlocale, to deal with non-C locales. Works
	  best with 8-bit locales.

2005-01-11 22:22  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump to 2.0beta5.

2005-01-11 18:05  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix for filename expansion: // means "restart from
	  /". Thanks to Nicolas Duboc for noticing this bug. Fix also
	  applied to head.

2005-01-11 17:41  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_termcap.c: Fixes for non-C locales: call
	  setlocale in main, and in term_addch truncate the character added
	  to 8 bits (copes with systems where char is signed).

2005-01-11 00:09  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Tidy a little.

2005-01-11 00:07  Reuben Thomas  <rrt@sc3d.org>

	* src/list.c: Fix size passed to malloc calls (bug introduced as a
	  result of changing list to be struct list_s * rather than the
	  struct itself).

2005-01-10 15:01  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, extern.h, line.c, zile.h: Get rid of new_line and
	  free_line (these don't really work sensibly with lists, as it
	  Depends What You Want To Do.

2005-01-10 14:09  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, buffer.c, editfns.c, extern.h, file.c, funcs.c,
	  glue.c, killring.c, line.c, main.c, point.c, search.c,
	  term_redisplay.c, zile.h: Use list API instead of ->next and
	  ->prev. Sometimes the API calls are used as lvalues, which is
	  evil, but it's better than it was.

2005-01-10 09:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: list.c, strrstr.c: Clarify empty for loops.

2005-01-10 01:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, buffer.c, editfns.c, file.c, funcs.c, glue.c,
	  htable.c, killring.c, line.c, point.c, search.c,
	  term_redisplay.c, undo.c: Use new Line struct, which is just a
	  typedef for list_s.

	  Rename the limitp member of Buffer to lines.

2005-01-10 01:30  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Change Line to a list_s, so that the list API can be
	  used on Line objects.

2005-01-10 01:29  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.h: Cast arguments to macros to astr, to allow void *
	  args, e.g. list items.

2005-01-10 00:24  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, agetcwd.c, agetcwd.h, completion.c, extern.h,
	  file.c, minibuf.c: Move agetcwd into file.c and the prototype
	  into extern.h (this is a Zile function, not a reimplementation of
	  a standard function).

2005-01-10 00:24  Reuben Thomas  <rrt@sc3d.org>

	* src/: list.c, list.h: Add license to top of file.

2005-01-09 23:56  Reuben Thomas  <rrt@sc3d.org>

	* src/: agetcwd.c, astr.c, astr.h, basic.c, bind.c, buffer.c,
	  completion.c, editfns.c, file.c, funcs.c, glue.c, help.c,
	  history.c, htable.c, htable.h, keys.c, killring.c, line.c,
	  macro.c, main.c, marker.c, minibuf.c, point.c, rc.c, redisplay.c,
	  registers.c, search.c, strrstr.c, term_allegro.c, term_epocemx.c,
	  term_minibuf.c, term_redisplay.c, term_termcap.c, undo.c,
	  variables.c, vector.c, vector.h, window.c, zile.h, zmalloc.c:
	  Since I currently seem to be the only person contributing code to
	  Zile, it seems reasonable to have the code formatted as I like
	  it.  Hence, reformat to 2-space columns rather than 8-space.
	  Ah...that's better!

2005-01-09 18:23  Reuben Thomas  <rrt@sc3d.org>

	* src/: agetcwd.c, main.c, zile.h: Move definition of PATH_MAX into
	  zile.h. Now we're sure that PATH_MAX will always be defined,
	  there's no need to check in main.c.

2005-01-09 18:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, basic.c, editfns.c, editfns.h, extern.h,
	  funcs.c, killring.c, line.c, marker.c, search.c: Fold editfns.h
	  into extern.h. It might be nice to have a more modular structure,
	  but we don't, so might as well keep things simple.

2005-01-09 18:11  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, alist.c, alist.h, bind.c, completion.c,
	  editfns.c, file.c, funcs.c, history.c, htable.c, htable.h,
	  list.c, list.h, minibuf.c, variables.c, zile.h: Replace the list
	  implementation. The new implementation is mine, and although its
	  publically released form (rrtlib) is unstable, this particular
	  library is small and has been used several times in different
	  projects and can be considered mature.

	  The new implmentation is better because:

	  1. It is smaller and simpler.  2. The new lists are stateless (do
	  not store a position during list    traversal).  3. The new list
	  type can replace Line (they're basically the same    type).  3.
	  The new lists are manipulated entirely via the API, so that in
	  particular the next and prev links won't be corrupted by sloppy
	   programming, and check_list in main is made redundant (once the
	    list type has been used to replace Line).

	  Remove spurious vsprintf from minibuf_format (which just repeated
	  the work of the preceding vasprintf).

	  Factor most of minibuf_write and minibuf_error into
	  minibuf_vwrite; this also fixes the bug that minibuf_error now
	  refreshes the terminal.

	  Remove redundant term_refresh calls after minibuf_write and
	  minibuf_error, which already call it.

2005-01-09 17:47  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Change version number to 2.1CVS. (The 2.0 branch
	  has now been split off.)

2005-01-09 17:45  Reuben Thomas  <rrt@sc3d.org>

	* src/minibuf.c: Fix minibuf_error to refresh the terminal.
	  (Different fix already applied to head.)

2005-01-09 00:19  Reuben Thomas  <rrt@sc3d.org>

	* src/keys.c: Add #include of ctype.h for isgraph.

2005-01-09 00:18  Reuben Thomas  <rrt@sc3d.org>

	* src/keys.c: Fix chordtostr to deal better with non-printing
	  characters.

2005-01-08 23:20  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/main.c: Remove -f and -v command-line flags.
	  They're rarely useful and will eventually be replaced with --eval
	  (when we have a Lisp interpreter).

2005-01-08 22:41  Reuben Thomas  <rrt@sc3d.org>

	* src/history.c: Fix some bad spacing.

2005-01-06 22:33  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump to 2.0beta4.

2005-01-05 22:52  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_epocemx.c, term_termcap.c: Fix a bug in term_refresh
	  which led to far too many cursor updates, making screen refresh
	  very slow on slow links and slow machines.

2005-01-03 12:29  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, astr.c: Fix astr_fgets test for VPATH builds.

2005-01-03 12:10  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.c: Make astr_fgets use astr.c rather than stdin so that
	  test runs fully automatically.

2005-01-03 12:09  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.am: Remove obsolete INCLUDES line.

2005-01-03 11:39  Reuben Thomas  <rrt@sc3d.org>

	* doc/: config.h, mkdoc.c: Get rid of warnings while compiling
	  mkdoc.

2005-01-03 11:11  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Use $(top_srcdir) so that VPATH builds work
	  (specifically for make distcheck).

2005-01-03 11:07  Reuben Thomas  <rrt@sc3d.org>

	* src/vasprintf.c: Correct spelling in a comment.

2005-01-03 11:06  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Remove reference to lib/, which no longer exists.

2005-01-03 03:43  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Add dummy config.h to dist.

2005-01-03 03:40  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0beta3.

2005-01-03 03:39  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: Add mkdoc.c to the distribution, which had been
	  left out. Thanks to Cort Danger Stratton for the report.

2005-01-03 00:48  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump to 2.0beta2.

2005-01-03 00:46  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.c: Fix astr_cpy_x to NUL-terminate the result.

2005-01-03 00:45  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix indent_relative. Again. Oops.

2005-01-03 00:44  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Simplify some unncecessarily complicated astr
	  calls.

2005-01-03 00:38  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Update to 2.0beta1.

2005-01-01 02:06  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Simplify dist-epoc target and ensure zile.zip is
	  always remade.

2005-01-01 02:03  Reuben Thomas  <rrt@sc3d.org>

	* zile.lnk, zile.pkg: Swap link and exe in EPOC package (they don't
	  work the other way around).

2005-01-01 01:25  Reuben Thomas  <rrt@sc3d.org>

	* zile.lnk, zile.pkg: Move zile.exe into emx\bin on EPOC, and add a
	  link from C:\ for easy access from the System screen. Add the
	  link to the PKG file.

2004-12-31 16:52  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix indent_relative to deal with tabs properly so we
	  don't overshoot.

2004-12-31 00:30  Reuben Thomas  <rrt@sc3d.org>

	* src/astr.c: Copy strings using memcpy not strcpy or strncpy, so
	  it works with embedded NULs. This fixes #1091669.

2004-12-27 13:25  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Turn off undo while adding message to scratch buffer
	  so that it is not stored in the undo history.

2004-12-27 01:10  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, undo.c, zile.h: Rewrite the undo code to behave
	  more like Emacs: record all buffer states that are unchanged, and
	  reset them when the buffer is saved.

2004-12-26 20:27  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Replace point at initial position at end of
	  fill_paragraph. Use a marker. Duh. (I didn't know about markers
	  before.)

2004-12-24 13:53  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Rewrite fill-paragraph. The new implementation is
	  simpler and seems more robust than the old, but currently leaves
	  point at the end of the paragraph.

2004-12-24 13:52  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix a read of uninitialised memory found by valgrind.

2004-12-24 13:51  Reuben Thomas  <rrt@sc3d.org>

	* THANKS: Tidy up slightly.

2004-12-21 00:37  Reuben Thomas  <rrt@sc3d.org>

	* README: Tidy up the README some more.

2004-12-21 00:30  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore, zile.pkg: Improve EPOC packaging: add emxuser.sis to
	  the SIS. Add the files thus used to .cvsignore.

2004-12-21 00:21  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Build a zip file for EPOC with a Readme.txt (just a
	  copy of README).

2004-12-21 00:16  Reuben Thomas  <rrt@sc3d.org>

	* README: Tidy slightly and add minimal installation instructions
	  for EPOC, so this file can be used as the Readme.txt in the EPOC
	  zip distribution.

2004-12-21 00:13  Reuben Thomas  <rrt@sc3d.org>

	* acinclude.m4: Add a credit to Richard Smith.

2004-12-20 23:45  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump to 2.0alpha5.

2004-12-20 18:51  Reuben Thomas  <rrt@sc3d.org>

	* THANKS, doc/config.h, src/buffer.c, src/file.c: Fix a bug where a
	  buffer could end up without a line ending setting.

	  Acknowledge Richard Smith's help with cross-compiling.

2004-12-20 18:23  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am, doc/config.h, doc/mkdoc.c, src/extern.h,
	  src/strrstr.c: Add an empty config.h so that the config.h (for
	  the host platform) doesn't interfere with building mkdoc (for the
	  build platform).

	  Fix some little problems revealed by not having any HAVE_* macros
	  defined.

2004-12-20 18:14  Reuben Thomas  <rrt@sc3d.org>

	* doc/: Makefile.am, mkdoc.c: First cut of building mkdoc when
	  cross-compiling. At the moment it still uses config.h, which is
	  BAD.

2004-12-20 17:27  Reuben Thomas  <rrt@sc3d.org>

	* acinclude.m4, configure.ac: Add support for getting the build
	  system compiler, so we can support building mkdoc when
	  cross-compiling.

	  Provided by Richard Smith from binutils code.

2004-12-20 13:56  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version for 2.0alpha4 release.

2004-12-20 13:55  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, TODO: Remove TODO, and place all the TODO items in
	  the feature request tracker.

2004-12-20 13:53  Reuben Thomas  <rrt@sc3d.org>

	* doc/FAQ: Answer the question about how to display non-English
	  characters.

2004-12-20 13:27  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: A little bit of defensive programming: ensure
	  that the signal number passed to the SIGWINCH handler is indeed
	  SIGWINCH.

2004-12-20 13:17  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, completion.c, extern.h, minibuf.c, term_minibuf.c:
	  Add a flag to completion_try, popup_when_complete that signals if
	  we want the *Completions* window even when the string supplied is
	  already complete (i.e. when it is both a completion and a prefix
	  of some other completion(s)). We want to pop up the completions
	  list in this case only when completions were expressly requested
	  by pressing TAB.

	  In fact completion_try should really be factored into two
	  functions, one of which deals with the screen and the other of
	  which looks for completions.

2004-12-20 12:48  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, completion.c, extern.h, minibuf.c, term_minibuf.c,
	  zile.h: Get rid of action functions for completions; at the
	  moment we only have one (the default action), and frankly YAGNI.

2004-12-20 11:15  Reuben Thomas  <rrt@sc3d.org>

	* src/: help.c, minibuf.c, search.c: Make minibuf_write update the
	  screen (this won't slow things down much and avoids having to
	  remember to call it).

	  This fixes an unreported bug where describe-key would not display
	  "Which key:" correctly.

2004-12-19 00:49  Reuben Thomas  <rrt@sc3d.org>

	* zile.pkg: Fix paths to docs.

2004-12-19 00:43  Reuben Thomas  <rrt@sc3d.org>

	* doc/Makefile.am: zilerc.texi should not be installed as an info
	  file, because a) it's not an info file and b) its content is
	  included in zile.info.

2004-12-19 00:17  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Correct the pattern for tarballs.

2004-12-19 00:10  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am: Add THANKS.

2004-12-19 00:10  Reuben Thomas  <rrt@sc3d.org>

	* AUTHORS, THANKS: Put the acknowledgements, more correctly and
	  logically, in THANKS.

2004-12-19 00:09  Reuben Thomas  <rrt@sc3d.org>

	* AUTHORS: Add some acknowledgements for the EPOC port.

2004-12-18 23:28  Reuben Thomas  <rrt@sc3d.org>

	* AUTHORS: Sort the authors in the same order as everywhere else.

2004-12-18 23:28  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore, Makefile.am, zile.pkg, doc/BANNER.EPOC: First cut of
	  "make dist-epoc". Currently this just makes the SIS. It should
	  make a versioned zip containing a README.

2004-12-18 23:10  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, zile.lsm, doc/FAQ: Remove zile.lsm and mentions of
	  sunsite. I can't be bothered to spend time putting zile on
	  sunsite (especially tedious is having to update the LSM file by
	  hand; if someone implements an automatic solution, I'll be quite
	  happy to reinstate sunsite).

2004-12-18 23:03  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add a pattern for make dist tarballs.

2004-12-18 22:56  Reuben Thomas  <rrt@sc3d.org>

	* autogen.sh: Pass --add-missing to automake so it installs missing
	  files that are needed.

2004-12-18 22:37  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, zile.pkg: Add .pkg file for EPOC.

2004-12-18 22:27  Reuben Thomas  <rrt@sc3d.org>

	* doc/texinfo.tex: texinfo.tex should not be in the repository (it
	  comes with automake).  It does still go in the distribution, of
	  course.

2004-12-18 22:24  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Remove etc/Makefile now we no longer have etc/.

2004-12-18 22:09  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, doc/.cvsignore, doc/FAQ, doc/Makefile.am,
	  doc/TUTORIAL, doc/mkdoc.c, doc/zilerc.sample, doc/zlint: Fold the
	  contents of etc/ into doc/, where it sensibly belongs (it's all
	  documentation!).

2004-12-18 21:50  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Remove key abbreviations SFT and CTL (for Shift
	  and Control) which are not actually used in the documentation.

2004-12-17 14:23  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, zile.lsm: Update for 2.0-a3.

2004-12-17 11:58  Reuben Thomas  <rrt@sc3d.org>

	* AUTHORS: Make Nicolas Duboc rather more prominent. He deserves
	  it.

2004-12-17 11:53  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, file.c, zile.h: Add auto line-end detection.
	  Copes with CR, LF, CRLF and LFCR.

2004-12-17 11:53  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Document open-line and line end auto-detection.

	  Add a pointer to the SourceForge trackers for bug reports.

	  Add Reuben Thomas and David A. Capello to the list of zile
	  authors.

2004-12-17 11:45  Reuben Thomas  <rrt@sc3d.org>

	* HISTORY: This file was yet another thing to maintain, and its
	  contents was not very interesting. Get rid of it.

2004-12-17 11:43  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Update NEWS for zile 2.0.

2004-12-17 11:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: line.c, tbl_funcs.h: Add open-line. Closes Requests-972472.

2004-12-17 01:21  Reuben Thomas  <rrt@sc3d.org>

	* src/window.c: Replace a slightly odd use of ? : with clearer
	  if...else. The motivation is to work around a bug in tcc 0.9.22,
	  but the resulting code is a little clearer too! Also correct a
	  typo in the accompanying comment.

2004-12-17 00:15  Reuben Thomas  <rrt@sc3d.org>

	* zile.lsm: Update LSM file for 2.0-a2.

2004-12-09 00:53  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix the change made in version 1.31 (I did it
	  completely wrong, but it almost worked; sigh).

2004-12-09 00:51  Reuben Thomas  <rrt@sc3d.org>

	* src/point.c: Use assignment instead of initialisers for
	  non-constant values assigned to aggregates, as required by C90.

2004-12-09 00:51  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Remove the comma at the end of the completion enum
	  list, to avoid a -pedantic warning.

2004-12-08 23:47  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Dynamically allocate the keys array in
	  xgetkey, as its size is dynamically computed, which is non-ANSI.

	  Simplify the rest of xgetkey.

2004-12-08 23:45  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Add -pedantic to CFLAGS.

2004-11-16 00:35  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/Makefile.am, src/term_epocemx.c: Add EPOC
	  support (in term_epocemx.c).

	  Add --enable-epocemx to configure.ac

	  Remove gperf test from configure.ac.

	  Note: term_epocemx.c currently duplicates quite a lot of
	  term_termcap.c, of which it is a heavily modified version. I will
	  factor out the comon bits shortly.

	  Also, building under epocemx requires a configure line something
	  like:

	  ./configure --build=<current-platform> --host=arm-epoc-pe
	  --enable-epocemx

2004-11-15 22:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_allegro.c, term_termcap.c: Factor code to tidy
	  up the display into main.c; it's independent of the terminal.

	  Similarly, call free_rotation_buffers from main.

2004-11-15 22:01  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/file.c: Add support for systems without fchown
	  or fchmod. Do not use chown or chmod on such systems; that would
	  result in race condition. Instead, just omit the unsupported
	  calls.

2004-11-15 12:36  Reuben Thomas  <rrt@sc3d.org>

	* src/: .cvsignore, Makefile.am, alist.c, astr.c, htable.c: Add
	  stub zile_exit function to tests and mkdoc so they can use
	  zmalloc and friends. This is ugly, but the simplest thing I can
	  think of.

	  Add tests to src/.cvsignore.

	  Add the object files the tests need to src/Makefile.am.

2004-11-15 00:54  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, configure.ac: Remove lib directory from
	  configure.ac, and reorder dirs so that src gets built before etc,
	  as it contains some necessary object files.

2004-11-15 00:53  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Belatedly added some news for 2.0-a1.

2004-11-15 00:47  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, src/Makefile.am, src/agetcwd.c, src/agetcwd.h,
	  src/alist.c, src/alist.h, src/astr.c, src/astr.h, src/glue.c,
	  src/htable.c, src/htable.h, src/regex.c, src/regex.h,
	  src/strrstr.c, src/vasprintf.c, src/vector.c, src/vector.h,
	  src/zmalloc.c: Move contents of lib/ into src/. This is slightly
	  awkward at the moment, but means that x{malloc,realloc,strdup}
	  can be replaced by calls to z{malloc,realloc,dup}, and the
	  machinery for building libzile is not needed (it was rather
	  pointless, although it was used by mkdoc and the test programs of
	  the libraries, which now won't work and will have to be
	  resurrected).

	  This makes the arrangement of the code a bit simpler.

	  Also move the z* functions into zmalloc.c so they can easily be
	  linked into mkdoc.c.

2004-11-14 23:57  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, buffer.c, extern.h, file.c, glue.c, main.c,
	  minibuf.c, rc.c, search.c, variables.c: Sort out waitkey:

	  1. Get rid of waitkey_discard. User input should not be
	  discarded.

	  2. Don't bother waiting for half a second during universal
	  argument    input. This is pointless finessing (although Emacs
	  does do it).

	  3. Standardise on a two second pause when wait is required, and
	  remove    the argument from waitkey. Before most of the pauses
	  were 2 secs,	  some were 3 and 1 was 1, for no obvious reason.

	  4. Remove the 20 second waitkey for the splash screen. Let the
	  user	  take as long as they want to read it.

2004-11-14 23:32  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Two changes for greater portability (for the EPOC
	  port):

	  1. If _POSIX_PATH_MAX is not defined, guess a value of 254 for
	  PATH_MAX (err on the side of safety).

	  2. Use ANSI C signal, not BSD sigaction. Using signal is
	  generally not    a good idea, but here we are only using one-shot
	  fatal signal	  handlers, so it shouldn't be too bad.

2004-11-14 23:17  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix display during query-replace.

2004-11-14 22:35  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Bind query-replace to M-%, as in Emacs.

2004-11-14 22:07  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Remove two lines from the splash screen so it will
	  fit on a 20-line screen (such as a Psion Revo!).

2004-11-14 21:57  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/main.c, src/tbl_vars.h: Remove novice-mode,
	  and always add string to *scratch* buffer, as Emacs does.

2004-11-14 21:52  Reuben Thomas  <rrt@sc3d.org>

	* NEWS, doc/zile.texi, src/main.c, src/tbl_vars.h, src/zile.1.in:
	  Really extirpate mini help.

2004-11-14 21:39  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/zile.1.in: Remove last vestiges of minihelp.

2004-11-14 21:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: help.c, main.c, tbl_funcs.h: Remove minihelp files and
	  functions. They are a pain to maintain, they're not Emacs-like,
	  and this editor is not designed for novices (who should use nano
	  or something similar).

2004-11-14 21:32  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Make alternative-bindings only affect the *first* M-h
	  in a key binding.

2004-11-14 21:05  Reuben Thomas  <rrt@sc3d.org>

	* src/help.c: Fix a bug in fix_alternative_keys.

2004-11-14 20:58  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove some unused vars.

2004-11-14 20:57  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Can't free alternative bindings any longer as one of
	  them is now static. It is silly code anyway; we really need
	  properly rebindable keys.

2004-11-14 20:52  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: For alternative-bindings, rebind mark-paragraph to
	  \M-h\M-h.

2004-11-14 20:35  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Remove note about refcard.tex, which no longer
	  exists.

2004-11-14 16:29  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, funcs.c, glue.c, term_allegro.c, term_termcap.c:
	  Rename term_unget_char to term_unget (it really does unget a
	  keystroke, not a char).

2004-11-14 15:22  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Remove unnecessary static empty_string (just
	  use "").

2004-11-14 00:09  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Remove "undo compaction". It already exists. Duh.

2004-11-14 00:06  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Add a note about being able to rebind keys within zile
	  (which should be possible), including within the config file.

2004-11-14 00:00  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Enclose fill_paragraph in an undo sequence so it
	  gets undone as a single action.

2004-11-13 23:57  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Clear the flags set by next_line in fill_paragraph
	  so that the cursor doesn't resync and hence behave in an
	  unexpected manner after fill_paragraph.

2004-11-13 23:39  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Revert to 1.33 and add a comment explaining
	  why the eol flag and associated machinations are necessary.

2004-11-13 00:09  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Simplify term_refresh: when we get to the end
	  of a line, break out of the inner loop. The eol flag is no longer
	  needed, and skipped can be set to FALSE every time a character is
	  printed.

2004-11-12 23:56  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: In term_refresh:

	  1. Set skipped = FALSE every time round the main loop, since we
	  now	 explicitly move to the start of each line.

	  2. Don't bother initialising eol and skipped, since they're
	  initialised every time round the main loop.

2004-11-12 23:51  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: In term_refresh, explicitly move to the start
	  of each line, to cure display problems.

2004-11-12 23:50  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Tidy up some spacing.

2004-11-12 23:09  Reuben Thomas  <rrt@sc3d.org>

	* zile.lsm: Add date and archive size for 2.0-a1.

2004-11-01 21:24  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Tidy up a #define (didn't need to be on two lines).

2004-10-29 23:49  Reuben Thomas  <rrt@sc3d.org>

	* src/editfns.c: Fix a typo in is_blank_line left over from the
	  Line struct change.  Apparently is_space doesn't get its
	  argument's type checked properly on my system, grr...

2004-10-25 09:58  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix key detection when there are no
	  characters in the input buffer.

2004-10-25 00:56  Reuben Thomas  <rrt@sc3d.org>

	* src/term_allegro.c: Fix term_unget_char not to return anything,
	  as per new prototype.

2004-10-25 00:55  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_termcap.c: Fix term_unget_char so that it
	  works with keystrokes including modifiers.

2004-10-25 00:52  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove an overenthusiastic XXX (todo).

2004-10-25 00:10  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Remove two unused functions.

2004-10-24 23:37  Reuben Thomas  <rrt@sc3d.org>

	* TODO, src/term_termcap.c: Add support for keypad keys, and fix a
	  bug in the case where one or more keys are not supported by the
	  termcap description.

2004-10-24 20:15  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Don't count length of non-cursor-key termcap
	  capability strings.

	  Use "ce" capability to clear to EOL, so that X copy works
	  properly.  Closes #1052800.

2004-10-23 16:41  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Remove the high priority category. High priority todos
	  should be filed as bugs.

2004-10-23 15:10  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix crash when a terminal doesn't have one of
	  the capabilities we want.

2004-10-16 22:05  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Declare remaining high priority todos to be medium
	  priority.

2004-10-16 22:04  Reuben Thomas  <rrt@sc3d.org>

	* TODO, src/funcs.c: Implement fill-paragraph.

	  Tidy up the TODO, reordering a bit and rewriting all entries in
	  the form as actions to be done.

2004-10-16 21:37  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Remove accidentally left-in debugging code.

2004-10-16 21:36  Reuben Thomas  <rrt@sc3d.org>

	* src/: help.c, tbl_funcs.h, zile.1.in: Remove LATEST_VERSION and
	  associated command and replace it with a question in the FAQ.

2004-10-16 21:24  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, tbl_funcs.h: Remove switch-to-correlated-buffer.
	  This is not used often enough to be in zile.

2004-10-16 21:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_allegro.c, term_termcap.c: Rename
	  term_ungetkey to the more accurate term_unget_char.

	  Redo ungetkey support in term_termcap.c to cope with fast input.

	  In extern.h reflect change to meaning of waitkey functions.

2004-10-16 21:17  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, buffer.c, file.c, glue.c, main.c, minibuf.c, rc.c,
	  search.c, variables.c: Change waitkey functions to work in
	  deciseconds. For a UI, msecs is unnecessarily fine.

2004-10-15 00:32  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Free memory used for termcap strings properly
	  when finished, plus norm_string.

2004-10-15 00:30  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, line.c: Rename static auto_fill_break_line to
	  non-static fill_break_line, so that it can be used by
	  fill-paragraph.

2004-10-15 00:29  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Tidy up some comments.

2004-10-15 00:26  Reuben Thomas  <rrt@sc3d.org>

	* src/buffer.c: Free the buffer limit properly; it's now a
	  fully-fledged Line.

2004-10-14 22:06  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Remove no-longer needed DEBUG code (was used by
	  code in regex.c that no longer exists).

2004-10-14 01:54  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Tests are now built by make check.

2004-10-14 01:50  Reuben Thomas  <rrt@sc3d.org>

	* src/.cvsignore: Remove fontlock_*.c, which no longer exist.

2004-10-13 22:22  Reuben Thomas  <rrt@sc3d.org>

	* src/basic.c: Fix non-Emacs like behaviour (as noted by dacap and
	  tested against Emacs by myself).

2004-10-13 22:12  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix a stupid bug I introduced in forward isearch.

2004-10-13 17:04  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Screen update dealt with.

2004-10-13 17:04  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, file.c, funcs.c, registers.c: Find all the times
	  where the minibuffer is written to and then a keypress required,
	  and insert term_refresh() to bring the screen up to date.

2004-10-13 16:53  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Since term_read_screen_size is not an API
	  call any more, rename it to read_screen_size.

2004-10-13 16:52  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_allegro.c, term_termcap.c:
	  term_read_screen_size doesn't need to be in the API.

2004-10-13 16:50  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_allegro.c, term_termcap.c: Make window
	  resizing work for termcap.

2004-10-13 16:47  Reuben Thomas  <rrt@sc3d.org>

	* src/: redisplay.c, term_redisplay.c: Move the function
	  resize_windows to redisplay.c, because it doesn't use any term_*
	  functions.

2004-10-13 00:22  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Unget characters in the right order in
	  translate_key.

	  Use read not fread after all. What was I thinking?

	  Add a comment about use of unbuffered stdout.

2004-10-12 23:39  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Remove some old code to do with no-longer
	  used select.

	  If we receive multiple characters and they don't match a
	  multi-character key, return the first one and unget the rest.

	  Use fread instead of read to get input (be ANSI as much as
	  possible).

2004-10-12 23:08  Reuben Thomas  <rrt@sc3d.org>

	* TODO: mark-paragraph now implemented.

2004-10-12 23:06  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Implement mark-paragraph.

2004-10-12 23:03  Reuben Thomas  <rrt@sc3d.org>

	* TODO, src/funcs.c: Implement forward-paragraph and
	  backward-paragraph.

	  Move the sentence functions from HIGH PRIORITY to MEDIUM
	  PRIORITY.  This means I don't intend to get them done for zile
	  2.0.

2004-10-12 23:02  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Bump version to 2.0-a1. It will be...

2004-10-12 13:29  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix saving file (before, since my change of the Line
	  structure, it was saving corrupt data), and factor the code
	  better.

2004-10-12 13:07  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Make cursor keys work in xterm (use "ks"
	  capability).

2004-10-12 12:36  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Make cursor keys work.

2004-10-12 01:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: completion.c, file.c: Revert my changes to filename
	  expansion. They seem to have been wrong-headed, as, I think, was
	  the TODO that inspired them (hence I haven't reverted that).

	  The code in expand_path still needs refactoring.

2004-10-12 00:32  Reuben Thomas  <rrt@sc3d.org>

	* src/term_minibuf.c: Fix another bug, this time when the
	  minibuffer contents is longer than the width of the screen.

2004-10-11 23:10  Reuben Thomas  <rrt@sc3d.org>

	* src/term_minibuf.c: Fix drawing of minibuffer. In
	  draw_minibuffer_read, call term_refresh to update the screen
	  after drawing the minibuffer. When calling term_addnstr, make
	  sure we don't try to add more characters than are in the string
	  (i.e. it's not like strncat, but always adds the given number of
	  characters).

2004-10-11 13:57  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Optimise term_refresh for acceptable
	  performance.

2004-10-11 04:03  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Use isprint, not isgraph to test whether to
	  display characters. Oops.

2004-10-11 04:02  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_redisplay.c, term_termcap.c: Fix the display
	  of the splash screen.

	  Other minor tidy-up.

2004-10-11 02:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, window.c: Remove select_terminal. We've never had
	  more than one interface compiled in.

2004-10-11 02:21  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/tbl_vars.h: Remove the rest of the docs and
	  code pertaining to displayable-chars.

2004-10-11 02:17  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, main.c, term_redisplay.c, variables.c: Get rid of
	  ad-hoc printable character support, and use isgraph.	Printable
	  support should be done using locales.

	  As a result, we no longer have any cached variables, so get rid
	  of cached variable support too.

2004-10-11 02:08  Reuben Thomas  <rrt@sc3d.org>

	* README, configure.ac, zile.lsm, doc/zile.texi, src/Makefile.am,
	  src/term_ncurses.c: Remove ncurses interface. We no longer have
	  any dependencies on external libraries!

2004-10-11 01:57  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, main.c, term_allegro.c, term_termcap.c: Remove
	  unused term_open function.

2004-10-11 01:47  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, redisplay.c: Remove irrelevant comment from main.c.

	  Remove #if 1 ... #else from redisplay.c.

2004-10-10 22:52  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Fix keyboard input (stop trying to use
	  select, use termio timeout).

	  Use unbuffered stdout for immediate update.

	  Fix screen update on exit in term_close.

2004-10-10 18:18  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Remove ENABLE_FULL_HSCROLL. The fact that
	  no-one has ever added code to make this configurable shows that
	  it's not wanted. What we arguably do want is wrapping, but that's
	  another matter.

2004-10-10 18:08  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Modify term_refresh so that it only prints
	  characters that have changed since the last call.

2004-10-09 00:56  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Add font interpretation back into the new
	  buffered termcap scheme.

2004-10-08 14:30  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/extern.h, src/funcs.c, src/main.c,
	  src/minibuf.c, src/tbl_vars.h, src/term_allegro.c,
	  src/term_allegro.h, src/term_minibuf.c, src/term_ncurses.c,
	  src/term_ncurses.h, src/term_redisplay.c, src/term_termcap.c,
	  src/term_termcap.h, src/variables.c, src/zile.h, src/zterm.h:
	  Remove colour support.

	  Simplify the terminal interface further. The per-interface header
	  file is no longer required.

	  Start rewriting the termcap back-end so that it can have a simple
	  ncurses-like optimisation and not have to redraw the entire
	  screen every time.

2004-10-06 18:30  Reuben Thomas  <rrt@sc3d.org>

	* TODO: expand_path dealt with

2004-10-06 18:30  Reuben Thomas  <rrt@sc3d.org>

	* src/: completion.c, file.c: As per TODO:   Move code to deal with
	  ~/ and ~user from expand_path to   default_completion_reread (and
	  factor out into a separate function).

2004-10-06 18:28  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Remove unnecessary variable lp2len, which was used
	  uninitialised.

2004-10-06 18:26  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Remove exaggeration.

2004-10-06 17:48  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Remove todo about stripping binaries on install; the
	  correct way to do this with automake is make install-strip.

2004-10-06 17:32  Reuben Thomas  <rrt@sc3d.org>

	* src/: basic.c, buffer.c, editfns.c, extern.h, file.c, funcs.c,
	  glue.c, help.c, killring.c, line.c, point.c, search.c,
	  term_redisplay.c, term_termcap.c, undo.c, zile.h: Change Line
	  structure so that the text member is an astr. This means that the
	  malloc system is worked a bit harder, but that line pointers
	  don't need to be twiddled when the length of a line changes, and
	  that the code is simplified (we make far more use of standard
	  astr routines).

	  As well as general code simplification, this should make instant
	  display updating easier to program.

	  These changes are potentially capable of introducing bugs, but
	  initial tests with simple editing have run cleanly in valgrind.

	  Other misc cleanup, and further experimentation in term_termcap.c
	  (which is still far from finished).

2004-10-06 17:27  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Add getting tests in lib built to list. Give an example
	  command for building a test.

2004-10-05 22:47  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Use waitkey_discard instead of term_xgetkey directly.

2004-10-05 22:00  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Do update after clearing minibuf so cursor is at
	  correct position on screen.

2004-10-05 21:42  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: First go at using select for input. At the
	  moment nothing is done with multi-key sequences. fflush(stdout)
	  before calling select to ensure the display is up to date.

2004-10-05 20:40  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Update include files needed for termcap (as per
	  term_termcap.c).

2004-10-05 20:38  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Various fixes and updates.

	  In particular rewrite key handling code to prepare for handling
	  multi-byte sequences using select. This doesn't seem to work yet,
	  so the actual calls to select are commented out for now.

2004-10-05 20:34  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: Remove support for buggy ncurses
	  (NEEDS_REDUNDANT_REFRESH). Such support shouldn't be in this file
	  anyway.

	  Update the code for #ifndef ENABLE_FULL_HSCROLL to use new term_
	  functions (term_mvaddch no longer exists).

2004-10-05 20:32  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix a comment typo.

	  Tidy up some code with a trivial transformation.

2004-10-05 19:51  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/main.c, src/tbl_vars.h, src/term_redisplay.c:
	  Remove support for putting the time in the status bar. This
	  feature involved a lot of (sometimes tricky) code for very little
	  return in terms of functionality.

2004-10-05 19:13  Reuben Thomas  <rrt@sc3d.org>

	* src/term_redisplay.c: In outch, call term_attrset to set font
	  (I'd forgotten to re-add this after changing the way fonts work).

2004-09-26 11:55  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Rewrite create_backup_filename to use an astr for its
	  result, and thereby remove a malloc bug (found by David).

2004-09-25 23:43  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix copyright notice.

2004-09-25 03:06  David A. Capello  <dacap@users.sourceforge.net>

	* src/: zile.h, line.c: Removed the anchors stuff.

2004-09-20 15:22  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, term_allegro.c, term_ncurses.c, term_redisplay.c,
	  term_termcap.c: Make term_attrset vararg, so it will cope with
	  both allegro/curses style of attributes (all set at once) and
	  termcap style (cumulative).

	  Reverse video is now working in the termcap terminal!

2004-09-20 14:52  Reuben Thomas  <rrt@sc3d.org>

	* KNOWNBUGS, TODO: Fold the rest of KNOWNBUGS (which isn't really
	  about bugs) into TODO.  We should really just have bugs in
	  Bugzilla.

2004-09-20 14:42  Reuben Thomas  <rrt@sc3d.org>

	* src/term_ncurses.c: Define ZILE_NORMAL.

2004-09-20 14:40  Reuben Thomas  <rrt@sc3d.org>

	* src/term_termcap.c: Get several more cap strings, including font
	  attributed for ZILE_NORMAL and ZILE_REVERSE, and the strings
	  generated by the cursor keys (these are not used yet).

	  Remove Linux-specific code.

	  Implement term_attrset, so the minibuffer is now printed in
	  inverse video!

2004-09-20 14:38  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_allegro.h, term_ncurses.h, term_termcap.h, zile.h:
	  Define Font type in each term_*.h. Hence, need to #include
	  zterm.h in zile.h. In term_termcap, Font is typedef'd to char *.

	  Add ZILE_NORMAL font. Since termcap uses the idea of turning
	  attributes on and off rather than applying them to each
	  character, we need to move to this model.

2004-09-20 11:34  Reuben Thomas  <rrt@sc3d.org>

	* KNOWNBUGS: Remove bug about speed of insertion of large blocks of
	  text in font-lock mode, because we no longer have font-lock.

2004-09-20 10:59  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add stamp-h1

2004-09-20 10:59  Reuben Thomas  <rrt@sc3d.org>

	* acinclude.m4, configure.ac: Quote macro names in AC_DEFUN to make
	  recent autotools happy.

2004-09-20 10:33  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Change version to 1.8-a1: there have been enough
	  changes since the 1.7 series was started to deserve a new series.

2004-09-20 02:07  David A. Capello  <dacap@users.sourceforge.net>

	* src/search.c: Fixed a bug with the cursor in isearch (the new
	  minibuf_write doesn't restore the cursor position).

2004-09-04 03:37  David A. Capello  <dacap@users.sourceforge.net>

	* configure.ac, src/Makefile.am: [no log message]

2004-09-03 03:09  David A. Capello  <dacap@users.sourceforge.net>

	* configure.ac, src/Makefile.am, src/main.c, src/term_allegro.c,
	  src/term_allegro.h, src/zterm.h: Added the Allegro interface.

2004-07-11 01:51  Reuben Thomas  <rrt@sc3d.org>

	* src/extern.h: Remove term_minibuf_clear which no longer exists,
	  and add minibuf_clear, which was missing.

2004-07-11 01:29  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, file.c, minibuf.c, term_minibuf.c,
	  term_ncurses.c, term_termcap.c: Get rid of term_minibuf_clear,
	  and replace it with term_minibuf_write(""), which is functionally
	  identical.

	  Get rid of term_getyx, as it can't be implemented in termcap (I
	  was using the ncurses getyx call, which returned nonsense
	  results).

	  Fix a bug in term_addnstr in term_termcap.c.

	  Comment:

	  It seems that not calling term_getyx to save the position of the
	  cursor when writing to the minibuffer has caused no ill effects,
	  but I could be wrong; something to watch out for...

	  The display now seems basically to work under termcap, as the
	  changes checked in here fix the minibuffer.

2004-07-11 00:52  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_termcap.c: Tidy up some comments.

2004-07-11 00:52  Reuben Thomas  <rrt@sc3d.org>

	* src/term_minibuf.c: Marginal tidy up.

2004-07-10 23:49  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: If building with termcap, look for libtermcap and
	  add it to the LIBS.

2004-07-10 23:49  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_termcap.c, term_termcap.h: Cosmetic & copyright
	  tidy-up.

2004-07-10 23:34  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Fix configuration again so that you can now build
	  with or without --disable-curses.

	  Factor out the curses header and library detection code into a
	  function.

2004-07-10 22:47  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Remove stamp-h1, which seems to be obsolete, and add
	  stamp-h and stamp-h.in.

2004-07-09 01:45  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Set curses macros properly so that curses build can
	  be performed.

2004-07-09 00:39  Reuben Thomas  <rrt@sc3d.org>

	* src/zterm.h: #include config.h in zterm.h so we get the CURSES
	  macro if it's defined.

2004-06-30 23:52  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/Makefile.am, src/main.c, src/term_minibuf.c,
	  src/term_ncurses.c, src/term_ncurses.h, src/term_redisplay.c,
	  src/term_termcap.c, src/term_termcap.h, src/zterm.h: Add support
	  for different implementations of the terminal interface, and add
	  preliminary term.h/termio.h interface. The default interface is
	  still curses, and it can be disabled with --disable-curses passed
	  to configure.

	  zterm.h is now the header included by C files, which in turn
	  includes the implementation header, currently either
	  term_ncurses.h or term_termcap.h.

2004-05-29 17:38  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, main.c, term_ncurses.c, term_ncurses.h,
	  term_redisplay.c, variables.c: A few small bits of twiddling to
	  make the term interface tidier, and fix bug 962722 (selection
	  highlighting broken).

2004-05-23 22:47  Reuben Thomas  <rrt@sc3d.org>

	* src/term_ncurses.c: Remove comment about exports that is no
	  longer true.

2004-05-20 23:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, completion.c, extern.h, file.c, funcs.c, glue.c,
	  line.c, main.c, minibuf.c, redisplay.c, registers.c, search.c,
	  term_minibuf.c, term_ncurses.c, term_ncurses.h, term_redisplay.c,
	  zile.h: Get rid of the function pointers from the Terminal type;
	  we have no desire to make a binary of zile that can use more than
	  one sort of terminal. (This doesn't stop us choosing at
	  compile-time, of course!)

2004-05-20 23:13  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_minibuf.c, term_ncurses.c, term_ncurses.h,
	  term_redisplay.c, variables.c, zile.h: Expunge ncurses_*
	  functions from files other than term_ncurses.c.  Mostly this was
	  done by simply renaming them after ensuring that they called no
	  ncurses functions directly. Now all ncurses code definitely lives
	  in term_ncurses.c (unless I have made a mistake).

2004-05-20 22:48  Reuben Thomas  <rrt@sc3d.org>

	* src/: term_minibuf.c, term_ncurses.c, term_ncurses.h,
	  term_redisplay.c: Remove term_mv* and term_addstr and replace
	  them with equivalent code.  The aim is to make the API that needs
	  to be reimplemented for termio support rather smaller.

2004-05-20 22:41  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/Makefile.am: Expunge the last references to
	  term_ncurses directory and libterm_ncurses.a

2004-05-10 17:49  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, main.c, term_minibuf.c, term_ncurses.c,
	  term_ncurses.h, term_redisplay.c: Move contents of ncurses_key.c
	  into term_ncurses.c. Get rid of the term_ncurses subdirectory
	  altogether. We now have just one term_foo.{c,h} file per Terminal
	  implementation, and a number of term_*.c files that build on top
	  of this. In fact, this story is about to get a whole lot simpler
	  too.

2004-05-10 17:39  Reuben Thomas  <rrt@sc3d.org>

	* src/: main.c, term_redisplay.c, zile.h: Get rid of
	  ncurses_misc.c. The code went to term_redisplay.c and
	  term_ncurses.c.

2004-05-10 17:05  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, term_redisplay.c: Move ncurses_redisplay.c up
	  to term_ncurses.c; it no longer needs ncurses.h. Only two more
	  files to go!

2004-05-10 17:03  Reuben Thomas  <rrt@sc3d.org>

	* ChangeLog: Add a placeholder ChangeLog file to keep autotools
	  happy. It just says "see cvs log".

2004-05-10 17:00  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/file.c, src/line.c, src/main.c, src/minibuf.c:
	  Add code to configure.ac so that if we're building with GCC we
	  get plenty of compiler warnings turned on. Always.

	  As a result of this warnings bonanza, fix all the warnings found
	  in the rest of the code. Given a recent warnings cleanup, this
	  was mostly limited to extern functions that were not declared
	  before being defined. In all cases here this was fixed by making
	  the function static.

2004-05-10 16:56  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Clarify the added binding under "MEDIUM PRIORITY" and add a
	  new item, namely, to strip the binary during installation.

2004-05-09 20:34  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Simplify quoted_insert and quoted_insert_octal. We
	  don't really need to wait for the keys before displaying prompts
	  in the minibuffer, and some of the stuff wasn't actually working
	  (e.g. if you typed 1 and pressed C-g, the insert was cancelled,
	  but ^G was inserted).

2004-05-09 20:32  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Remove unused GETKEY_NONBLOCKING.

2004-05-09 19:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.am, term_minibuf.c: Move
	  term_ncurses/ncurses_minibuf.c to term_minibuf.c.

2004-05-09 19:07  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/tbl_vars.h: Remove documentation for
	  show-eob-marker, which I've removed.

2004-05-09 19:03  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_vars.h: Remove the font-* variables, which are no longer
	  used.

	  Improve the help for novice-level.

2004-05-09 19:01  Reuben Thomas  <rrt@sc3d.org>

	* src/: completion.c, funcs.c, help.c, zile.h: Remove EOB marker.
	  It's a frivolous feature.

2004-05-06 23:16  Reuben Thomas  <rrt@sc3d.org>

	* TODO, src/macro.c, src/tbl_funcs.h: Add dummy function for
	  name-last-kbd-macro and tidy up TODO.

2004-05-02 07:21  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Fix restarting path from root when "//" found
	  during completion.

2004-05-02 07:19  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Deal with zero-length pwd in expand_path.

2004-05-02 07:16  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Rename priority levels more reasonably.

2004-04-23 22:18  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, undo.c, zile.h: Add a save_undop member to Terminal
	  struct and use it to record the next undo point each time the
	  file is saved so that the "modified" flag is only cleared when
	  the buffer matches its last saved state.

2004-04-23 21:45  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Move feature where // in find-file causes the
	  file name to be truncated to just / into
	  default_completion_reread from expand_path.  This cures bug
	  #940896 where filenames with double slashes would be mangled: the
	  only time this should happen is interactively.

2004-04-23 21:42  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, file.c, minibuf.c: Make compact_path allocate its
	  result, rather than taking it as a parameter.

2004-04-23 21:41  Reuben Thomas  <rrt@sc3d.org>

	* src/: funcs.c, help.c: Rename astr_size to astr_len.

2004-04-23 21:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, search.c: Rename the size and maxsize fields of the
	  astr structure to len and maxlen (makes more sense).

	  Fix a comment typo in astr.h.

2004-04-20 03:10  David A. Capello  <dacap@users.sourceforge.net>

	* src/main.c: Removed some vestige of Reuben's terminfo tests.

2004-04-16 10:34  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Remove accidentally committed private change.

2004-04-16 02:24  David A. Capello  <dacap@users.sourceforge.net>

	* src/bind.c: Fixed write_bindings_list, a "(void)ap" must be after
	  variable declarations.

2004-04-05 23:31  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Move signal handling code into main.c, as it's not
	  ncurses-specific.

2004-04-05 19:28  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Remove some unused macros.

2004-04-05 18:30  Reuben Thomas  <rrt@sc3d.org>

	* NEWS, doc/zile.texi, src/funcs.c, src/tbl_funcs.h: Remove
	  text-mode, which no longer does anything.

2004-04-05 18:18  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/funcs.c, src/tbl_vars.h, src/window.c: Remove
	  mail mode mentions in documentation.

	  Change the variable text-mode-auto-fill to auto-fill-mode.

2004-04-05 17:06  Reuben Thomas  <rrt@sc3d.org>

	* src/tbl_funcs.h: Correct shortcuts for forward- and
	  backward-paragraph to the same as Emacs.

2004-04-05 17:00  Reuben Thomas  <rrt@sc3d.org>

	* TODO: Correct backward-paragraph and forward-paragraph bindings
	  to the same as Emacs (M-{ and M-}).

2004-04-05 14:27  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, help.c, keys.c, minibuf.c, tbl_funcs.h:
	  Tidy up implementation of global-set-key.

	  Make a few messages more Emacs-like.

	  Remove describe-key-briefly: describe-key is fine.

	  Note: there's now a function keyvectostr to turn a list of key
	  chords into a string.

2004-04-05 01:50  Reuben Thomas  <rrt@sc3d.org>

	* TODO, src/bind.c, src/extern.h, src/tbl_funcs.h: Add keybinding
	  (global-set-key).

2004-04-05 01:50  Reuben Thomas  <rrt@sc3d.org>

	* src/: funcs.c, zile.h: Remove major mode. There aren't any left.

2004-04-04 22:01  Reuben Thomas  <rrt@sc3d.org>

	* src/: funcs.c, zile.h: Get rid of BFLAG_FONTLOCK.

	  In funcs.c, rename make_buffer_mode to make_buffer_modeline for
	  clarity. Don't bother putting "Text" in the modeline, as we don't
	  have major modes any more.

2004-04-04 21:33  Reuben Thomas  <rrt@sc3d.org>

	* NEWS, TODO, doc/zile.texi, src/Makefile.am, src/extern.h,
	  src/file.c, src/fontlock.c, src/funcs.c, src/line.c,
	  src/redisplay.c, src/tbl_funcs.h, src/tbl_vars.h, src/undo.c:
	  Font-lock removed.

	  FAQ overhauled.

2004-04-04 20:48  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi, src/file.c, src/tbl_vars.h: Remove "revision" mode
	  of backup, which is just bloat. Again, if you want this level of
	  functionality, use a bigger editor.

2004-03-29 23:47  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, completion.c, extern.h, file.c, funcs.c, glue.c,
	  help.c, keys.c, minibuf.c, rc.c, search.c, variables.c: Rename
	  some string functions to more ISO standard-like names, e.g.
	  astr_assign* becomes astr_cpy* and astr_append* becomes
	  astr_cat*.  They are shorter too!

	  Also add getln (safe gets, I should probably call it agets!) to
	  glue.c, in preparation for the Lisp interpreter, which is taking
	  shape in my working copy.

2004-03-20 17:50  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.am: Removed lua.c

2004-03-14 14:36  Reuben Thomas  <rrt@sc3d.org>

	* src/extern.h, src/file.c, src/fontlock.c, src/fontlock_c.gperf,
	  src/fontlock_cpp.gperf, src/fontlock_csharp.gperf,
	  src/fontlock_java.gperf, src/funcs.c, src/line.c, src/lua.c,
	  src/main.c, src/tbl_funcs.h, src/tbl_vars.h, src/undo.c,
	  src/zile.1.in, src/zile.h, INSTALL, KNOWNBUGS, configure.ac,
	  src/Makefile.am: DON'T PANIC! I have tagged the tree with the tag
	  "fontlock-apocalypse" before committing this set of changes.

	  Remove font-lock modes (N.B. *not* font-lock support!). The
	  font-lock system in zile was a Bad Thing:

	   * It was a maintenance burden because of conditional compilation
	  and
	     configure options.
	   * It was a lot of complicated code. Several recent bugs have
	  been
	     font-lock bugs.
	   * In terms of functionality (and to a lesser extent, code size)
	  it
	     was a bloat on an editor that should be small, clean and
	  simple.
	   * It added a dependency on gperf (admittedly not a big problem).

	  I have retained font-lock support, and made it always-on.
	  Regex-based font-lock should be implemented, similar to that in
	  many other editors. Preferably, we should adopt an existing regex
	  patterns format (e.g. that of NEdit) so that we have access to a
	  wide range of fontlock modes, and users don't have to make yet
	  another crufty set.

	  Alternatively, it may be better in an editor the size of zile to
	  remove font-lock altogether.

	  Remove experimental Lua support. For similar reasons to those
	  above, it was a bad idea.

2004-03-13 20:32  Reuben Thomas  <rrt@sc3d.org>

	* src/variables.c: Use htable_foreach for variable completion.

2004-03-13 20:06  Reuben Thomas  <rrt@sc3d.org>

	* src/variables.c: Overhaul htable, removing unused functions,
	  moving the docs into htable.h, and removing htable.3.

	  In particular add a general-purpose iterator, htable_foreach, and
	  rewrite htable_list in terms of it; also in variables.c use
	  htable_foreach directly to free the variables while shutting
	  down.

2004-03-13 19:59  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, window.c: For the remaining #if 0 code (except for
	  one bit of dacap's which is unfinished) either remove it or
	  change #if 0 to #if DEBUG.

2004-03-13 17:27  Reuben Thomas  <rrt@sc3d.org>

	* src/: editfns.c, main.c: Remove unused and underused alist
	  functions, move documentation into alist.h and get rid of
	  alist.3.

2004-03-13 16:49  Reuben Thomas  <rrt@sc3d.org>

	* README: Rewrite the readme to make it much shorter and avoid
	  duplication (it's easy for it to get out of date with respect to
	  the main documentation otherwise). Stick to general features, and
	  give pointers to the other docs.

2004-03-13 16:31  Reuben Thomas  <rrt@sc3d.org>

	* src/: funcs.c, help.c, rc.c, search.c, variables.c: Make
	  astr_fgets allocate its result, and return an empty string rather
	  than NULL when eof is reached.

	  Get rid of astr_fmt and astr_vfmt.

2004-03-13 16:28  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Remove an unused variable.

2004-03-13 13:26  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Get rid of castr and replace it with const astr,
	  which is self-documenting, and used rarely enough that having a
	  specific alias is not worthwhile.

	  Get rid of ENLARGE_FACTOR which wasn't used.

	  Add static astr_pos(), which turns negative positions into
	  positive for those routines that take a pos parameter. Instead of
	  truncating the given pos to the actual size of the string, it
	  asserts that it is in range; I'll see if this causes problems and
	  take appropriate action. It does seem preferable to allowing bad
	  positions, though.

	  Add astr_char, to return the address of a given character.

	  Remove astr_last_char (replaced with *astr_char(as ,-1)).

	  Moved more documentation to astr.h from astr.3.

2004-03-11 13:50  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, file.c, funcs.c, help.c, keys.c, lua.c, minibuf.c:
	  Yet more underused and unused functions removed from astr.c. I've
	  also started transferring the documentation from astr.3 to
	  astr.h: since these are not general purpose libraries but just
	  code for zile now, there's no point having man pages. The man
	  page is now rather butchered, and probably not valid troff; it
	  will soon disappear.

	  I have made small changes to several other files to work around
	  functions I have removed. I have also tidied up the code in one
	  or two instances. The new code is hardly ever longer than the
	  old, and makes the astr library much easier to understand (it's
	  now about half the size of the original API).

2004-03-10 15:16  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.texi: Minor fixes, and change email address to
	  zile-devel list.

2004-03-10 14:39  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Fix horrible brain malfunction causing strrchr
	  prototype to be wrongly named.

2004-03-10 14:09  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Add prototype to config.h for strrstr, and correct
	  the declaration in strrstr.

2004-03-10 13:27  Reuben Thomas  <rrt@sc3d.org>

	* src/help.c: Remove more rarely used and unused functions from
	  astr.

2004-03-10 13:01  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/file.c: Remove some rarely or never used astr
	  functions, and debug and speed up astr_rfind_cstr, basing it on
	  strrstr, an implementation of which is now added to libzile.

2004-03-10 11:00  Reuben Thomas  <rrt@sc3d.org>

	* src/: buffer.c, extern.h, funcs.c, killring.c, line.c,
	  registers.c: Rename desactivate_mark to deactivate_mark (better
	  English).

2004-03-10 10:46  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix a couple of compile errors in non-text-mode code
	  caused by recent changes.

2004-03-10 10:27  Reuben Thomas  <rrt@sc3d.org>

	* KNOWNBUGS, src/line.c: Make RET do auto-fill as well as SPC.

	  Remove special-case code from self_insert_command for KBD_RET and
	  KBD_TAB, which aren't handled here anyway. If they do end up
	  bound to self-insert-command, then they should act in a vanilla
	  way anyway.

2004-03-10 09:35  Reuben Thomas  <rrt@sc3d.org>

	* KNOWNBUGS: Removed bug about background colours not working well.
	  It said that users had reported it but Sandro couldn't repro it.
	  I've never seen it either and it hasn't been reported since I've
	  been on the project, and since it's also likely it could be an
	  ncurses bug (maybe now fixed) it seems reasonable to remove it.

2004-03-09 23:29  Reuben Thomas  <rrt@sc3d.org>

	* KNOWNBUGS: I think I've removed all possible static buffer
	  overflows.

2004-03-09 23:28  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fix a couple of memory leaks introduced by recent
	  changes.

2004-03-09 23:27  Reuben Thomas  <rrt@sc3d.org>

	* src/variables.c: Remove char buffers.

2004-03-09 23:10  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, funcs.c, glue.c: Remove char buffers from
	  funcs.c; change shorten_string to return an astr to help this.

	  Tweak the spacing of the headers for list-buffers to make them
	  line up with the output.

2004-03-09 22:43  Reuben Thomas  <rrt@sc3d.org>

	* src/registers.c: Use astr instead of char array in
	  write_registers_list.

2004-03-09 22:38  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Fixed write_bindings_tree to use a list instead of a
	  static array: the function is now re-entrant and won't suffer
	  from a static buffer overflow.

2004-03-09 19:06  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h: Remove more static buffers.

2004-03-09 18:52  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, keys.c: Remove more static buffers and
	  rewrite string-to-key conversion as a result.

2004-03-09 16:30  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, keys.c: Convert static buffers to astrs.

	  Fix keytostr situation: keytostr was no longer called, so rename
	  keytostr_nobs to keytostr, and rewrite to use astrs.

2004-03-09 16:29  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Convert static buffer with potential overflow to an
	  astr in universal_argument.

2004-03-09 16:25  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Fix an signed vs unsigned comparison warning.

	  #include "editfns.h" for set_mark.

2004-03-09 16:24  Reuben Thomas  <rrt@sc3d.org>

	* src/registers.c: Fix an unused parameter warning.

2004-03-09 16:23  Reuben Thomas  <rrt@sc3d.org>

	* src/rc.c: Fix some signed vs unsigned comparison warnings.

	  Make some debugging code use ZTRACE instead of fprintf, and ifdef
	  it with DEBUG rather than 0.

2004-03-09 16:21  Reuben Thomas  <rrt@sc3d.org>

	* src/minibuf.c: Remove a couple of unused variables from
	  minibuf_format

2004-03-09 16:20  Reuben Thomas  <rrt@sc3d.org>

	* src/killring.c: Remove unused static function
	  kill_ring_push_in_beginning

2004-03-09 16:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: history.c, marker.c: #include string.h for mem* functions.

2004-03-09 16:17  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Fix a compiler warning when no non-text modes are
	  configured.

2004-03-09 16:16  Reuben Thomas  <rrt@sc3d.org>

	* src/completion.c: Fix a couple of unused parameter warnings.

2004-03-09 16:10  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Add AC_GNU_SOURCE so we get vasprintf on GNU
	  (glibc) systems, and add prototypes for vasprintf and asprintf to
	  config.h for those systems that don't have them.

2004-03-08 15:43  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove pointless fixed-length buffer from
	  do_completion.

2004-03-08 15:39  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove old commented-out search_key and rename
	  search_key0 to search_key.

2004-03-08 15:37  Reuben Thomas  <rrt@sc3d.org>

	* src/bind.c: Remove old commented-out binary search code for
	  search_leaf.

2004-03-08 15:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, extern.h, keys.c, zile.h: Use a vector for holding
	  key code sequences instead of an array.

2004-03-03 01:50  Reuben Thomas  <rrt@sc3d.org>

	* KNOWNBUGS, src/rc.c: Audit possible static buffer overflows (I
	  basically searched for \[[0-9] and identified all those instances
	  that could overflow).

	  I have fixed rc.c and ncurses_redisplay.c, which were two of the
	  worst offenders; the remaining problematic files are now listed
	  in KNOWNBUGS. As far as I can see, all other uses of static char
	  buffers are safe.

2004-02-23 02:11  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Added some page separators.

2004-02-23 02:05  David A. Capello  <dacap@users.sourceforge.net>

	* src/bind.c: Simplified the `fentry' structure, using an array for
	  the three keys (before was used key1, key2, and key3).

2004-02-23 01:54  David A. Capello  <dacap@users.sourceforge.net>

	* src/main.c: Changed `setup_main_screen' to be `static'.

2004-02-20 16:05  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix replace_text_case in the case that the
	  replacement string is shorter than the original.

2004-02-20 16:04  Reuben Thomas  <rrt@sc3d.org>

	* src/search.c: Whitespace correction.

2004-02-18 20:40  Sandro Sigala  <sandro@sigala.it>

	* NEWS: bump to version 1.7 b4

2004-02-18 20:28  Sandro Sigala  <sandro@sigala.it>

	* HISTORY, configure.ac: bump to version 1.7-b4

2004-02-18 20:19  Sandro Sigala  <sandro@sigala.it>

	* HISTORY, configure.ac: prepare for 1.7-b3

2004-02-18 16:21  Sandro Sigala  <sandro@sigala.it>

	* NEWS, src/funcs.c, src/history.c, src/tbl_funcs.h: minor tweaks

2004-02-18 14:27  Sandro Sigala  <sandro@sigala.it>

	* AUTHORS, CREDITS, Makefile.am: CREDITS --> AUTHORS: follows std
	  unix/gnu convention

2004-02-18 09:47  Reuben Thomas  <rrt@sc3d.org>

	* src/fontlock.c: Fix character constant parsing.

2004-02-17 23:19  Reuben Thomas  <rrt@sc3d.org>

	* src/: fontlock.c, zile.h, basic.c, bind.c, buffer.c, file.c,
	  funcs.c, help.c, killring.c, line.c, macro.c, rc.c, variables.c:
	  Add copyright lines for Reuben Thomas.

2004-02-17 21:01  Sandro Sigala  <sandro@sigala.it>

	* zile.lsm: BSD --> GPL

2004-02-17 20:46  Sandro Sigala  <sandro@sigala.it>

	* Makefile.am: COPYRIGHT is now COPYING

2004-02-17 20:21  Sandro Sigala  <sandro@sigala.it>

	* COPYING, COPYRIGHT, CREDITS, NEWS, README, configure.ac,
	  doc/zile.texi, src/basic.c, src/bind.c, src/buffer.c,
	  src/completion.c, src/editfns.c, src/editfns.h, src/extern.h,
	  src/file.c, src/fontlock.c, src/funcs.c, src/glue.c, src/help.c,
	  src/history.c, src/keys.c, src/killring.c, src/line.c, src/lua.c,
	  src/macro.c, src/main.c, src/marker.c, src/minibuf.c,
	  src/point.c, src/rc.c, src/redisplay.c, src/registers.c,
	  src/search.c, src/tbl_funcs.h, src/tbl_vars.h, src/undo.c,
	  src/variables.c, src/window.c, src/zile.1.in, src/zile.h: *
	  Changed BSD license to GNU GPL:	  - Removed COPYRIGHT file
		 - Added standard COPYING file	       - Changed all the
	  copyright declarations in source files.

	  * Removed old lib/err.[ch] unused Zile heritage.

	  * sed s/sandro@sigala.it/zile-devel@lists.sourceforge.net/

	  * configure now checks for both curses.h and ncurses.h,
	  libcurses.a and   libncurses.a.  e.g. on my box (SuSE 8.2)
	  ncurses is installed as   ncurses.h and libncurses.a, on another
	  as curses.h and libncurses.a...

	  * Cleaned up zile.h:		 - Now anchors are identified as an
	  opaque type:			typedef unsigned char Anchor;
	      - Enumerated UNDO_* delta types;		 - Enumerated
	  BMODE_* buffer major modes;		- Removed
	  MINIBUF_{SET,UNSET}_COLOR stuff.

	  * ncurses_minibuf.c:	 removed astrlen() function, obsoleted by
	  colors remove.

	  * some other clean up.

2004-02-17 01:09  David A. Capello  <dacap@users.sourceforge.net>

	* src/registers.c: Now insert-register doesn't move the point.

2004-02-16 01:07  David A. Capello  <dacap@users.sourceforge.net>

	* src/search.c: Fixed `line_replace_text' with `replace_case'
	  argument to copy or replace characters case.

2004-02-16 01:06  David A. Capello  <dacap@users.sourceforge.net>

	* src/line.c: Fixed `indent_relative', `line_replace_text' and
	  `adjust_markers_for_offset'.

2004-02-16 01:04  David A. Capello  <dacap@users.sourceforge.net>

	* src/glue.c: Fixed `tabify_string'.

2004-02-16 01:03  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Fixed `edit_tab_line' and `edit_tab_region'.

2004-02-16 01:02  David A. Capello  <dacap@users.sourceforge.net>

	* src/extern.h: Fixed `line_replace_text' with `replace_case'
	  argument to copy or replace characters case.

2004-02-15 02:03  David A. Capello  <dacap@users.sourceforge.net>

	* doc/zile.texi: Added documentation for key bindings of new
	  functions.

2004-02-14 22:19  Sandro Sigala  <sandro@sigala.it>

	* configure.ac, src/Makefile.am, src/regex.c, src/regex.h:
	  Modernize a bit configure.ac (now the maintainer email is
	  generated into the config.h header) move regex.[ch] from src/ to
	  lib/

2004-02-14 10:22  David A. Capello  <dacap@users.sourceforge.net>

	* src/search.c: Removed color support from minibuf.  And restored
	  the `last_search' variable.

2004-02-14 10:17  David A. Capello  <dacap@users.sourceforge.net>

	* src/: minibuf.c, variables.c: Removed color support from minibuf.

2004-02-14 10:15  David A. Capello  <dacap@users.sourceforge.net>

	* src/line.c: Modified/added comments.

2004-02-14 10:14  David A. Capello  <dacap@users.sourceforge.net>

	* src/: help.c, main.c: Removed color support from minibuf.

2004-02-14 10:08  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Fixed a typo.

2004-02-14 10:07  David A. Capello  <dacap@users.sourceforge.net>

	* src/file.c: Removed color support from minibuf.

2004-02-14 09:46  David A. Capello  <dacap@users.sourceforge.net>

	* src/buffer.c: Removed color support from minibuf.

2004-02-14 09:41  David A. Capello  <dacap@users.sourceforge.net>

	* src/bind.c: Removed color support from minibuf.

2004-02-14 09:29  David A. Capello  <dacap@users.sourceforge.net>

	* doc/zile.texi: Added documentation for the new functions.

2004-02-14 09:25  David A. Capello  <dacap@users.sourceforge.net>

	* configure.ac: Changed regex test position

2004-02-08 04:39  David A. Capello  <dacap@users.sourceforge.net>

	* NEWS, TODO, configure.ac, doc/zile.texi, src/Makefile.am,
	  src/basic.c, src/bind.c, src/buffer.c, src/completion.c,
	  src/editfns.c, src/editfns.h, src/extern.h, src/file.c,
	  src/fontlock.c, src/funcs.c, src/glue.c, src/help.c,
	  src/history.c, src/killring.c, src/line.c, src/macro.c,
	  src/main.c, src/marker.c, src/minibuf.c, src/point.c, src/rc.c,
	  src/redisplay.c, src/registers.c, src/search.c, src/tbl_funcs.h,
	  src/tbl_vars.h, src/undo.c, src/variables.c, src/window.c,
	  src/zile.h: Rewritten point/marker API mainly.

2004-02-06 04:20  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Fixed `forward-line'.

2004-02-06 04:18  David A. Capello  <dacap@users.sourceforge.net>

	* src/basic.c: Fixed `beginning-of-line' to be used with
	  `prev-line' and `next-line'.

2004-02-06 01:53  David A. Capello  <dacap@users.sourceforge.net>

	* src/line.c: Changes in the coding style.

2004-02-06 01:48  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Fixed mark-word and mark-sexp.

2004-02-05 10:14  Reuben Thomas  <rrt@sc3d.org>

	* COPYRIGHT, CREDITS, zile.lsm, src/main.c: Update the authors list
	  everywhere, and generally rejig to reflect reality.

	  Change bug-reporting address to the zile-devel mailing list.

2004-02-05 09:25  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix a comment typo.

2004-02-05 09:21  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Now that David is listed as an author, I've removed his
	  "patches supplied by" line, and reformatted the changes. Also
	  fixed a couple of problems in the English, and removed
	  non-user-visible changes (put a note about "code cleanups"
	  instead.

2004-02-05 02:45  David A. Capello  <dacap@users.sourceforge.net>

	* NEWS: Added regexp search functions.

2004-02-05 02:40  David A. Capello  <dacap@users.sourceforge.net>

	* src/: tbl_funcs.h, search.c: Added regexp search functions.

2004-02-05 02:38  David A. Capello  <dacap@users.sourceforge.net>

	* src/Makefile.am: Added regex files.

2004-02-05 02:33  David A. Capello  <dacap@users.sourceforge.net>

	* src/regex.h: Added regex files.

2004-02-05 02:26  David A. Capello  <dacap@users.sourceforge.net>

	* src/regex.c: Added regex files.

2004-02-04 12:02  Reuben Thomas  <rrt@sc3d.org>

	* TODO, src/funcs.c: Implement uniarg functionality for the
	  transpose-* functions.

2004-02-04 03:07  David A. Capello  <dacap@users.sourceforge.net>

	* NEWS: The `prev_bp' was removed.  `exchange-point-and-mark'
	  activates the mark.  `insert_char' doesn't move the mark when
	  insert a character in the same mark position.  Fixed
	  `insert_nstring' when is used in overwrite-mode.  Modified
	  `previous-line' and `next-line' to Emacs behavior.

2004-02-04 02:59  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Simplified the list-buffers function
	  (write_buffers_list really).	Also exchange-point-and-mark now
	  activates the mark.

2004-02-04 02:55  David A. Capello  <dacap@users.sourceforge.net>

	* src/: extern.h, file.c: Removed prev_bp.

2004-02-04 02:53  David A. Capello  <dacap@users.sourceforge.net>

	* src/buffer.c: Modified switch_to_buffer to move the selected
	  buffer to the head of the list of buffers (this is necessary
	  because we removed the prev_bp global variable).

2004-02-04 02:52  David A. Capello  <dacap@users.sourceforge.net>

	* src/basic.c: Fixed previous-line and next-line to a more Emacs
	  like behavior.

2004-02-04 02:50  David A. Capello  <dacap@users.sourceforge.net>

	* src/main.c: Removed prev_bp.

2004-02-04 02:49  David A. Capello  <dacap@users.sourceforge.net>

	* src/Makefile.am: Removed the $(lua) variable from zile_LDADD.

2004-02-04 02:45  David A. Capello  <dacap@users.sourceforge.net>

	* src/line.c: Fixed `insert_char' to don't move the mark when
	  insert a character in the same mark position.

	  Fixed `insert_nstring' when is used in overwrite-mode.

2004-02-03 23:41  Reuben Thomas  <rrt@sc3d.org>

	* NEWS, TODO, src/line.c: Implement low priority TODO:
	  case-matching search and replace.

2004-02-03 01:22  David A. Capello  <dacap@users.sourceforge.net>

	* src/basic.c, NEWS: Modified previous-line and next-line to Emacs
	  behavior.

2004-02-01 02:19  David A. Capello  <dacap@users.sourceforge.net>

	* Makefile.am: I guess that rrt removed README.compile from
	  repository but no from this Makefile.am

2004-01-31 02:21  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Fixed forward/backward_sexp to recognize "_"
	  character like a sexp characters.

2004-01-29 15:29  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Change --enable-debug so it only controls the DEBUG
	  symbol, i.e. real debugging code. Assertions should always be
	  compiled in. If the builder really wants to build a small binary,
	  it's possible to add -DNDEBUG to CFLAGS.

	  Change the Lua detection code so it looks for header files, not
	  libraries, as with curses and the standard C library.

2004-01-29 15:24  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Use memmove instead of memcpy when memory regions can
	  overlap (thanks to valgrind). It's probably worth keeping memcpy
	  calls in, as they are effectively assumptions that the regions
	  don't overlap, which valgrind can test.

	  Fix auto_fill_break_line again. The previous algorithm was really
	  just broken in the presence of tabs (because they made the screen
	  position different from the position in the line buffer).

2004-01-29 10:40  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, lua.c, main.c, tbl_funcs.h: Add Lua support,
	  enabled with --enable-lua. At the moment, the only way it can be
	  used is via M-x lua, which allows a lua statement to be executed
	  in a single, persistent Lua state. If the statement returns a
	  string or number, it is pasted at point.

2004-01-29 10:38  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac: Add support for Lua. It's marked EXPERIMENTAL and
	  is switched off by default.

	  Make check for curses much simpler (just check for header file).
	  Don't differentiate between ncurses and curses: the whole point
	  of ncurses is that it's a drop-in replacment. Stop if curses.h
	  can't be found, as it's essential.

	  Rename --enable-all-features to --enable-all-modes.

2004-01-29 10:37  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.am: Remove version.h and add lua.c.

2004-01-29 07:23  Reuben Thomas  <rrt@sc3d.org>

	* src/: help.c, main.c, version.h: Use VERSION from automake, not
	  version.h.

2004-01-29 04:33  David A. Capello  <dacap@users.sourceforge.net>

	* src/extern.h: Removed getkey_safe and refresh_clock_timeout.

2004-01-29 04:02  David A. Capello  <dacap@users.sourceforge.net>

	* TODO: delete-horizontal-space doesn't need uniarg.

2004-01-29 03:52  David A. Capello  <dacap@users.sourceforge.net>

	* src/extern.h: Changed "s" argument in insert_nstring to const.

2004-01-29 03:50  David A. Capello  <dacap@users.sourceforge.net>

	* src/line.c: Change "s" argument in insert_nstring to const.

2004-01-29 03:05  David A. Capello  <dacap@users.sourceforge.net>

	* doc/Makefile.am: Added zilerc.texi rules to avoid dependencies of
	  this auto-generated file when automake is run.

2004-01-28 15:01  Reuben Thomas  <rrt@sc3d.org>

	* INSTALL, README.compile: Rewrite the installation instructions in
	  README.compile and move them to INSTALL, where they should be.
	  The file now covers both normal installation and simply building
	  zile to try out.

2004-01-28 14:38  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Tests show that the overhead for updating the display
	  once per second in order to keep the clock up to date is
	  negligible, so Just Do It, and remove all the code that worried
	  about whether it should be done or not.

	  Added David to the list of authors.

	  Remove compilation time and host from the version string---it
	  looks very "computery" and isn't much help when debugging
	  (except, I suppose, the date for debugging builds, but ls -l
	  `which zile` will do that fine).

2004-01-28 14:09  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Added more files resulting from autotoolisation.

2004-01-28 14:05  Reuben Thomas  <rrt@sc3d.org>

	* doc/.cvsignore: Add Makefile.in and zilerc.texi

2004-01-28 12:08  Reuben Thomas  <rrt@sc3d.org>

	* src/.cvsignore: Add Makefile.in

2004-01-28 10:50  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Remove commented out include of curses headers; they
	  shouldn't be there. Add a comment to the screen member of struct
	  terminal to explain what it is.

2004-01-28 10:47  Reuben Thomas  <rrt@sc3d.org>

	* src/glue.c: Whitespace correction.

2004-01-28 10:37  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Tighten type of insert_string (parameter is const).

2004-01-27 16:53  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.am, src/basic.c, src/funcs.c: Whitespace correction.

2004-01-25 13:03  Reuben Thomas  <rrt@sc3d.org>

	* autogen.sh: Re-add with correct permissions.

2004-01-25 13:02  Reuben Thomas  <rrt@sc3d.org>

	* autogen.sh: Try removing the file in order to re-add it with
	  chmod +x.

2004-01-25 13:00  Reuben Thomas  <rrt@sc3d.org>

	* autogen.sh: Add a comment saying what this script does and chmod
	  +x it.

2004-01-25 12:58  Reuben Thomas  <rrt@sc3d.org>

	* aclocal.m4: This is a generated file, so shouldn't be in CVS.

2004-01-23 02:14  David A. Capello  <dacap@users.sourceforge.net>

	* Makefile.in, config.h.in, install-sh, mkinsdir.sh,
	  move-if-change, doc/Makefile.in, doc/zilerc.texi,
	  src/Makefile.in, src/config.h.in: Removed auto-generated and
	  unnecessary files.

2004-01-23 02:01  David A. Capello  <dacap@users.sourceforge.net>

	* autogen.sh: Script to run auto-generations tools.

2004-01-23 01:58  David A. Capello  <dacap@users.sourceforge.net>

	* aclocal.m4: [no log message]

2004-01-23 01:54  David A. Capello  <dacap@users.sourceforge.net>

	* acinclude.m4: [no log message]

2004-01-23 01:49  David A. Capello  <dacap@users.sourceforge.net>

	* src/zile.1.in: Modified the variable name to get the data
	  directory (ETCDIR -> pkgdatadir).

2004-01-23 01:45  David A. Capello  <dacap@users.sourceforge.net>

	* configure.ac, Makefile.am, doc/Makefile.am, src/Makefile.am:
	  Added the automake support.

2004-01-23 01:34  David A. Capello  <dacap@users.sourceforge.net>

	* src/fontlock.c: Fixed the usage of "make_heredoc_string" checking
	  ENABLE_SHELL_MODE definition.

2004-01-21 12:26  David A. Capello  <dacap@users.sourceforge.net>

	* src/bind.c: Fixed an error in the message that show undefined
	  keys.

2004-01-21 02:16  David A. Capello  <dacap@users.sourceforge.net>

	* TODO: Updated to the new changes of David A. Capello.

2004-01-21 02:14  David A. Capello  <dacap@users.sourceforge.net>

	* NEWS: New changes by David A. Capello.

2004-01-21 02:09  David A. Capello  <dacap@users.sourceforge.net>

	* src/search.c: Added BFLAG_ISEARCH functionality, and now C-g in
	  I-search loop stops recording macros.

2004-01-21 02:08  David A. Capello  <dacap@users.sourceforge.net>

	* src/zile.h: Added BFLAG_ISEARCH flag.  Fixed the ncurses
	  dependence.

2004-01-21 02:04  David A. Capello  <dacap@users.sourceforge.net>

	* src/line.c: Added `delete-horizontal-space' and `just-one-space'
	  functions.

2004-01-21 01:57  David A. Capello  <dacap@users.sourceforge.net>

	* src/tbl_funcs.h: Added forward-line, forward-sexp, backward-sexp,
	  mark-sexp, and delete-region.

2004-01-21 01:54  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Fixed forward-word.  Added forward-line,
	  transpose-chars, transpose-words, transpose-lines, forward-sexp,
	  backward-sexp, transpose-sexp, mark-word, and mark-sexp.

2004-01-21 01:51  David A. Capello  <dacap@users.sourceforge.net>

	* src/extern.h: Added `goto_point'.

2004-01-21 01:50  David A. Capello  <dacap@users.sourceforge.net>

	* src/glue.c: Added `goto_point' routine from undo.c.

2004-01-21 01:48  David A. Capello  <dacap@users.sourceforge.net>

	* src/undo.c: Moved `goto_point' routine to glue.c (because
	  `transpose_subr' in funcs.c need it).

2004-01-21 01:46  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Modified `universal_argument' to Emacs behavior.

2004-01-21 01:42  David A. Capello  <dacap@users.sourceforge.net>

	* src/funcs.c: Fixed the overwrite mode behavior with C-q
	  (quoted-insert).

2004-01-21 01:39  David A. Capello  <dacap@users.sourceforge.net>

	* src/line.c: Fixed the overwrite mode behavior.

2004-01-21 01:28  David A. Capello  <dacap@users.sourceforge.net>

	* src/extern.h: Added getkey_safe() and refresh_clock_timeout()
	  routines.

2004-01-21 01:24  David A. Capello  <dacap@users.sourceforge.net>

	* src/main.c: Added refresh_clock_timeout() to calculate how much
	  time we should wait to refresh the clock in the screen (thru the
	  display-time-format variable). The routine getkey_safe() does the
	  loop to get a key in a limited time (clock_timeout) and refresh
	  the screen if is necessary.

2004-01-21 01:20  David A. Capello  <dacap@users.sourceforge.net>

	* src/rc.c: Fixed overflow in parse_id_line() for long variable
	  names in configuration file.

2004-01-21 01:18  David A. Capello  <dacap@users.sourceforge.net>

	* src/keys.c: Fixed a bug in strtokey0() to handle the `M-\' key
	  combination.

2004-01-21 01:16  David A. Capello  <dacap@users.sourceforge.net>

	* src/bind.c: Just a small aesthetic change in make_completion().

2004-01-21 01:14  David A. Capello  <dacap@users.sourceforge.net>

	* src/undo.c: Fixed `revert_action' to handle nested
	  undo-sequences.

2004-01-07 00:45  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Get rid of some ncurses memory leaks. This is really
	  ncurses's fault, not ours, but since most of the leaks can easily
	  be removed by calling newterm and delscreen, it seemed reasonable
	  to do so.

	  I've discussed the rest of the leaks (detected by valgrind) with
	  the maintainer, and he doesn't want to or can't fix the
	  remainder: one leak would "require changing the ABI", and another
	  is a setbuffer/setvbuf buffer that "tends to cause core dumps" if
	  it's freed.

	  I'm inclined to add a suppressions file to valgrind for these
	  that ignores them.

2004-01-07 00:36  Reuben Thomas  <rrt@sc3d.org>

	* src/variables.c: Fix some memory leaks:

	  1. Unset a variable before setting it so as not to leak its
	  previous    contents.

	  2. In free_variables, free the contents of the list before
	  freeing the	 list itself.

	  Fix a crash in set_variable, by having get_variable_format always
	  return a string, so that we don't try to do string comparisons
	  with NULL.

2003-12-08 21:48  Reuben Thomas  <rrt@sc3d.org>

	* src/minibuf.c: Clear dir and fname before calling expand_path a
	  second time.

2003-12-08 21:48  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: The main while loop in expand_path had a typo at the
	  start: it had "sp != '\0'" instead of "*sp != '\0'" so it was a
	  potentially infinite loop.

	  I also simplified the code for dealing with // in a path.

2003-11-28 23:09  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Run text-mode hooks when entering text mode. To do
	  this, add a call to the text-mode hooks in find_file_hooks in an
	  else clause (this is zile, we don't have a fundamental mode, text
	  is the lowest we go!), and compile find_file_hooks() and the call
	  to it from find_file() unconditionally.

	  In passing, #ifdef the declaration of c_file[] and shell_file[]
	  conditional on the relevant modes.

2003-11-28 23:07  Reuben Thomas  <rrt@sc3d.org>

	* src/funcs.c: Fix whitespace problems (I'm not that tedious, but I
	  now use whitespace.el in Emacs, which is).

2003-11-28 21:24  Reuben Thomas  <rrt@sc3d.org>

	* src/minibuf.c: Whitespace cleanup.

2003-10-25 00:32  Sandro Sigala  <sandro@sigala.it>

	* COPYRIGHT, HISTORY, NEWS, TODO, doc/zile.texi, doc/zilerc.texi,
	  src/basic.c, src/bind.c, src/buffer.c, src/extern.h, src/file.c,
	  src/fontlock.c, src/funcs.c, src/glue.c, src/help.c, src/keys.c,
	  src/killring.c, src/line.c, src/macro.c, src/main.c,
	  src/minibuf.c, src/rc.c, src/redisplay.c, src/registers.c,
	  src/search.c, src/tbl_funcs.h, src/tbl_vars.h, src/undo.c,
	  src/variables.c, src/version.h, src/window.c, src/zile.1.in,
	  src/zile.h: * minor fixes to expand_path().  * fixed memory leak
	  in usage of agetcwd().  Now agetcwd() also uses a   previously
	  allocated astr to store the directory name (simplifies   the
	  code).  * fixed problem about relative directories, when zile is
	  called   with filenames on the command line (e.g., `zile
	  term_ncurses/*.c'   now works correctly).  * introduced
	  astr_isempty(), astr_first_char(), astr_last_char() sugar
	  functions.  "astr_last_char(as)" is certainly better than the
	  ugly	 "astr_cstr(as)[astr_size(as) - 1]".  * introduced ZTRACE()
	  function to make debugging easier.  * renamed ANCHOR_SPECIAL to
	  ANCHOR_HEREDOC because   cat <<EOF   bla   EOF   stuff is usually
	  called here-document.  * renamed `font-special' variable to
	  `font-here-document'.  * added `font-here-document' to
	  tbl_vars.h, zilerc.sample and Texinfo.  * redisplay speedup:
	  cache a few more variables:	status-line-color,
	  display-time-format, displayable-characters.	* startup speedup:
	  do not cache the variables too ofter.  * made make_heredoc_string
	  more flexible.  * fixed zlint.  * documented `sh-mode',
	  `kill-word', `backward-kill-word' in Texinfo.  * other fixes.

2003-09-30 23:11  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Don't try to index past the end of a line in
	  auto-fill-mode: limit the index to the max of (fill column,
	  current line length). This can go wrong when there are tabs in
	  the line.

2003-09-28 19:46  Reuben Thomas  <rrt@sc3d.org>

	* zile.lsm: Update for actual 1.7-b1 beta release.

2003-09-08 00:13  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Remove erroneous addition of NULs to strings (astrs
	  are always NUL-terminated, and adding a NUL just makes the length
	  wrong). This fixes filename completion, which had stopped
	  working.

2003-08-11 17:12  Reuben Thomas  <rrt@sc3d.org>

	* src/.cvsignore: Add fontlock_*.c.

2003-06-24 15:00  Reuben Thomas  <rrt@sc3d.org>

	* src/: file.c, funcs.c, killring.c: Fix a slew of compiler
	  warnings caught by -Wall (thanks to Nicolas Duboc for putting me
	  on the case!)

2003-06-24 13:28  Reuben Thomas  <rrt@sc3d.org>

	* src/: fontlock_c.c, fontlock_cpp.c, fontlock_csharp.c,
	  fontlock_java.c: Remove these files, as they're generated. In any
	  case, the versions in CVS are made by gperf 2.5, and don't
	  compile cleanly (thanks to Nicolas Duboc for pointing this out).

2003-06-24 13:22  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Include ctype.h for isspace (thanks to Nicolas
	  Duboc).

2003-05-25 23:06  Reuben Thomas  <rrt@sc3d.org>

	* KNOWNBUGS: Tweak the English.

2003-05-25 23:01  Reuben Thomas  <rrt@sc3d.org>

	* src/file.c: Get rid of the fixed-size buffer for reading userids.
	  expand_path now seems not to work, but it didn't even before this
	  change.

2003-05-25 22:41  Reuben Thomas  <rrt@sc3d.org>

	* doc/.cvsignore: Add zile.info

2003-05-25 22:41  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.h: Fix typo: HAS_VASPRINTF --> HAVE_VASPRINTF

2003-05-25 22:34  Reuben Thomas  <rrt@sc3d.org>

	* src/: bind.c, minibuf.c, zile.h: Make historyp.try take an astr
	  for symmetry with historyp.reread.

2003-05-25 22:23  Reuben Thomas  <rrt@sc3d.org>

	* src/minibuf.c: Remove the ugly astr_delete_struct_only function
	  and dangerous astr_str function/macro.

2003-05-25 22:20  Reuben Thomas  <rrt@sc3d.org>

	* configure.ac, src/line.c, src/zile.h: Make vasprintf mandatory,
	  and provide an implementation for those platforms that lack it
	  (courtesy of David Taillandier's xnprintf library).

2003-05-25 21:47  Reuben Thomas  <rrt@sc3d.org>

	* .cvsignore: Add configure.

2003-05-23 10:37  Sandro Sigala  <sandro@sigala.it>

	* src/: file.c, zile.h: shut up some implicit (const char *) ->
	  (char *) casts warnings

2003-05-19 23:26  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Remove a spurious increment that should have been
	  removed when applying patches earlier.

2003-05-19 23:04  Reuben Thomas  <rrt@sc3d.org>

	* configure, doc/zile.info: Remove generated files from CVS. Yeah,
	  I know, we probably want them in source tarballs, but that's
	  fine, you do a "make; make distclean" and then make the tarball.

2003-05-19 22:50  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.in, buffer.c, extern.h, file.c, fontlock.c,
	  funcs.c, help.c, line.c, main.c, minibuf.c, pathbuffer.c,
	  pathbuffer.h, rc.c, window.c, zile.h: Sandro suggested replacing
	  pathbuffer_t with astr. This set of patches is the rather ugly
	  result, although it's not as bad as it looks: lots of the changes
	  are just making char * --> const char *. One or two infelicities,
	  such as the fact that one history method now take an astr, while
	  another still takes a char *, need fixing. Since I propose to
	  carry on cleaning up the code generally, that shouldn't be too
	  much of a problem.

	  However, this set of changes definitely validates the decision to
	  go for a 1.6.2 release before releasing 1.7! 1.7 may now take a
	  little while to stabilise.

2003-05-16 16:19  Sandro Sigala  <sandro@sigala.it>

	* configure, doc/zile.info: regenerated configure with the latest
	  autoconf.  the info file should be included into the distribution
	  (makeinfo may be unavailable on user machine).

2003-05-16 16:17  Sandro Sigala  <sandro@sigala.it>

	* .cvsignore, doc/.cvsignore, src/.cvsignore: added files to ignore
	  configure generated files.

2003-05-15 11:02  Reuben Thomas  <rrt@sc3d.org>

	* src/main.c: Get rid of use of HAVE_NCURSES (now defunct).

2003-05-07 00:05  Reuben Thomas  <rrt@sc3d.org>

	* config.h.in, configure.ac, src/config.h.in, src/main.c: Since we
	  always require (n)curses, remove USE_NCURSES symbol; also since
	  we can use plain curses, rename HAVE_LIBNCURSES to
	  HAVE_LIBCURSES.

2003-05-07 00:04  Reuben Thomas  <rrt@sc3d.org>

	* acconfig.h: Replaced by config.h.in in newer autoconf.

2003-05-07 00:03  Reuben Thomas  <rrt@sc3d.org>

	* NEWS: Add a note about 1.6.2 to explain its absence from NEWS.

2003-05-07 00:02  Reuben Thomas  <rrt@sc3d.org>

	* Makefile.in: Adjust distclean rule for newer autoconf.

2003-05-06 23:52  Reuben Thomas  <rrt@sc3d.org>

	* configure.in: configure.in superceded by configure.ac

2003-05-06 23:42  Reuben Thomas  <rrt@sc3d.org>

	* configure: Remove generated file from the repo. N.B. This is not
	  removed by make distclean, so should still be present when making
	  a distribution tarball. The same applies to doc/zile.info

2003-05-06 23:40  Reuben Thomas  <rrt@sc3d.org>

	* doc/zile.info: Remove inessential file from the repo.

2003-05-06 23:31  Reuben Thomas  <rrt@sc3d.org>

	* zile.lsm: Update for 1.7-b1.

2003-05-06 23:28  Reuben Thomas  <rrt@sc3d.org>

	* COPYRIGHT, CREDITS, HISTORY, KNOWNBUGS, Makefile.in, NEWS,
	  README, README.compile, TODO, config.h.in, configure,
	  configure.ac, doc/Makefile.in, doc/texinfo.tex, doc/zile.info,
	  doc/zile.texi, doc/zilerc.texi, src/Makefile.in, src/basic.c,
	  src/bind.c, src/buffer.c, src/extern.h, src/file.c,
	  src/fontlock.c, src/fontlock_c.c, src/fontlock_cpp.c,
	  src/fontlock_csharp.c, src/fontlock_csharp.gperf,
	  src/fontlock_java.c, src/fontlock_java.gperf, src/funcs.c,
	  src/glue.c, src/help.c, src/keys.c, src/killring.c, src/line.c,
	  src/macro.c, src/main.c, src/minibuf.c, src/rc.c,
	  src/redisplay.c, src/registers.c, src/search.c, src/tbl_funcs.h,
	  src/tbl_vars.h, src/undo.c, src/variables.c, src/version.h,
	  src/window.c, src/zile.1.in, src/zile.h: Land the 1.7 sources.
	  This is basically 1.7-a7 (unreleased except on Sandro's home
	  page) plus my and Nicolas Duboc's 1.6.2 fixes, plus some patches
	  to 1.7-a6 from David Capello.

2003-05-06 15:04  Reuben Thomas  <rrt@sc3d.org>

	* zile.lsm: LSM file needed for sunsite.unc.edu (now ibiblio), so
	  readd.

2003-05-06 14:13  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.in: Corrected accidental removal of pathbuffer files
	  in last checkin.

2003-05-06 13:46  Reuben Thomas  <rrt@sc3d.org>

	* src/: hash.c, hash.h: These files shouldn't be here any more,
	  they're replaced by htable in lib/.

2003-05-06 12:56  Reuben Thomas  <rrt@sc3d.org>

	* src/zile.1: zile.1 is autogenerated, so don't have it in CVS.

2003-05-06 12:53  Reuben Thomas  <rrt@sc3d.org>

	* src/Makefile.in: Add pathbuffer.{c,o} from Nicolas Duboc's fixes,
	  and fix program dependencies to $(ZILELIBS), not $(LIBS), so we
	  don't try to build -lncurses or -lcurses (weirdly this worked on
	  Linux; perhaps GNU Make has some magic to cope with idiocy of
	  this sort).

2003-05-06 12:47  Reuben Thomas  <rrt@sc3d.org>

	* CREDITS, NEWS, TODO: Last-minute updates (mostly for Nicolas
	  Duboc's bug fixes).

2003-04-25 13:39  Reuben Thomas  <rrt@sc3d.org>

	* src/: pathbuffer.c, pathbuffer.h: Add files from nduboc@sf.net as
	  part of his patch to support systems lacking PATH_MAX.

2003-04-24 16:47  Reuben Thomas  <rrt@sc3d.org>

	* src/: extern.h, line.c, undo.c, zile.1, zile.h: Fix [ 723165 ]
	  zile 1.6.1 mishandles undo command in overwrite mode; patch by
	  Nicolas Duboc (nduboc@sf.net)

2003-04-24 16:43  Reuben Thomas  <rrt@sc3d.org>

	* src/line.c: Fix [ 723142 ] zile 1.6.1 mishandles cursor positions
	  on multiple windows; patch from Nicolas Duboc (nduboc@sf.net).

2003-04-24 16:36  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.in, extern.h, file.c, help.c, main.c, minibuf.c,
	  rc.c, zile.h: Fix compilation on GNU/HURD. Patch from Nicolas
	  Duboc [nicolas@duboc.net]

2003-04-24 16:34  Reuben Thomas  <rrt@sc3d.org>

	* configure, configure.in: Added check for MAKEINFO (snaffled from
	  OpenAL's configure.in).

2003-04-24 16:11  Reuben Thomas  <rrt@sc3d.org>

	* src/: Makefile.in, basic.c, bind.c, buffer.c, config.h.in,
	  extern.h, file.c, fontlock.c, funcs.c, glue.c, help.c, keys.c,
	  killring.c, line.c, macro.c, main.c, minibuf.c, rc.c,
	  redisplay.c, registers.c, search.c, tbl_funcs.h, tbl_vars.h,
	  undo.c, variables.c, version.h, window.c, zile.1.in, zile.h:
	  Committing 1.6.2 sources.

2003-04-24 16:11  Reuben Thomas  <rrt@sc3d.org>

	* COPYRIGHT, CREDITS, HISTORY, KNOWNBUGS, Makefile.in, NEWS,
	  README, README.compile, TODO, acconfig.h, configure,
	  configure.in, zile.lsm, doc/Makefile.in, doc/texinfo.tex,
	  doc/zile.info, doc/zile.texi, doc/zilerc.texi: Commit the 1.6.2
	  sources so far.

2001-01-19 22:08  Sandro Sigala  <sandro@sigala.it>

	* src/zile.1: Initial revision

2001-01-19 22:07  Sandro Sigala  <sandro@sigala.it>

	* COPYRIGHT, CREDITS, KNOWNBUGS, Makefile.in, NEWS, README, TODO,
	  configure, configure.in, zile.lsm, doc/Makefile.in,
	  doc/zile.info, doc/zile.texi, doc/zilerc.texi, src/Makefile.in,
	  src/basic.c, src/bind.c, src/buffer.c, src/config.h.in,
	  src/extern.h, src/file.c, src/fontlock.c, src/funcs.c,
	  src/glue.c, src/hash.c, src/hash.h, src/help.c, src/keys.c,
	  src/line.c, src/macro.c, src/main.c, src/minibuf.c, src/rc.c,
	  src/redisplay.c, src/search.c, src/tbl_funcs.h, src/tbl_vars.h,
	  src/undo.c, src/variables.c, src/version.h, src/window.c,
	  src/zile.1, src/zile.h: import of version 1.3.

2001-01-19 22:02  Sandro Sigala  <sandro@sigala.it>

	* src/: fontlock.c, fontlock_c.c, fontlock_c.gperf, fontlock_cpp.c,
	  fontlock_cpp.gperf, funcs.c, glue.c, hash.c, hash.h, help.c,
	  keys.c, killring.c, line.c, macro.c, main.c, minibuf.c, rc.c,
	  redisplay.c, registers.c, search.c, tbl_funcs.h, tbl_vars.h,
	  undo.c, variables.c, version.h, window.c, zile.1.in, zile.h:
	  Initial revision

2001-01-19 22:02  Sandro Sigala  <sandro@sigala.it>

	* src/: fontlock.c, fontlock_c.c, fontlock_c.gperf, fontlock_cpp.c,
	  fontlock_cpp.gperf, funcs.c, glue.c, hash.c, hash.h, help.c,
	  keys.c, killring.c, line.c, macro.c, main.c, minibuf.c, rc.c,
	  redisplay.c, registers.c, search.c, tbl_funcs.h, tbl_vars.h,
	  undo.c, variables.c, version.h, window.c, zile.1.in, zile.h:
	  import of version 1.4.

2001-01-19 21:59  Sandro Sigala  <sandro@sigala.it>

	* COPYRIGHT, CREDITS, HISTORY, INSTALL, KNOWNBUGS, Makefile.in,
	  NEWS, README, TODO, acconfig.h, configure, configure.in,
	  install-sh, mkinsdir.sh, move-if-change, zile.lsm,
	  doc/Makefile.in, doc/texinfo.tex, doc/zile.info, doc/zile.texi,
	  doc/zilerc.texi, src/Makefile.in, src/basic.c, src/bind.c,
	  src/buffer.c, src/config.h.in, src/extern.h, src/file.c: Initial
	  revision

2001-01-19 21:59  Sandro Sigala  <sandro@sigala.it>

	* COPYRIGHT, CREDITS, HISTORY, INSTALL, KNOWNBUGS, Makefile.in,
	  NEWS, README, TODO, acconfig.h, configure, configure.in,
	  install-sh, mkinsdir.sh, move-if-change, zile.lsm,
	  doc/Makefile.in, doc/texinfo.tex, doc/zile.info, doc/zile.texi,
	  doc/zilerc.texi, src/Makefile.in, src/basic.c, src/bind.c,
	  src/buffer.c, src/config.h.in, src/extern.h, src/file.c: import
	  of version 1.4.
